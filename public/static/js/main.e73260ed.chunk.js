(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{142:function(e,t,a){},284:function(e,t,a){},315:function(e,t){},340:function(e,t,a){e.exports=a.p+"static/media/pig-face.96b2c961.png"},376:function(e,t,a){e.exports=a(726)},383:function(e,t,a){},385:function(e,t,a){},387:function(e,t,a){},533:function(e,t,a){},595:function(e,t,a){},705:function(e,t){},706:function(e,t){},707:function(e,t,a){},709:function(e,t,a){},711:function(e,t,a){},715:function(e,t,a){},717:function(e,t,a){},720:function(e,t,a){},726:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(42),c=a.n(o),l=(a(381),a(318)),i=a(319),s=a(348),m=a(320),u=a(354),d=a(66),p=a(47),f=a(347),E=a(345),g=a(12),h=(a(383),a(385),function(){return r.a.createElement("div",{className:"backdrop"})}),b=(a(387),function(){return r.a.createElement(n.Fragment,null,r.a.createElement(h,null),r.a.createElement("div",{className:"cssload-loader"},r.a.createElement("div",{className:"cssload-inner cssload-one"}),r.a.createElement("div",{className:"cssload-inner cssload-two"}),r.a.createElement("div",{className:"cssload-inner cssload-three"})))}),v=r.a.createContext({token:null,userId:null,login:function(e,t){},logout:function(){}}),y=r.a.createContext(),N=a(16),x=a(17),Y=function(){var e=Object(n.useContext)(v),t=e.submitHandler,a=e.switchModeHandler;return r.a.createElement(N.d,{initialValues:{firstName:"",lastName:"",email:"",password:"",confirmPassword:""},validationSchema:x.object().shape({firstName:x.string().required("First Name is required"),lastName:x.string().required("Last Name is required"),email:x.string().email("Email is invalid").required("Email is required"),password:x.string().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:x.string().oneOf([x.ref("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,n=(e.status,e.touched);return r.a.createElement(N.c,{className:"auth-form",id:"formContentSignUp"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h4",null,"Create account")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"firstName"},"First Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(N.b,{placeholder:"First name",name:"firstName",type:"text",className:"form-control"+(t.firstName&&n.firstName?" is-invalid":"")}),r.a.createElement(N.a,{name:"firstName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"lastName"},"Last Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(N.b,{placeholder:"Last name",name:"lastName",type:"text",className:"form-control"+(t.lastName&&n.lastName?" is-invalid":"")}),r.a.createElement(N.a,{name:"lastName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(N.b,{placeholder:"Email",name:"email",type:"text",className:"form-control"+(t.email&&n.email?" is-invalid":"")}),r.a.createElement(N.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(N.b,{placeholder:"Password",name:"password",type:"password",className:"form-control"+(t.password&&n.password?" is-invalid":"")}),r.a.createElement(N.a,{name:"password",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"confirmPassword"},"Confirm Password"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(N.b,{placeholder:"Confirm",name:"confirmPassword",type:"password",className:"form-control"+(t.confirmPassword&&n.confirmPassword?" is-invalid":"")}),r.a.createElement(N.a,{name:"confirmPassword",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Register"),r.a.createElement("button",{onClick:a,type:"button",className:"btn btn-secondary mr-2"},"Sign in")))}})},w=function(){var e=Object(n.useContext)(v),t=e.submitHandler,a=e.switchModeHandler;return r.a.createElement(N.d,{initialValues:{email:"",password:""},validationSchema:x.object().shape({email:x.string().email("Email is invalid").required("Email is required"),password:x.string().required("Password is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,n=(e.status,e.touched);return r.a.createElement(N.c,{className:"auth-form",id:"formContentSignIn"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h4",null,"Sign in")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(N.b,{placeholder:"Email",name:"email",type:"text",className:"form-control"+(t.email&&n.email?" is-invalid":"")}),r.a.createElement(N.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(N.b,{placeholder:"Password",name:"password",type:"password",className:"form-control"+(t.password&&n.password?" is-invalid":"")}),r.a.createElement(N.a,{name:"password",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-actions"},r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Submit"),r.a.createElement("button",{onClick:a,type:"button",className:"btn btn-secondary mr-2"},"Sign up")))}})},O=a(735),S=a(515),D=(a(142),function(){var e=Object(n.useContext)(y),t=e.modalHeader,a=e.modalText,o=e.showInfoModal,c=e.setShowInfoModal,l=function(){return c(!1)};return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:o,onHide:l},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,t)),r.a.createElement(O.a.Body,null,a),r.a.createElement(O.a.Footer,null,r.a.createElement(S.a,{variant:"secondary",onClick:l},"Ok"))))}),M=function(){var e=Object(n.useState)(!1),t=Object(g.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),l=Object(g.a)(c,2),i=l[0],s=l[1],m=Object(n.useState)(!1),u=Object(g.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(""),E=Object(g.a)(f,2),h=E[0],N=E[1],x=Object(n.useState)(),O=Object(g.a)(x,2),S=O[0],M=O[1];Object(n.useEffect)(function(){C()},[]);var F=function(e,t,a){p(e),N(t),M(a)},j=Object(n.useContext)(v).login,k=function(){return o(!a)},C=function(){fetch("/cookie",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){j(e.response.token,e.response.userId)}).catch(function(e){console.log("There is no cookie!")})},A=function(e,t){var a={query:"\n            mutation CreateSettings($dailyBudget: String!, $weeklyBudget: String!, $monthlyBudget: String!, $members: String!, $categories: String!,  $currency: String!, $userId: String!, $creatorEmail: String! ) {\n                createSettings(settingsInput:{dailyBudget: $dailyBudget, weeklyBudget: $weeklyBudget, monthlyBudget: $monthlyBudget, members:$members, categories:$categories,currency:$currency, userId: $userId, creatorEmail: $creatorEmail}) {\n                    _id\n                   \n                  }\n              }\n      ",variables:{dailyBudget:"",weeklyBudget:"",monthlyBudget:"",members:"",categories:"",currency:"",userId:e.userId,creatorEmail:e.creatorsEmail}};fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then(function(e){if(!e.ok)throw s(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;e.data&&(F(!0,"Confirmation","Hi ".concat(t.firstName," ").concat(t.lastName,", your account was created. Now You can sign in.")),k(),s(!1))}).catch(function(e){throw s(!1),console.log(e),F(!0,"Error",e),e})};return r.a.createElement(y.Provider,{value:{modalHeader:h,modalText:S,showInfoModal:d,setShowInfoModal:p}},r.a.createElement(v.Provider,{value:{submitHandler:function(e){var t=JSON.stringify((new Date).getTime());s(!0);var n={query:"\n              query Login($email: String!, $password: String!) {\n                login(email: $email, password: $password) {\n                  userId\n                  token\n                }\n              }\n            ",variables:{email:e.email,password:e.password}};a&&(n={query:"\n            mutation CreateUser($email: String!, $password: String!, $name: String!, $surname: String!, $createdAt: String!, $updatedAt: String!) {\n              createUser(userInput: {email: $email, password: $password, name: $name, surname: $surname, createdAt: $createdAt, updatedAt: $updatedAt}) {\n                _id\n                email\n              }\n            }\n          ",variables:{email:e.email,password:e.password,name:e.firstName,surname:e.lastName,createdAt:t,updatedAt:t}}),fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(e){if(!e.ok)throw s(!1),e.statusText;return e.json()}).then(function(t){if(t.data.login)s(!1),j(t.data.login.token,t.data.login.userId);else{var a={userId:t.data.createUser._id,creatorsEmail:t.data.createUser.email};A(a,e)}}).catch(function(e){throw s(!1),F(!0,"Oops!","Your email or password is incorect."),e})},switchModeHandler:k}},r.a.createElement(D,null),i?r.a.createElement(b,null):r.a.createElement(n.Fragment,null,a?r.a.createElement(Y,null):r.a.createElement(w,null))))},F=a(176),j=a(33),k=a(159),C=a.n(k),A=a(160),T=a.n(A),B=(a(533),function(){var e=Object(n.useState)([]),t=Object(g.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),l=Object(g.a)(c,2),i=l[0],s=l[1],m=Object(n.useState)(!1),u=Object(g.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(""),E=Object(g.a)(f,2),h=E[0],v=E[1],N=Object(n.useState)(),x=Object(g.a)(N,2),Y=x[0],w=x[1],O=Object(n.useState)(!1),S=Object(g.a)(O,2),M=S[0],k=S[1],A=function(e,t,a){k(e),v(t),w(a)},B=Object(n.useCallback)(function(e){e.length&&(o(function(){return[e[0]]}),p(!1))},[]),I=Object(F.a)({onDrop:B,accept:"text/csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, image/png, image/jpeg, application/pdf",minSize:0,maxSize:50173280}),$=I.isDragActive,_=I.getRootProps,q=I.getInputProps,z=I.isDragReject,P=I.rejectedFiles,R=P.length>0&&P[0].size>50173280;return r.a.createElement(n.Fragment,null,r.a.createElement(y.Provider,{value:{showInfoModal:M,setShowInfoModal:k,modalHeader:h,modalText:Y,modalInfo:A}},i?r.a.createElement(b,null):r.a.createElement(n.Fragment,null,r.a.createElement(D,null),r.a.createElement("div",{className:"container h-100"},r.a.createElement("div",{className:"row h-100 justify-content-center"},r.a.createElement("div",{className:"dropBox"},d?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Please select a file first!"):null,r.a.createElement("div",null,r.a.createElement("ul",null,a.map(function(e){return r.a.createElement("li",{className:"text-left",key:e.name},"".concat((n=e.name,n.length>20?n.substring(0,20)+"...":n),"  - (").concat((t=e.size)<1024?t+" Bytes":t<1048576?(t/1024).toFixed(3)+" KB":t<1073741824?(t/1048576).toFixed(3)+" MB":(t/1073741824).toFixed(3)+" GB",")"),r.a.createElement("button",{className:"btn_remove",onClick:function(){return function(e){var t=[];a.map(function(a){a.name!==e.name&&a.size!==e.size&&t.push(a)}),o(t)}(e)}},r.a.createElement("i",null,r.a.createElement(j.a,{size:20}))));var t,n})),r.a.createElement("div",Object.assign({className:"drop_zone container text-center "},_()),r.a.createElement("input",q()),!$&&r.a.createElement("i",null,"Click here or drop a file to upload! ",r.a.createElement(j.d,{size:20})),$&&!z&&"Drop it here!",z&&"File type not accepted, sorry!",R&&r.a.createElement("div",{className:"text-danger mt-2"},"File is too large."))),r.a.createElement("button",{className:"btn btn_main button_Upload",onClick:function(){!function(e){if(e.length){var t=new FormData;t.append("file",e[0]),s(!0),fetch("/upload",{method:"POST",body:t}).then(function(e){if(console.log(e),s(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e}).then(function(e){o([]),A(!0,"Succsess","File was uploaded to db."),s(!1)}).catch(function(e){s(!1),A(!0,"Error",e),console.log(e)})}else p(!0)}(a)}}," Upload"),r.a.createElement("button",{className:"btn btn_main button_Upload",onClick:function(){!function(){var e="7c6ee306971e226ac39f2b5ffc53d192.png";T()({method:"GET",url:"/file/".concat(e),responseType:"blob"}).then(function(t){console.log(t),C.a.saveAs(t.data,e)}).then(function(){console.log("Completed")}).catch(function(e){console.log(e)})}()}}," Download")))))))}),I=a(34),$=a.n(I),_=a(78),q=a(79),z=a(6),P=a.n(z),R=r.a.createContext(),U=a(83),J=a.n(U),L=a(29),H=(a(202),function(e){return P()(e,"x").format("MM/DD/YYYY")}),G=function(e){var t=e.setting,a=Object(n.useContext)(y),o=a.submitExpense,c=a.showModal,l=a.setShowModal,i=a.expense,s=a.onUpdate,m="GBD"===t.currency?"\xa3":"Dollar"===t.currency?"$":"\u20ac",u=function(){return l(!c)},d=P()().format("MM/DD/YYYY"),p=Object(n.useState)(function(e){var t=[];return e.categories.split(";").forEach(function(e){e.length&&t.push(e)}),t}(t)),f=Object(g.a)(p,2),E=f[0],h=(f[1],Object(n.useState)(new Date(i?H(i.createdAt):d))),b=Object(g.a)(h,2),v=b[0],Y=b[1];return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:c,onHide:u},r.a.createElement(O.a.Header,{closeButton:!0},s?r.a.createElement(O.a.Title,null,"Update expense"):r.a.createElement(O.a.Title,null,"Add expense")),r.a.createElement(O.a.Body,null,r.a.createElement(N.d,{initialValues:{tag:i?i.tag:"",title:i?i.title:"",description:i?i.description:"",group:i?i.group:"",price:i?i.price:"",date:i?H(i.createdAt):d,updateDate:i?H(i.updatedAt):d},validationSchema:x.object().shape({title:x.string().required("title is required"),description:x.string(),group:x.string().required("Category is required"),tag:x.string().required("Type is required"),price:x.number().required("Price is required"),date:x.date().required("Date is required")}),onSubmit:function(e){o(e)},render:function(e){var t=e.errors,a=e.values,n=e.touched,o=e.handleChange,c=e.setFieldValue,l=e.handleBlur;return r.a.createElement(N.c,{className:"auth-form"},r.a.createElement("div",{className:"p-2"}),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Type"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("select",{name:"tag",onChange:o,onBlur:l,value:a.tag,className:"custom-select mr-sm-2 form-control"+(t.tag&&n.tag?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:""},"Select a type"),r.a.createElement("option",{value:"Expense"},"Expense"),r.a.createElement("option",{value:"Income"},"Income")),r.a.createElement(N.a,{name:"tag",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Title"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(N.b,{placeholder:"Title",name:"title",type:"text",className:"form-control"+(t.title&&n.title?" is-invalid":"")}),r.a.createElement(N.a,{name:"title",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"description"},"Description"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(N.b,{component:"textarea",placeholder:"Description",name:"description",type:"text",className:"form-control"}),r.a.createElement(N.a,{name:"description",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Group"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("select",{name:"group",onChange:o,onBlur:l,value:a.group,className:"custom-select mr-sm-2 form-control"+(t.group&&n.group?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:""},"Select a category"),E.map(function(e){return r.a.createElement("option",{key:e,value:e},e)})),r.a.createElement(N.a,{name:"group",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Price"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("input",{placeholder:"0.00",name:"price",onChange:function(e){c("price",function(e){var t=e.target.value;return 1===t.length&&"."===t&&(t=t.slice(0,-1)),2===t.length&&"00"===t&&(t=t.slice(0,-1)),t.split(".").length-1>1&&(t=t.slice(0,-1)),(t=t.indexOf(".")>=0?t.substr(0,t.indexOf("."))+t.substr(t.indexOf("."),3):t).replace(/[^\d.-]/g,"").replace("-","")}(e))},value:a.price,className:"form-control"+(t.price&&n.price?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{style:{fontSize:"15px"},className:"input-group-text"},m)),r.a.createElement(N.a,{name:"price",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"date"},"Date"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement(J.a,{className:"form-control not-round-right-corner"+(t.date&&n.date?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",{className:""},a.date)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"date",selected:v,placeholder:"Enter date",onChange:function(e){var t;c("date",(t=e,P()(t).format("MM/DD/YYYY"))),Y(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(L.b,{className:"",size:20}))))),r.a.createElement(N.a,{name:"date",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-actions float-right"},s?r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Update"):r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Submit"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:u},"Cancel")))}}))))},V=function(){var e=Object(n.useContext)(y),t=e.modalText,a=e.showInfoModal,o=e.setShowInfoModal,c=e.actionFunction,l=function(){return o(!1)};return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:a,onHide:l},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,"Please confirm")),r.a.createElement(O.a.Body,null,t),r.a.createElement(O.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:c},"Yes"),r.a.createElement(S.a,{variant:"secondary",onClick:l},"Cancel"))))},K=(a(284),function(e){var t,a=e.expense,o=e.setting,c=v._currentValue,l=Object(n.useState)(!1),i=Object(g.a)(l,2),s=i[0],m=i[1],u=Object(n.useState)(),d=Object(g.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)(),h=Object(g.a)(E,2),b=h[0],N=h[1],x=Object(n.useState)(!1),Y=Object(g.a)(x,2),w=Y[0],O=Y[1],S="GBD"===o.currency?"\xa3":"Dollar"===o.currency?"$":"\u20ac",D=function(e,t,a){m(e),f(t),N(a)},M=Object(n.useContext)(R),F=M.removeExpense,j=M.updateExpense,k=M.showMore;return r.a.createElement(y.Provider,{value:{modalText:p,showInfoModal:s,setShowInfoModal:m,actionFunction:function(){F(b)},showModal:w,setShowModal:O,expense:a,onUpdate:!0,submitExpense:function(e){e.id=a._id,j(e)}}},r.a.createElement(V,null),r.a.createElement(G,{setting:o}),r.a.createElement("span",{className:k?"card_more":"card"},r.a.createElement("div",{style:{background:"rgb(249, 248, 248)"}},r.a.createElement("div",{className:k?"card_title_more":"card_title"}," ",a.title)),r.a.createElement("div",{className:"card_date"},(t=a.createdAt,P()(t,"x").format("MM/DD/YYYY"))),r.a.createElement("div",{className:k?"card_group":"card_group invisible"},"Group: ",a.group),r.a.createElement("div",{className:k?"card_group":"card_group invisible"},"Creator: ",o.creatorEmail),r.a.createElement("div",{className:k?"card_description":"card_description invisible"},a.description),"Expense"===a.tag?r.a.createElement("div",{className:"card_price_expense"},"-",a.price," ",S," "):r.a.createElement("div",{className:"card_price_income"},a.price," ",S," "),c.userId===o.creatorId?r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"btn card_removeButton",onClick:function(){return D(!0,"Are you sure whant to delete this item?",a)}},r.a.createElement("i",null,r.a.createElement(L.d,{size:20}))),r.a.createElement("button",{className:"btn card_editButton",onClick:function(){return O(!w)}},r.a.createElement("i",null,r.a.createElement(L.c,{size:20})))):r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"btn card_removeButton disabled",disabled:!0,onClick:function(){return D(!0,"Are you sure whant to delete this item?",a)}},r.a.createElement("i",null,r.a.createElement(L.d,{size:20}))),r.a.createElement("button",{className:"btn card_editButton disabled",disabled:!0,onClick:function(){return O(!w)}},r.a.createElement("i",null,r.a.createElement(L.c,{size:20}))))))}),X=a(226),W=function(){var e=Object(n.useContext)(y),t=e.showModal,a=e.setShowModal,o=e.showImportModal,c=e.setShowIportModal,l=Object(n.useContext)(R),i=l.setShowMore,s=l.showMore,m=l.allExpenses,u=l.settings;return r.a.createElement("span",{className:"card_first card"},r.a.createElement(n.Fragment,null,r.a.createElement(D,null),r.a.createElement("div",{className:"row d-flex align-self-center"},r.a.createElement("button",{className:"btn_one",onClick:function(){return a(!t)}},r.a.createElement("i",null,r.a.createElement(j.b,{size:30}))),r.a.createElement("button",{className:"btn_upload",onClick:function(){return c(!o)}},r.a.createElement("i",null,r.a.createElement(j.d,{size:25}))),m.length?r.a.createElement("button",{className:"btn_one",onClick:function(){return i(!s)}},s?r.a.createElement("i",null,r.a.createElement(X.a,{size:30})):r.a.createElement("i",null,r.a.createElement(X.b,{size:30}))):null),t&&r.a.createElement(n.Fragment,null,r.a.createElement(G,{setting:u[0]}))))},Q=(a(595),function(){var e=Object(n.useContext)(R),t=e.allExpenses,a=e.settings;return r.a.createElement(n.Fragment,null,r.a.createElement(W,null),t.map(function(e){return a.map(function(t){return e.creatorId===t.creatorId?r.a.createElement(K,{className:"expenses_list",key:e._id,expense:e,setting:t}):null})}))}),Z=function(){var e=Object(n.useContext)(R),t=e.getAllOnFilter,a=e.getAll,o=P()().format("MM/DD/YYYY"),c=P()().subtract(1,"months").format("MM/DD/YYYY"),l=Object(n.useState)(new Date(c)),i=Object(g.a)(l,2),s=i[0],m=i[1],u=Object(n.useState)(new Date(o)),d=Object(g.a)(u,2),p=d[0],f=d[1],E=function(e){return P()(e).format("MM/DD/YYYY")},h=function(e,n){var r={dateFrom:"",dateTo:"",tag:n};switch(e){case"today":r={dateFrom:P()().format("MM/DD/YYYY"),dateTo:P()().format("MM/DD/YYYY"),tag:n},t(r);break;case"week":r={dateFrom:P()().startOf("week").format("MM/DD/YYYY"),dateTo:P()().endOf("week").format("MM/DD/YYYY"),tag:n},t(r);break;case"month":r={dateFrom:P()().startOf("month").format("MM/DD/YYYY"),dateTo:P()().endOf("month").format("MM/DD/YYYY"),tag:n},t(r);break;case"year":r={dateFrom:P()().startOf("year").format("MM/DD/YYYY"),dateTo:P()().endOf("year").format("MM/DD/YYYY"),tag:n},t(r);break;case"all":a(r.tag);break;default:r={dateFrom:P()().startOf("month").format("MM/DD/YYYY"),dateTo:P()().endOf("month").format("MM/DD/YYYY"),tag:n},t(r)}};return r.a.createElement(n.Fragment,null,r.a.createElement(N.d,{initialValues:{dateFrom:c,dateTo:o,tag:"All"},validationSchema:x.object().shape({dateFrom:x.date().required("Date is required"),dateTo:x.date().required("Date is required"),tag:x.string()}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,a=e.values,n=e.touched,o=e.setFieldValue,c=e.handleChange,l=e.handleBlur;return r.a.createElement(N.c,null,r.a.createElement("div",{className:"form-group row col-sm-12  justify-content-center mb-3"},r.a.createElement("button",{type:"button",className:" col-sm-2 btn btn_with_line",onClick:function(){h("today",a.tag),o("dateFrom",P()().format("MM/DD/YYYY")),o("dateTo",P()().format("MM/DD/YYYY")),m(P()()._d),f(P()()._d)}},"Today"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){h("week",a.tag),o("dateFrom",P()().startOf("week").format("MM/DD/YYYY")),o("dateTo",P()().endOf("week").format("MM/DD/YYYY")),m(P()().startOf("week")._d),f(P()().endOf("week")._d)}},"This week"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){h("month",a.tag),o("dateFrom",P()().startOf("month").format("MM/DD/YYYY")),o("dateTo",P()().endOf("month").format("MM/DD/YYYY")),m(P()().startOf("month")._d),f(P()().endOf("month")._d)}},"This month"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){h("year",a.tag),o("dateFrom",P()().startOf("year").format("MM/DD/YYYY")),o("dateTo",P()().endOf("year").format("MM/DD/YYYY")),m(P()().startOf("year")._d),f(P()().endOf("year")._d)}},"This year"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){return h("all",a.tag)}},"All")),r.a.createElement("div",{className:"form-group row col-sm-12  justify-content-center mb-2"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:" col-form-label",htmlFor:"title"},"Type:"),r.a.createElement("div",{className:"ml-3 mr-2"},r.a.createElement("select",{name:"tag",onChange:c,onBlur:l,value:a.tag,className:"custom-select mr-sm-2 form-control"+(t.tag&&n.tag?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:"All"},"All"),r.a.createElement("option",{value:"Expense"},"Expenses"),r.a.createElement("option",{value:"Income"},"Incomes")),r.a.createElement(N.a,{name:"tag",component:"div",className:"invalid-feedback"}))),r.a.createElement("label",{className:" col-form-label ml-4",htmlFor:"dateFrom"},"From:"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2 mr-sm-2 ml-3 mr-3"},r.a.createElement(J.a,{selected:s,startDate:s,endDate:p,className:"form-control not-round-right-corner"+(t.dateFrom&&n.dateFrom?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",null,a.dateFrom)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"dateFrom",placeholder:"Enter date",onChange:function(e){o("dateFrom",E(e)),m(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(L.b,{className:"",size:20}))))),r.a.createElement(N.a,{name:"dateTo",component:"div",className:"invalid-feedback"}),r.a.createElement("label",{className:"col-form-label ml-5 mr-3",htmlFor:"dateTo"},"To:"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement(J.a,{selected:p,startDate:s,endDate:p,className:"form-control not-round-right-corner"+(t.dateTo&&n.dateTo?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",null,a.dateTo)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"dateTo",placeholder:"Enter date",onChange:function(e){o("dateTo",E(e)),f(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(L.b,{className:"",size:20}))))),r.a.createElement(N.a,{name:"dateTo",component:"div",className:"invalid-feedback"}),r.a.createElement("div",{className:"float-right ml-5"},r.a.createElement("button",{type:"submit",className:"btn btn_main"},"Filter"))))}}))},ee=a(19),te=function(){var e=Object(n.useContext)(R).allExpenses,t=Object(n.useState)([]),a=Object(g.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(!0),i=Object(g.a)(l,2),s=i[0],m=i[1],u=Object(n.useState)(!0),d=Object(g.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)(!0),h=Object(g.a)(E,2),b=h[0],v=h[1],y=Object(n.useState)("auto"),N=Object(g.a)(y,2),x=N[0],Y=N[1],w=Object(n.useState)("auto"),O=Object(g.a)(w,2),S=O[0],D=O[1],M={first:[]};Object(n.useEffect)(function(){!function(e){var t=[],a={expenses:0,incomes:0,budget:0};e.forEach(function(e){e.date=P()(e.createdAt,"x").format("DD/MM"),"Expense"===e.tag?(a.expenses=a.expenses+parseFloat(e.price),a.budget=a.budget-parseFloat(e.price),t.push({date:e.date,Expenses:a.expenses.toFixed(2),Incomes:a.incomes.toFixed(2),Budget:a.budget.toFixed(2)})):(a.incomes=a.incomes+parseFloat(e.price),a.budget=a.budget+parseFloat(e.price),t.push({date:e.date,Expenses:a.expenses.toFixed(2),Incomes:a.incomes.toFixed(2),Budget:a.budget.toFixed(2)}))}),M.first.push(Math.min.apply(Math,t.map(function(e){return e.Incomes}))),M.first.push(Math.max.apply(Math,t.map(function(e){return e.Incomes}))),M.first.push(Math.min.apply(Math,t.map(function(e){return e.Budget}))),M.first.push(Math.max.apply(Math,t.map(function(e){return e.Budget}))),M.first.push(Math.min.apply(Math,t.map(function(e){return e.Expenses}))),M.first.push(Math.max.apply(Math,t.map(function(e){return e.Expenses}))),M.smallest=Math.min.apply(Math,M.first.map(function(e){return e})),M.biggest=Math.max.apply(Math,M.first.map(function(e){return e})),Y(M.biggest),D(M.smallest),c(t)}(e)},[e]);return r.a.createElement(n.Fragment,null,e.length?r.a.createElement(ee.k,{width:"95%",height:150},r.a.createElement(ee.b,{data:o,margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,b?r.a.createElement("linearGradient",{id:"colorExp",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#FF0000",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#FF0000",stopOpacity:0})):null,",",p?r.a.createElement("linearGradient",{id:"colorInc",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})):null,",",s?r.a.createElement("linearGradient",{id:"colorBud",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#0000FF",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#0000FF",stopOpacity:0})):null),r.a.createElement(ee.e,{vertical:!1,horizontal:!1}),r.a.createElement(ee.g,{onClick:function(e){!function(e){switch(e.dataKey){case"Budget":m(!s);break;case"Incomes":f(!p);break;case"Expenses":v(!b);break;default:console.log("incorect name")}}(e)}}),r.a.createElement(ee.l,null),r.a.createElement(ee.a,{type:"monotone",dataKey:"Budget",stroke:"#0000FF",fillOpacity:1,fill:"url(#colorBud)"}),r.a.createElement(ee.a,{type:"monotone",dataKey:"Incomes",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorInc)"}),r.a.createElement(ee.a,{type:"monotone",dataKey:"Expenses",stroke:"#FF0000",fillOpacity:1,fill:"url(#colorExp)"}),r.a.createElement(ee.m,{dataKey:"date",fontSize:"10"}),r.a.createElement(ee.n,{type:"number",domain:[S,x],allowDataOverflow:!0,fontSize:"10"}))):null)},ae=a(339),ne=a.n(ae),re=a(228),oe=a.n(re),ce=function(){var e=Object(n.useContext)(y),t=e.modalInfo,a=e.showImportModal,o=e.setShowIportModal,c=Object(n.useContext)(R),l=c.submitExpenseFromImport,i=c.setAllExpenses,s=Object(n.useState)([]),m=Object(g.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(!1),f=Object(g.a)(p,2),E=f[0],h=f[1],v=Object(n.useState)(!1),N=Object(g.a)(v,2),x=N[0],Y=N[1],w=function(){return o(!1)},D=function(e){ne.a.parse(e,{complete:function(e){M(e)}})},M=function(){var e=Object(_.a)($.a.mark(function e(a){var n,r,o,c;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{title:"",description:"",price:"",group:"",createdAt:"",tag:""}],r=[],e.next=4,k(a.data[0]);case 4:(o=e.sent).forEach(function(e,t){"title"===e.name.toLowerCase()&&(n[0].title=o[t].id),"description"===e.name.toLowerCase()&&(n[0].description=o[t].id),"price"===e.name.toLowerCase()&&(n[0].price=o[t].id),"group"===e.name.toLowerCase()&&(n[0].group=o[t].id),"date"===e.name.toLowerCase()&&(n[0].createdAt=o[t].id),"type"===e.name.toLowerCase()&&(n[0].tag=o[t].id)}),a.data.forEach(function(e,t){0!==t&&e[0].length&&r.push({title:e[n[0].title],description:e[n[0].description],price:e[n[0].price],group:e[n[0].group],createdAt:e[n[0].createdAt],tag:e[n[0].tag]})}),c=[],r.forEach(function(){var e=Object(_.a)($.a.mark(function e(a){return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,l(a);case 3:if(e.t1=e.sent,e.t0.push.call(e.t0,e.t1),n.length!==c.length){e.next=12;break}return e.next=8,i(c);case 8:t(!0,"Confirmation","File was uploaded"),h(!1),d([]),w();case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),k=function(e){return new Promise(function(a,n){var r=[],o=[];if(["Title","Price","Group","Date","Type","Description"].forEach(function(t){var a=!1;e.forEach(function(e,n){t.toLocaleLowerCase()===e.toLowerCase()&&(a=!0,r.push({name:t,id:n}))}),a||o.push(t)}),o.length){var c="";o.forEach(function(e,t){o.length===t+1?c+=' "'.concat(e,'".'):c+=' "'.concat(e,'";')}),t(!0,"Error","Inappropriate file. Missing fields in the file:".concat(c)),h(!1),d([]),w()}else a(r)})},A=Object(n.useCallback)(function(e){e.length&&(d(function(){return[e[0]]}),Y(!1))},[]),B=Object(F.a)({onDrop:A,accept:"text/csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",minSize:0,maxSize:50173280}),I=B.isDragActive,q=B.getRootProps,z=B.getInputProps,P=B.isDragReject,U=B.rejectedFiles,J=U.length>0&&U[0].size>50173280;return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:a,onHide:w},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,"Import expenses ",E)),E?r.a.createElement(b,null):r.a.createElement(n.Fragment,null,r.a.createElement(O.a.Body,null,x?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Please select a file first!"):null,r.a.createElement("div",null,r.a.createElement("ul",null,u.map(function(e){return r.a.createElement("li",{className:"",key:e.name},"".concat((a=e.name,a.length>20?a.substring(0,20)+"...":a),"  - (").concat((t=e.size)<1024?t+" Bytes":t<1048576?(t/1024).toFixed(3)+" KB":t<1073741824?(t/1048576).toFixed(3)+" MB":(t/1073741824).toFixed(3)+" GB",")"),r.a.createElement("button",{className:"btn_remove",onClick:function(){return function(e){var t=[];u.map(function(a){a.name!==e.name&&a.size!==e.size&&t.push(a)}),d(t)}(e)}},r.a.createElement("i",null,r.a.createElement(j.a,{size:20}))));var t,a})),r.a.createElement("div",Object.assign({className:"drop_zone container text-center "},q()),r.a.createElement("input",z()),!I&&r.a.createElement("i",null,"Click here or drop a file to upload! ",r.a.createElement(j.d,{size:20})),I&&!P&&"Drop it here!",P&&"File type not accepted, sorry!",J&&r.a.createElement("div",{className:"text-danger mt-2"},"File is too large."))),r.a.createElement("div",{className:"mt-2"},r.a.createElement("a",{onClick:function(){var e;e="9d51495ee31655607488187b3b3f4b14.xlsx",T()({method:"GET",url:"/file/".concat(e),responseType:"blob"}).then(function(e){console.log(e),C.a.saveAs(e.data,"example.xlsx")}).then(function(){console.log("Completed")}).catch(function(e){console.log(e)})},style:{cursor:"pointer"}},r.a.createElement("i",null,r.a.createElement(L.a,{size:20,color:"grey"}))," - Download template file.")))),r.a.createElement(O.a.Footer,null,r.a.createElement(S.a,{type:"button",variant:"primary",disabled:E,onClick:function(){return function(e){if(e.length){h(!0);var t=e[0].name.split(".");if("csv"===(t=t[t.length-1].toLowerCase()))D(e[0]);else{var a=new FileReader;a.onload=function(e){var t=e.target.result,a=oe.a.read(t,{type:"binary",header:1,cellDates:!0,dateNF:"MM/DD/YYYY"}),n=a.SheetNames[0],r=a.Sheets[n],o=oe.a.utils.sheet_to_csv(r,{header:1,raw:!1});D(o)},a.readAsBinaryString(e[0])}}else Y(!0)}(u)}},"Upload"),r.a.createElement(S.a,{variant:"secondary",disabled:E,onClick:w},"Cancel"))))},le=a(92),ie=(a(707),a(340)),se=a.n(ie),me=function(e,t,a){var n=P()().format("YYYY-MM-DD"),r=0;return a.forEach(function(e){"Expense"===e.tag&&n===P()(e.createdAt,"x").format("YYYY-MM-DD")&&(r+=parseFloat(e.price))}),r=r.toFixed(2),t[0].dailyBudget.length?(e=e.replace("{DAY_EXPENSES}",r).replace("{CURRENCY}",ve(t[0])),"".concat(e," and your daily budget is ").concat(t[0].dailyBudget," ").concat(ve(t[0]))):e.replace("{DAY_EXPENSES}",r).replace("{CURRENCY}",ve(t[0]))},ue=function(e,t,a){var n=P()().startOf("year").format("YYYY-MM-DD"),r=P()().endOf("year").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Expense"===e.tag&&n<=P()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=P()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),e.replace("{YEAR_EXPENSES}",o).replace("{CURRENCY}",ve(t[0]))},de=function(e,t,a){var n=P()().startOf("week").format("YYYY-MM-DD"),r=P()().endOf("week").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Expense"===e.tag&&n<=P()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=P()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),t[0].weeklyBudget.length?(e=e.replace("{WEEK_EXPENSES}",o).replace("{CURRENCY}",ve(t[0])),"".concat(e," and your weekly budget is ").concat(t[0].weeklyBudget," ").concat(ve(t[0]))):e.replace("{WEEK_EXPENSES}",o).replace("{CURRENCY}",ve(t[0]))},pe=function(e,t,a){var n=P()().startOf("month").format("YYYY-MM-DD"),r=P()().endOf("month").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Expense"===e.tag&&n<=P()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=P()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),t[0].monthlyBudget.length?(e=e.replace("{MONTH_EXPENSES}",o).replace("{CURRENCY}",ve(t[0])),"".concat(e," and your monthly budget is ").concat(t[0].monthlyBudget," ").concat(ve(t[0]))):e.replace("{MONTH_EXPENSES}",o).replace("{CURRENCY}",ve(t[0]))},fe=function(e,t,a){var n=P()().format("YYYY-MM-DD"),r=0;return a.forEach(function(e){"Income"===e.tag&&n===P()(e.createdAt,"x").format("YYYY-MM-DD")&&(r+=parseFloat(e.price))}),r=r.toFixed(2),e.replace("{DAY_INCOME}",r).replace("{CURRENCY}",ve(t[0]))},Ee=function(e,t,a){var n=P()().startOf("year").format("YYYY-MM-DD"),r=P()().endOf("year").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Income"===e.tag&&n<=P()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=P()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),e.replace("{YEAR_INCOME}",o).replace("{CURRENCY}",ve(t[0]))},ge=function(e,t,a){var n=P()().startOf("week").format("YYYY-MM-DD"),r=P()().endOf("week").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Income"===e.tag&&n<=P()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=P()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),e.replace("{WEEK_INCOME}",o).replace("{CURRENCY}",ve(t[0]))},he=function(e,t,a){var n=P()().startOf("month").format("YYYY-MM-DD"),r=P()().endOf("month").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Income"===e.tag&&n<=P()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=P()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),e.replace("{MONTH_INCOME}",o).replace("{CURRENCY}",ve(t[0]))},be=function(e,t,a){var n=[];a.forEach(function(e){if("Expense"===e.tag){var t=!1;n.forEach(function(a){a.groupName===e.group&&(t=!0,a.amount+=parseFloat(e.price))}),t||n.push({groupName:e.group,amount:parseFloat(e.price)})}}),n.forEach(function(e){e.amount=e.amount.toFixed(2)}),n=n.sort(function(e,t){return parseFloat(t.amount)-parseFloat(e.amount)});var r="";return n.forEach(function(e,a){n.length===a+1?r+="\u2022 ".concat(e.groupName," - ").concat(e.amount," ").concat(ve(t[0]),"."):r+="\u2022 ".concat(e.groupName," - ").concat(e.amount," ").concat(ve(t[0]),"; ")}),e.includes("{CATEGORY_NAME}")?"".concat(e.replace("{CATEGORY_NAME}",n[0].groupName)," - ").concat(n[0].amount," ").concat(ve(t[0]),"."):e.replace("{All_GROUPS}",r)},ve=function(e){return"GBD"===e.currency?"\xa3":"Dollar"===e.currency?"$":"\u20ac"},ye=function(){var e=Object(n.useContext)(R),t=e.settingsForBot,a=e.allExpensesForBot,o=e.user,c=v._currentValue;Object(n.useEffect)(function(){c.token&&(Object(le.dropMessages)(),l("Hello"))},[c.token]);var l=function(e){Object(le.toggleMsgLoader)();var n={userMessage:e};fetch("/watson",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){Object(le.toggleMsgLoader)(),e.response.forEach(function(e){var n=function(e,t,a,n){return e.includes("{NAME}")?e.replace("{NAME}",n.name).replace("{SURNAME}",n.surname):e.includes("{DAY_EXPENSES}")?e=me(e,t,a):e.includes("{YEAR_EXPENSES}")?e=ue(e,t,a):e.includes("{WEEK_EXPENSES}")?e=de(e,t,a):e.includes("{MONTH_EXPENSES}")?e=pe(e,t,a):e.includes("{DAY_INCOME}")?e=fe(e,t,a):e.includes("{YEAR_INCOME}")?e=Ee(e,t,a):e.includes("{WEEK_INCOME}")?e=ge(e,t,a):e.includes("{MONTH_INCOME}")?e=he(e,t,a):e.includes("{All_GROUPS}")?e=be(e,t,a):e.includes("{CATEGORY_NAME}")?e=be(e,t,a):e}(e.text,t,a,o);Object(le.addResponseMessage)(n)})}).catch(function(e){Object(le.toggleMsgLoader)(),console.log(e)})};return r.a.createElement(n.Fragment,null,c.token?r.a.createElement(le.Widget,{handleNewUserMessage:l,title:"Budget Buddy",subtitle:"",profileAvatar:se.a}):null)},Ne=(a(709),function(){var e=v._currentValue,t=Object(n.useState)(!1),a=Object(g.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(!1),i=Object(g.a)(l,2),s=i[0],m=i[1],u=Object(n.useState)(!1),d=Object(g.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)(!1),h=Object(g.a)(E,2),N=h[0],x=h[1],Y=Object(n.useState)([]),w=Object(g.a)(Y,2),O=w[0],S=w[1],M=Object(n.useState)(""),F=Object(g.a)(M,2),j=F[0],k=F[1],C=Object(n.useState)(),A=Object(g.a)(C,2),T=A[0],B=A[1],I=Object(n.useState)(!1),z=Object(g.a)(I,2),U=z[0],J=z[1],L=Object(n.useState)([]),H=Object(g.a)(L,2),G=H[0],V=H[1],K=Object(n.useState)([]),X=Object(g.a)(K,2),W=X[0],ee=X[1],ae=Object(n.useState)([]),ne=Object(g.a)(ae,2),re=ne[0],oe=ne[1],le=Object(n.useState)({}),ie=Object(g.a)(le,2),se=ie[0],me=ie[1],ue=function(e,t,a){f(e),k(t),B(a)};Object(n.useEffect)(function(){Ye()},[]);var de=function(){c(!0);return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                settingsData {\n                    _id\n                    dailyBudget\n                    weeklyBudget\n                    monthlyBudget\n                    categories\n                    members\n                    currency\n                    creatorId\n                    creatorEmail\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(c(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return console.log(e.data),V.apply(void 0,Object(q.a)(G).concat([e.data.settingsData])),e.data.settingsData}).catch(function(e){return c(!1),ue(!0,"Error",e),console.log(e),e})},pe=function(t){c(!0);var a={query:"\n              query {\n                expenses {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                  }\n              }",allUsers:t};return fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(c(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return console.log(e.data.expenses),e.data.expenses=ve(e.data.expenses,"Expense"),c(!1),e.data.expenses}).catch(function(e){return c(!1),console.log(e),e})},fe=function(t){c(!0);var a={query:"\n              query {\n                incomes {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                  }\n              }",allUsers:t};return fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(c(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return e.data.incomes=ve(e.data.incomes,"Income"),console.log(e.data.incomes),c(!1),e.data.incomes}).catch(function(e){return c(!1),console.log(e),e})},Ee=function(t,a){c(!0);var n={query:"\n            query ExpensesFilter($dateFrom: String!, $dateTo: String!){\n                expensesFilter(dateFrom: $dateFrom, dateTo: $dateTo) {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                }\n            }",variables:{dateFrom:he(t.dateFrom),dateTo:he(t.dateTo)},allUsers:a};return fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw c(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.expensesFilter=ve(e.data.expensesFilter,"Expense"),c(!1),e.data.expensesFilter}).catch(function(e){throw c(!1),console.log(e),ue(!0,"Error",e),e})},ge=function(t,a){c(!0);var n={query:"\n            query IncomesFilter($dateFrom: String!, $dateTo: String!){\n                incomesFilter(dateFrom: $dateFrom, dateTo: $dateTo) {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                }\n            }",variables:{dateFrom:he(t.dateFrom),dateTo:he(t.dateTo)},allUsers:a};return fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw c(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.incomesFilter=ve(e.data.incomesFilter,"Income"),c(!1),e.data.incomesFilter}).catch(function(e){throw c(!1),console.log(e),ue(!0,"Error",e),e})},he=function(e){return JSON.stringify(P()(e).valueOf())},be=function(e){return e.sort(function(e,t){return e=P()(e.createdAt,"x").format("DD-MM-YYYY").split("-").reverse().join(""),t=P()(t.createdAt,"x").format("DD-MM-YYYY").split("-").reverse().join(""),e.localeCompare(t)}),e},ve=function(e,t){return e.forEach(function(e){e.tag=t}),e},Ne=function(e,t){var a=[];return t.map(function(t){t._id===e._id?(t=e,a.push(t)):a.push(t)}),a=be(a)},xe=function(e,t){var a=[];return t.forEach(function(t){t._id!==e._id&&a.push(t)}),a=be(a)},Ye=function(){var t=Object(_.a)($.a.mark(function t(a){var n,r,o,l,i,s,m,u,d,p,f,E;return $.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a&&"All"!==a){t.next=29;break}if(n=[],G.length){t.next=8;break}return t.next=5,de();case 5:n=t.sent,t.next=9;break;case 8:n=G;case 9:return r=[],n.forEach(function(e){r.push(e.creatorId)}),t.next=13,pe(r);case 13:return o=t.sent,t.next=16,fe(r);case 16:if(l=t.sent,i=o.concat(l),i=be(i),S(i),re.length){t.next=27;break}return t.next=23,fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                userData {\n                    _id\n                    email\n                    name\n                    surname\n                    createdAt\n                    updatedAt\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(c(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return e.data.userData[0]}).catch(function(e){return console.log(e),e});case 23:s=t.sent,oe(i),ee(n),me(s);case 27:t.next=62;break;case 29:if("Expense"!==a){t.next=47;break}if(m=[],G.length){t.next=37;break}return t.next=34,de();case 34:m=t.sent,t.next=38;break;case 37:m=G;case 38:return u=[],m.forEach(function(e){u.push(e.creatorId)}),t.next=42,pe(u);case 42:d=t.sent,d=be(d),S(d),t.next=62;break;case 47:if(p=[],G.length){t.next=54;break}return t.next=51,de();case 51:p=t.sent,t.next=55;break;case 54:p=G;case 55:return f=[],p.forEach(function(e){f.push(e.creatorId)}),t.next=59,fe(f);case 59:E=t.sent,E=be(E),S(E);case 62:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),we=function(){var e=Object(_.a)($.a.mark(function e(t){var a,n,r,o,c,l;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],"All"!==t.tag){e.next=14;break}return G.forEach(function(e){a.push(e.creatorId)}),e.next=5,Ee(t,a);case 5:return n=e.sent,e.next=8,ge(t,a);case 8:r=e.sent,o=n.concat(r),o=be(o),S(o),e.next=29;break;case 14:if("Expense"!==t.tag){e.next=23;break}return G.forEach(function(e){a.push(e.creatorId)}),e.next=18,Ee(t,a);case 18:c=e.sent,c=be(c),S(c),e.next=29;break;case 23:return G.forEach(function(e){a.push(e.creatorId)}),e.next=26,ge(t,a);case 26:l=e.sent,l=be(l),S(l);case 29:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(R.Provider,{value:{currentUser:e,allExpenses:O,setAllExpenses:S,removeExpense:function(t){var a={query:""};a="Expense"===t.tag?{query:"\n                  mutation RemoveExpense($id: ID!) {\n                    removeExpense(expenseId: $id) {\n                    _id\n                     title\n                    }\n                  }\n                ",variables:{id:t._id}}:{query:"\n                  mutation RemoveIncome($id: ID!) {\n                    removeIncome(incomeId: $id) {\n                    _id\n                     title\n                    }\n                  }\n                ",variables:{id:t._id}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){var t=[],a=[];e.data.removeExpense?(t=xe(e.data.removeExpense,O),a=xe(e.data.removeExpense,re),ue(!0,"Confirmation","Expense was deleted")):(t=xe(e.data.removeIncome,O),a=xe(e.data.removeIncome,re),ue(!0,"Confirmation","Income was deleted")),S(t),oe(a)}).catch(function(e){return console.log(e),e})},isLoading:o,getAllOnFilter:we,getAll:Ye,showMore:U,setShowMore:J,submitExpenseFromImport:function(t){var a={query:""},n=he(t.createdAt);return a="Expense"===t.tag?{query:"\n                          mutation CreateExpense($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createExpense(expenseInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}}:{query:"\n                          mutation CreateIncome($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createIncome(incomeInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.createExpense?(e.data.createExpense.tag="Expense",e.data.createExpense):(e.data.createIncome.tag="Income",e.data.createIncome)}).catch(function(e){throw console.log(e),ue(!0,"Error",e),e})},settings:G,settingsForBot:W,allExpensesForBot:re,user:se,updateExpense:function(t){c(!0);var a={query:""};t.date=he(t.date),t.updateDate=he(t.updateDate),a="Expense"===t.tag?{query:"\n                          mutation UpdateExpense($id: ID!, $title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            updateExpense(expenseId: $id, expenseInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{id:t.id,title:t.title,description:t.description,price:t.price,group:t.group,createdAt:t.date,updatedAt:t.updateDate}}:{query:"\n                          mutation UpdateIncome($id: ID!, $title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            updateIncome(incomeId: $id, incomeInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{id:t.id,title:t.title,description:t.description,price:t.price,group:t.group,createdAt:t.date,updatedAt:t.updateDate}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw c(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;var t=[],a=[];e.data.updateExpense?(e.data.updateExpense.tag="Expense",console.log(e.data.updateExpense),t=Ne(e.data.updateExpense,O),a=Ne(e.data.updateExpense,re),ue(!0,"Confirmation","Expense was updated")):(e.data.updateIncome.tag="Income",console.log(e.data.updateIncome),t=Ne(e.data.updateIncome,O),a=Ne(e.data.updateIncome,re),ue(!0,"Confirmation","Income was updated")),S(t),oe(a),c(!1)}).catch(function(e){throw c(!1),console.log(e),ue(!0,"Error",e),e})}}},r.a.createElement(y.Provider,{value:{showInfoModal:p,setShowInfoModal:f,modalHeader:j,modalText:T,showModal:s,submitExpense:function(t){var a={query:""};c(!0);var n=he(t.date);a="Expense"===t.tag?{query:"\n                          mutation CreateExpense($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createExpense(expenseInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}}:{query:"\n                          mutation CreateIncome($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createIncome(incomeInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw c(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;c(!1),m(!1),e.data.createExpense?(ue(!0,"Confirmation","Expense was created"),e.data.createExpense.tag="Expense",S([].concat(Object(q.a)(O),[e.data.createExpense])),oe([].concat(Object(q.a)(re),[e.data.createExpense]))):(ue(!0,"Confirmation","Income was created"),e.data.createIncome.tag="Income",S([].concat(Object(q.a)(O),[e.data.createIncome])),oe([].concat(Object(q.a)(re),[e.data.createIncome])))}).catch(function(e){throw c(!1),m(!1),console.log(e),ue(!0,"Error",e),e})},setShowModal:m,modalInfo:ue,showImportModal:N,setShowIportModal:x}},r.a.createElement(Z,null),r.a.createElement(n.Fragment,null,se._id?r.a.createElement(ye,null):null),r.a.createElement(te,null),o?r.a.createElement(b,null):r.a.createElement(n.Fragment,null,r.a.createElement(D,null),r.a.createElement(ce,null),r.a.createElement("div",{className:"center"},r.a.createElement(Q,null)))))}),xe=a(93),Ye=a(738),we=a(734),Oe=(a(711),function(){var e=Object(n.useState)({newCategorie:!1,newMember:!1,emailValidation:!1}),t=Object(g.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)([]),l=Object(g.a)(c,2),i=l[0],s=l[1],m=Object(n.useState)([]),u=Object(g.a)(m,2),d=u[0],p=u[1],f=v._currentValue,E=Object(n.useState)({}),h=Object(g.a)(E,2),Y=h[0],w=h[1],O=Object(n.useState)({}),S=Object(g.a)(O,2),M=S[0],F=S[1],k=Object(n.useState)({}),C=Object(g.a)(k,2),A=C[0],T=C[1],B=Object(n.useState)(!1),I=Object(g.a)(B,2),$=I[0],_=I[1],z=Object(n.useState)(!1),R=Object(g.a)(z,2),U=R[0],J=R[1],H=Object(n.useState)(""),G=Object(g.a)(H,2),V=G[0],K=G[1],X=Object(n.useState)(),W=Object(g.a)(X,2),Q=W[0],Z=W[1],ee=function(e,t,a){J(e),K(t),Z(a)},te=Object(n.useState)("systemSettings"),ae=Object(g.a)(te,2),ne=ae[0],re=ae[1];Object(n.useEffect)(function(){oe(),ce()},[]);var oe=function(){_(!0);return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                userData {\n                    _id\n                    email\n                    name\n                    surname\n                    createdAt\n                    updatedAt\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}}).then(function(e){if(_(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return w(e.data.userData[0]),F(e.data.userData[0]),_(!1),e.data.userData[0]}).catch(function(e){return _(!1),console.log(e),e})},ce=function(){_(!0);return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                settingsData {\n                    _id\n                    dailyBudget\n                    weeklyBudget\n                    monthlyBudget\n                    categories\n                    members\n                    currency\n                    creatorEmail\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}}).then(function(e){if(_(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){var t=[];T(e.data.settingsData[0]),s(e.data.settingsData[0].categories.split(";")),e.data.settingsData[0].members.split(";").forEach(function(e){e.length&&t.push(e)}),p(t)}).catch(function(e){return _(!1),ee(!0,"Error",e),console.log(e),e})},le=function(e){var t=e.target.value;return 1===t.length&&"."===t&&(t=t.slice(0,-1)),2===t.length&&"00"===t&&(t=t.slice(0,-1)),t.split(".").length-1>1&&(t=t.slice(0,-1)),(t=t.indexOf(".")>=0?t.substr(0,t.indexOf("."))+t.substr(t.indexOf("."),3):t).replace(/[^\d.-]/g,"").replace("-","")};return $?r.a.createElement(b,null):r.a.createElement(n.Fragment,null,r.a.createElement(y.Provider,{value:{showInfoModal:U,setShowInfoModal:J,modalHeader:V,modalText:Q,modalInfo:ee}},r.a.createElement(D,null),r.a.createElement(Ye.a,{id:"settings-tab",activeKey:ne,onSelect:function(e){return re(e)}},r.a.createElement(we.a,{eventKey:"userSettings",title:"userSettings"===ne?r.a.createElement("span",{style:{color:"#ea97c4"}},r.a.createElement(j.e,{size:20}),"\xa0 User "):r.a.createElement("span",null,r.a.createElement(j.e,{size:20,color:"#aeaeae"}),"\xa0 User ")},r.a.createElement(N.d,{enableReinitialize:!0,initialValues:{firstName:M.name||"",lastName:M.surname||"",email:M.email||""},validationSchema:x.object().shape({firstName:x.string().required("First Name is required"),lastName:x.string().required("Last Name is required"),email:x.string().email("Email is invalid").required("Email is required")}),onSubmit:function(e){!function(e){e.updatedAt=JSON.stringify(P()(new Date).valueOf()),_(!0);var t={query:"\n\n                              mutation UpdateUser($id: ID!, $name: String!, $surname: String!, $email: String!, $updatedAt: String!) {\n                                updateUser(userId: $id, name: $name, surname: $surname, email: $email, updatedAt: $updatedAt) {\n                                    name\n                                    surname\n                                    email\n                                  }\n                              }\n                            ",variables:{id:Y._id,name:e.firstName,surname:e.lastName,email:e.email,updatedAt:e.updatedAt}};fetch("/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}}).then(function(e){if(!e.ok)throw _(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;console.log(e),F(e.data.updateUser),ee(!0,"Confirmation","User was updated"),_(!1)}).catch(function(e){throw _(!1),console.log(e),ee(!0,"Error",e),e})}(e)},render:function(e){var t=e.errors,a=e.touched;return r.a.createElement(N.c,{className:"settings-form",id:"formContentUserSettings"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h4",null,"User settings")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"firstName"},"First Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(N.b,{placeholder:"First name",name:"firstName",type:"text",className:"form-control"+(t.firstName&&a.firstName?" is-invalid":"")}),r.a.createElement(N.a,{name:"firstName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"lastName"},"Last Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(N.b,{placeholder:"Last name",name:"lastName",type:"text",className:"form-control"+(t.lastName&&a.lastName?" is-invalid":"")}),r.a.createElement(N.a,{name:"lastName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(N.b,{placeholder:"Email",name:"email",type:"text",className:"form-control"+(t.email&&a.email?" is-invalid":"")}),r.a.createElement(N.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn_main update-btn"},"Update")))}})),r.a.createElement(we.a,{eventKey:"systemSettings",title:"systemSettings"===ne?r.a.createElement("span",{style:{color:"#ea97c4"}},r.a.createElement(j.c,{size:20}),"\xa0 System "):r.a.createElement("span",null,r.a.createElement(j.c,{size:20,color:"#aeaeae"}),"\xa0 System ")},r.a.createElement(N.d,{validateOnChange:!0,enableReinitialize:!0,initialValues:{dailyBudget:A.dailyBudget||"",weeklyBudget:A.weeklyBudget||"",monthlyBudget:A.monthlyBudget||"",categories:A.categories||"",newCategorie:"",newMember:"",members:A.members||"",currency:A.currency||""},validationSchema:x.object().shape({dailyBudget:x.number(),weeklyBudget:x.number(),monthlyBudget:x.number(),categories:x.string(),newCategorie:x.string(),memebers:x.string().email("Email is invalid"),newMember:x.string().email("Email is invalid"),currency:x.string().required("Currency is required")}),onSubmit:function(e){!function(e){_(!0);var t="",a="";i.forEach(function(e,t){i.length!==t+1?a+="".concat(e,";"):a+=e}),d.length&&d.forEach(function(e,a){d.length!==a+1?t+="".concat(e,";"):t+=e});var n={query:"\n\n                              mutation UpdateSettings($id: ID!, $dailyBudget: String!, $weeklyBudget: String!, $monthlyBudget: String!, $categories: String!, $members: String!, $currency: String!) {\n                                updateSettings(settingsId: $id, dailyBudget: $dailyBudget, weeklyBudget: $weeklyBudget, monthlyBudget: $monthlyBudget, categories: $categories, members: $members, currency: $currency) {\n                                    _id\n                                    dailyBudget\n                                    weeklyBudget\n                                    monthlyBudget\n                                    categories\n                                    members\n                                    currency\n                                  }\n                              }\n                            ",variables:{id:A._id,dailyBudget:e.dailyBudget,weeklyBudget:e.weeklyBudget,monthlyBudget:e.monthlyBudget,categories:a,members:t,currency:e.currency}};fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}}).then(function(e){if(!e.ok)throw _(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;var t=[];T(e.data.updateSettings),s(e.data.updateSettings.categories.split(";")),e.data.updateSettings.members.split(";").forEach(function(e){e.length&&t.push(e)}),p(t),_(!1),ee(!0,"Confirmation","Settings was updated")}).catch(function(e){throw _(!1),console.log(e),ee(!0,"Error",e),e})}(e)},render:function(e){var t=e.errors,n=e.values,c=e.touched,l=e.handleChange,m=e.setFieldValue,u=e.handleBlur;e.validateField;return r.a.createElement(N.c,{id:"formContentSystemSettings"},r.a.createElement("div",{className:"form-group row col-sm-12",style:{paddingTop:"25px"}},r.a.createElement("div",{className:"col-sm-4 "},r.a.createElement("div",{className:"p-2 settings-form"},r.a.createElement("h4",null,"Budget settings")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-5",htmlFor:"title"},"Daily budget"),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("div",{className:"input-group "},r.a.createElement("input",{placeholder:"0.00",name:"dailyBudget",onChange:function(e){m("dailyBudget",le(e))},value:n.dailyBudget,className:"form-control"+(t.dailyBudget&&c.dailyBudget?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},"GBD"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\xa3")):"Dollar"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"$")):r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\u20ac"))),r.a.createElement(N.a,{name:"dailyBudget",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-5",htmlFor:"title"},"Weekly budget"),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("input",{placeholder:"0.00",name:"weeklyBudget",onChange:function(e){m("weeklyBudget",le(e))},value:n.weeklyBudget,className:"form-control"+(t.weeklyBudget&&c.weeklyBudget?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},"GBD"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\xa3")):"Dollar"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"$")):r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\u20ac"))),r.a.createElement(N.a,{name:"weeklyBudget",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-5",htmlFor:"title"},"Monthly budget"),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("input",{placeholder:"0.00",name:"monthlyBudget",onChange:function(e){m("monthlyBudget",le(e))},value:n.monthlyBudget,className:"form-control"+(t.monthlyBudget&&c.monthlyBudget?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},"GBD"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\xa3")):"Dollar"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"$")):r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\u20ac"))),r.a.createElement(N.a,{name:"monthlyBudget",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-5",htmlFor:"title"},"Currency"),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("select",{name:"currency",onChange:l,onBlur:u,value:n.currency,className:"custom-select mr-sm-2 form-control"+(t.currency&&c.currency?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:""},"Select a currency"),r.a.createElement("option",{value:"Euro"},"Euro \u20ac"),r.a.createElement("option",{value:"Dollar"},"Dollar $"),r.a.createElement("option",{value:"GBD"},"Pound \xa3")),r.a.createElement(N.a,{name:"currency",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"col-sm-4 "},r.a.createElement("div",{className:"p-2 settings-form"},r.a.createElement("h4",null,"Categories settings")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4",htmlFor:"title"},"Add category"),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("input",{placeholder:"Category name",name:"newCategorie",onChange:function(e){var t;m("newCategorie",(t=e,a.newCategorie&&o(Object(xe.a)({},a,{newCategorie:!1})),t.target.value.replace(/[//|/;&$%@"<>()+{}.',=_~`!#^*/?]/g,"")))},value:n.newCategorie,className:"form-control col-sm-8 mr-1"+(a.newCategorie?" is-invalid":"")}),r.a.createElement("button",{type:"button",onClick:function(e){m("categories",function(e,t){if(void 0===e.target.value||!e.target.value.length)return o(Object(xe.a)({},a,{newCategorie:!0})),t;e.target.value=e.target.value.toLowerCase();var n=e.target.value.charAt(0).toUpperCase()+e.target.value.slice(1),r=!1;i.forEach(function(e){e===n&&(r=!0)}),r?ee(!0,"Error","This category already in the category list."):s([].concat(Object(q.a)(i),[n]))}(e,n.categories)),m("newCategorie","")},value:n.newCategorie,className:"col-sm-3 btn btn_main"},"Add"),r.a.createElement(N.a,{name:"newCategorie",component:"div",className:"invalid-feedback"}),a.newCategorie?r.a.createElement("div",{className:"invalid-feedback"}," Category field can't be empty"):null))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4",htmlFor:"title"},"All categories"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("ul",{className:"list-group col-sm-9"},i.map(function(e){return r.a.createElement("li",{className:"row",key:e},r.a.createElement("span",{className:"list-group-item list-item col-sm-12"},e,r.a.createElement("button",{className:"btn card_removeButton",type:"button",onClick:function(){return function(e){1===i.length?ee(!0,"Error","You can't delete all categories."):s(i.filter(function(t){return t!==e}))}(e)}},r.a.createElement("i",null,r.a.createElement(L.d,{size:20})))))}))))),r.a.createElement("div",{className:"col-sm-4 "},r.a.createElement("div",{className:"p-2 settings-form"},r.a.createElement("h4",null,"Family settings")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4",htmlFor:"title"},"Add member"),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("input",{placeholder:"Member email",name:"newMember",onChange:function(e){var t;m("newMember",(t=e,a.emailValidation&&o(Object(xe.a)({},a,{emailValidation:!1})),a.newMember&&o(Object(xe.a)({},a,{newMember:!1})),t.target.value.replace(/[//|/;&$%"<>()+{}',=~`!#^*/?]/g,"")))},value:n.newMember,className:"form-control col-sm-8 mr-1"+(a.newMember||a.emailValidation?" is-invalid":"")}),r.a.createElement("button",{type:"button",onClick:function(e){m("members",function(e,t,n){if(void 0===e.target.value||!e.target.value.length)return o(Object(xe.a)({},a,{newMember:!0,emailValidation:!1})),t;if(n.newMember)o(Object(xe.a)({},a,{emailValidation:!0}));else{var r=e.target.value.toLowerCase(),c=!1;d.forEach(function(e){e===r&&(c=!0)}),c?ee(!0,"Error","This member already in the members list."):p([].concat(Object(q.a)(d),[r]))}}(e,n.members,t)),m("newMember","")},value:n.newMember,className:"col-sm-3 btn btn_main"},"Add"),r.a.createElement(N.a,{name:"newMember",component:"div",className:"invalid-feedback"}),a.newMember?r.a.createElement("div",{className:"invalid-feedback"}," Member field can't be empty"):null,a.emailValidation?r.a.createElement("div",{className:"invalid-feedback"},"Email is invalid"):null))),d.length?r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4",htmlFor:"title"},"All members"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("ul",{className:"list-group col-sm-9"},d.map(function(e){return r.a.createElement("li",{className:"row",key:e},r.a.createElement("span",{className:"list-group-item list-item col-sm-12"},e,r.a.createElement("button",{className:"btn card_removeButton",type:"button",onClick:function(){return function(e){p(d.filter(function(t){return t!==e}))}(e)}},r.a.createElement("i",null,r.a.createElement(L.d,{size:20})))))})))):null)),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn_main update-btn"},"Update")))}})))))}),Se=r.a.createContext(),De=function(){var e=Object(n.useContext)(Se),t=e.getAllOnFilter,a=e.getAll,o=P()().format("MM/DD/YYYY"),c=P()().subtract(1,"months").format("MM/DD/YYYY"),l=Object(n.useState)(new Date(c)),i=Object(g.a)(l,2),s=i[0],m=i[1],u=Object(n.useState)(new Date(o)),d=Object(g.a)(u,2),p=d[0],f=d[1],E=function(e){return P()(e).format("MM/DD/YYYY")},h=function(e){var n={dateFrom:"",dateTo:""};switch(e){case"today":n={dateFrom:P()().format("MM/DD/YYYY"),dateTo:P()().format("MM/DD/YYYY")},t(n);break;case"week":n={dateFrom:P()().startOf("week").format("MM/DD/YYYY"),dateTo:P()().endOf("week").format("MM/DD/YYYY")},t(n);break;case"month":n={dateFrom:P()().startOf("month").format("MM/DD/YYYY"),dateTo:P()().endOf("month").format("MM/DD/YYYY")},t(n);break;case"year":n={dateFrom:P()().startOf("year").format("MM/DD/YYYY"),dateTo:P()().endOf("year").format("MM/DD/YYYY")},t(n);break;case"all":a();break;default:n={dateFrom:P()().startOf("month").format("MM/DD/YYYY"),dateTo:P()().endOf("month").format("MM/DD/YYYY")},t(n)}};return r.a.createElement(n.Fragment,null,r.a.createElement(N.d,{initialValues:{dateFrom:c,dateTo:o},validationSchema:x.object().shape({dateFrom:x.date().required("Date is required"),dateTo:x.date().required("Date is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,a=e.values,n=e.touched,o=e.setFieldValue;return e.handleChange,e.handleBlur,r.a.createElement(N.c,null,r.a.createElement("div",{className:"form-group row col-sm-12  justify-content-center mb-3"},r.a.createElement("button",{type:"button",className:" col-sm-2 btn btn_with_line",onClick:function(){h("today"),o("dateFrom",P()().format("MM/DD/YYYY")),o("dateTo",P()().format("MM/DD/YYYY")),m(P()()._d),f(P()()._d)}},"Today"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){h("week"),o("dateFrom",P()().startOf("week").format("MM/DD/YYYY")),o("dateTo",P()().endOf("week").format("MM/DD/YYYY")),m(P()().startOf("week")._d),f(P()().endOf("week")._d)}},"This week"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){h("month"),o("dateFrom",P()().startOf("month").format("MM/DD/YYYY")),o("dateTo",P()().endOf("month").format("MM/DD/YYYY")),m(P()().startOf("month")._d),f(P()().endOf("month")._d)}},"This month"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){h("year"),o("dateFrom",P()().startOf("year").format("MM/DD/YYYY")),o("dateTo",P()().endOf("year").format("MM/DD/YYYY")),m(P()().startOf("year")._d),f(P()().endOf("year")._d)}},"This year"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){return h("all")}},"All")),r.a.createElement("div",{className:"form-group row col-sm-12  justify-content-center mb-2"},r.a.createElement("label",{className:" col-form-label ml-4",htmlFor:"dateFrom"},"From:"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2 mr-sm-2 ml-3 mr-3"},r.a.createElement(J.a,{selected:s,startDate:s,endDate:p,className:"form-control not-round-right-corner"+(t.dateFrom&&n.dateFrom?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",null,a.dateFrom)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"dateFrom",placeholder:"Enter date",onChange:function(e){o("dateFrom",E(e)),m(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(L.b,{className:"",size:20}))))),r.a.createElement(N.a,{name:"dateTo",component:"div",className:"invalid-feedback"}),r.a.createElement("label",{className:"col-form-label ml-5 mr-3",htmlFor:"dateTo"},"To:"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement(J.a,{selected:p,startDate:s,endDate:p,className:"form-control not-round-right-corner"+(t.dateTo&&n.dateTo?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",null,a.dateTo)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"dateTo",placeholder:"Enter date",onChange:function(e){o("dateTo",E(e)),f(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(L.b,{className:"",size:20}))))),r.a.createElement(N.a,{name:"dateTo",component:"div",className:"invalid-feedback"}),r.a.createElement("div",{className:"float-right ml-5"},r.a.createElement("button",{type:"submit",className:"btn btn_main"},"Filter"))))}}))},Me=function(e){return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                settingsData {\n                    _id\n                    dailyBudget\n                    weeklyBudget\n                    monthlyBudget\n                    categories\n                    members\n                    currency\n                    creatorId\n                    creatorEmail\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return console.log(e.data),e.data.settingsData}).catch(function(e){return console.log(e),e})},Fe=function(e){return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                userData {\n                    _id\n                    email\n                    name\n                    surname\n                    createdAt\n                    updatedAt\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return e.data.userData[0]}).catch(function(e){return console.log(e),e})},je=function(e,t){var a={query:"\n              query {\n                expenses {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                  }\n              }",allUsers:e};return fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return console.log(e.data.expenses),e.data.expenses=$e(e.data.expenses,"Expense"),e.data.expenses}).catch(function(e){return console.log(e),e})},ke=function(e,t){var a={query:"\n              query {\n                incomes {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                  }\n              }",allUsers:e};return fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return e.data.incomes=$e(e.data.incomes,"Income"),console.log(e.data.incomes),e.data.incomes}).catch(function(e){return console.log(e),e})},Ce=function(e,t,a){var n={query:"\n            query ExpensesFilter($dateFrom: String!, $dateTo: String!){\n                expensesFilter(dateFrom: $dateFrom, dateTo: $dateTo) {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                }\n            }",variables:{dateFrom:Ie(e.dateFrom),dateTo:Ie(e.dateTo)},allUsers:t};return fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.token}}).then(function(e){if(!e.ok)throw e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.expensesFilter=$e(e.data.expensesFilter,"Expense"),e.data.expensesFilter}).catch(function(e){throw console.log(e),e})},Ae=function(e,t,a){var n={query:"\n            query IncomesFilter($dateFrom: String!, $dateTo: String!){\n                incomesFilter(dateFrom: $dateFrom, dateTo: $dateTo) {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                }\n            }",variables:{dateFrom:Ie(e.dateFrom),dateTo:Ie(e.dateTo)},allUsers:t};return fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.token}}).then(function(e){if(!e.ok)throw e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.incomesFilter=$e(e.data.incomesFilter,"Income"),e.data.incomesFilter}).catch(function(e){throw console.log(e),e})},Te=function(e){return e.sort(function(e,t){return e=P()(e.createdAt,"x").format("DD-MM-YYYY").split("-").reverse().join(""),t=P()(t.createdAt,"x").format("DD-MM-YYYY").split("-").reverse().join(""),e.localeCompare(t)}),e},Be=function(e){var t=e.length-1,a={dateFrom:P()(e[0].createdAt,"x").format("MM/DD/YYYY"),dateTo:P()(e[t].createdAt,"x").format("MM/DD/YYYY")};return{dateFrom:a.dateFrom,dateTo:a.dateTo}},Ie=function(e){return JSON.stringify(P()(e).valueOf())},$e=function(e,t){return e.forEach(function(e){e.tag=t}),e},_e=function(e){return"GBD"===e.currency?"\xa3":"Dollar"===e.currency?"$":"\u20ac"},qe=function(){var e=Object(n.useContext)(Se),t=e.allExpenses,a=e.totalExpenses,o=e.setTotalExpenses;Object(n.useEffect)(function(){c(t)},[t]);var c=function(e){var t={expenses:0,incomes:0,budget:0};e.forEach(function(e){"Expense"===e.tag?t.expenses+=parseFloat(e.price):"Income"===e.tag&&(t.incomes+=parseFloat(e.price))}),t.expenses=parseFloat(t.expenses.toFixed(2)),t.incomes=parseFloat(t.incomes.toFixed(2)),t.budget-=t.expenses,t.budget+=t.incomes,t.budget=parseFloat(t.budget.toFixed(2)),o(t)},l=[{name:"Expenses",value:a.expenses},{name:"Incomes",value:a.incomes}],i=Math.PI/180,s=["#F5A2A2","#C4DCA3"];return r.a.createElement(ee.k,{width:"100%",height:300},r.a.createElement(ee.i,null,r.a.createElement(ee.h,{data:l,labelLine:!1,label:function(e){var t=e.cx,a=e.cy,n=e.midAngle,o=e.innerRadius,c=e.outerRadius,l=e.percent,s=(e.index,o+.5*(c-o)),m=t+s*Math.cos(-n*i),u=a+s*Math.sin(-n*i);return r.a.createElement("text",{x:m,y:u,fill:"white",textAnchor:m>t?"start":"end",dominantBaseline:"central"},"".concat((100*l).toFixed(0),"%"))},outerRadius:"100%",fill:"#8884d8",dataKey:"value"},l.map(function(e,t){return r.a.createElement(ee.f,{key:"cell-".concat(t),fill:s[t%s.length]})})),r.a.createElement(ee.l,null)))},ze=a(64),Pe=function(){var e,t=Object(n.useContext)(Se).allExpenses;Object(n.useEffect)(function(){i(t)},[t]);var a=Object(n.useState)([]),o=Object(g.a)(a,2),c=o[0],l=o[1],i=function(e){var t=[];e.forEach(function(e){var a=!1;t.forEach(function(t){"Expense"===e.tag?e.group===t.group&&(a=!0,t.price+=parseFloat(e.price)):a=!0}),a||"Expense"!==e.tag||t.push({group:e.group,price:parseFloat(e.price)})}),l(t)},s=[];c.forEach(function(e){e.price=parseFloat(e.price.toFixed(2)),s.push({name:e.group,value:e.price})});var m=["#F5A2A2","#C4DCA3","#A3A6DC","#D1A3DC","#E8F57E","#AB7EF5","#7EDEF5","#B2C5DD","#B8DDB2","#E8D33B"];return r.a.createElement(ee.k,{width:"100%",height:300},r.a.createElement(ee.i,null,r.a.createElement(ee.h,(e={data:s,labelLine:!0,label:!0,outerRadius:"100%",fill:"#8884d8",dataKey:"value",innerRadius:50},Object(ze.a)(e,"outerRadius",80),Object(ze.a)(e,"paddingAngle",10),e),s.map(function(e,t){return r.a.createElement(ee.f,{key:"cell-".concat(t),fill:m[t%m.length]})})),r.a.createElement(ee.l,null)))},Re=function(){var e,t=Object(n.useContext)(Se).allExpenses;Object(n.useEffect)(function(){i(t)},[t]);var a=Object(n.useState)([]),o=Object(g.a)(a,2),c=o[0],l=o[1],i=function(e){var t=[];e.forEach(function(e){var a=!1;t.forEach(function(t){"Income"===e.tag?e.group===t.group&&(a=!0,t.price+=parseFloat(e.price)):a=!0}),a||"Income"!==e.tag||t.push({group:e.group,price:parseFloat(e.price)})}),l(t)},s=[];c.forEach(function(e){e.price=parseFloat(e.price.toFixed(2)),s.push({name:e.group,value:e.price})});var m=["#F5A2A2","#C4DCA3","#A3A6DC","#D1A3DC","#E8F57E","#AB7EF5","#7EDEF5","#B2C5DD","#B8DDB2","#E8D33B"];return r.a.createElement(ee.k,{width:"100%",height:300},r.a.createElement(ee.i,null,r.a.createElement(ee.h,(e={data:s,labelLine:!0,label:!0,outerRadius:"100%",fill:"#8884d8",dataKey:"value",innerRadius:50},Object(ze.a)(e,"outerRadius",80),Object(ze.a)(e,"paddingAngle",10),e),s.map(function(e,t){return r.a.createElement(ee.f,{key:"cell-".concat(t),fill:m[t%m.length]})})),r.a.createElement(ee.l,null)))},Ue=function(){var e=Object(n.useContext)(Se),t=e.allExpenses,a=e.dateFromFilter,o=e.settings,c=e.setDailyAverage,l=Object(n.useState)([]),i=Object(g.a)(l,2),s=i[0],m=i[1];Object(n.useEffect)(function(){d(t)},[t]);var u=[],d=function(e){var t=[],n=[];n=function(e,t){e=Ie(e),t=Ie(t);var a=[],n=e;for(a.push(P()(n,"x").format("MM/DD/YYYY"));n<t;)n=P()(n,"x").add("days",1).format("MM/DD/YYYY"),a.push(n),n=Ie(n);return a}(a.dateFrom,a.dateTo),e.forEach(function(e){if("Expense"===e.tag){var a=P()(e.createdAt,"x").format("MM/DD/YYYY");n.forEach(function(n){if(n===a){var r=!1;t.forEach(function(t){t.date===a&&(r=!0,t.value+=parseFloat(e.price))}),r||t.push({date:a,value:parseFloat(e.price)})}})}});var r=0;if(t.forEach(function(e){e.value=e.value.toFixed(2),r+=parseFloat(e.value),u.push({name:P()(e.date,"MM/DD/YYYY").format("DD/MM"),Expenses:parseFloat(e.value)})}),m(u),n.length){var o=(r/n.length).toFixed(2);c(o)}};return r.a.createElement(ee.k,{width:"100%",height:300},r.a.createElement(ee.d,{data:s,margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement(ee.e,{vertical:!1,horizontal:!1}),r.a.createElement(ee.m,{dataKey:"name"}),r.a.createElement(ee.n,null),r.a.createElement(ee.l,null),r.a.createElement(ee.g,null),r.a.createElement(ee.c,{dataKey:"Expenses",fill:"#A3A6DC"}),o[0].dailyBudget.length?r.a.createElement(ee.j,{y:o[0].dailyBudget,label:"Daily budget",stroke:"#F5A2A2"}):null,"}"))},Je=(a(715),function(){var e=v._currentValue,t=Object(n.useState)(!1),a=Object(g.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)([]),i=Object(g.a)(l,2),s=i[0],m=i[1],u=Object(n.useState)([]),d=Object(g.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)([]),h=Object(g.a)(E,2),y=(h[0],h[1]),N=Object(n.useState)([]),x=Object(g.a)(N,2),Y=x[0],w=x[1],O=Object(n.useState)({}),S=Object(g.a)(O,2),D=(S[0],S[1]),M=Object(n.useState)({}),F=Object(g.a)(M,2),j=F[0],k=F[1],C=Object(n.useState)(""),A=Object(g.a)(C,2),T=A[0],B=A[1],I=Object(n.useState)({}),q=Object(g.a)(I,2),z=q[0],R=q[1];Object(n.useEffect)(function(){var e={dateFrom:P()().startOf("month").format("MM/DD/YYYY"),dateTo:P()().endOf("month").format("MM/DD/YYYY")};J(e)},[]);var U=function(){var t=Object(_.a)($.a.mark(function t(){var a,n,r,o,l,i;return $.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c(!0),a=[],p.length){t.next=9;break}return t.next=5,Me(e);case 5:a=t.sent,f(a),t.next=10;break;case 9:a=p;case 10:return n=[],a.forEach(function(e){n.push(e.creatorId)}),t.next=14,je(n,e);case 14:return r=t.sent,t.next=17,ke(n,e);case 17:if(o=t.sent,l=r.concat(o),l=Te(l),k(Be(l)),m(l),c(!1),Y.length){t.next=30;break}return t.next=26,Fe(e);case 26:i=t.sent,w(l),y(a),D(i);case 30:case 31:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),J=function(){var t=Object(_.a)($.a.mark(function t(a){var n,r,o,l,i,s;return $.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(k(a),c(!0),n=[],p.length){t.next=10;break}return t.next=6,Me(e);case 6:n=t.sent,f(n),t.next=11;break;case 10:n=p;case 11:return r=[],n.forEach(function(e){r.push(e.creatorId)}),t.next=16,Ce(a,r,e);case 16:return o=t.sent,t.next=19,Ae(a,r,e);case 19:if(l=t.sent,i=o.concat(l),i=Te(i),m(i),c(!1),Y.length){t.next=31;break}return t.next=27,Fe(e);case 27:s=t.sent,w(i),y(n),D(s);case 31:case 32:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(Se.Provider,{value:{getAllOnFilter:J,getAll:U,allExpenses:s,totalExpenses:z,setTotalExpenses:R,dateFromFilter:j,settings:p,setDailyAverage:B}},r.a.createElement(n.Fragment,null,r.a.createElement(De,null),o?r.a.createElement(b,null):s.length?r.a.createElement("div",{className:"statistics-board"},r.a.createElement("div",{className:"statistics-card"},r.a.createElement("p",{className:"statistics-text"},r.a.createElement("li",null,"Total expenses: ",z.expenses,"\xa0",_e(p[0])),r.a.createElement("li",null,"Total incomes: ",z.incomes,"\xa0",_e(p[0])),r.a.createElement("li",null,"Total budget: ",z.budget,"\xa0",_e(p[0]))),r.a.createElement(qe,null)),r.a.createElement("div",{className:"statistics-card"},r.a.createElement("p",{className:"statistics-text"},"Expenses by categories: "),r.a.createElement(Pe,null)),r.a.createElement("div",{className:"statistics-card"},r.a.createElement("p",{className:"statistics-text"},"Incomes by categories:"),r.a.createElement(Re,null)),r.a.createElement("div",{className:"statistics-card-big"},r.a.createElement("p",{className:"statistics-text"},r.a.createElement("li",null,"Your average daily expenses are : ",T,"\xa0",_e(p[0])),p[0].dailyBudget.length?r.a.createElement("li",null,"Your daily budget is: ",p[0].dailyBudget," \xa0",_e(p[0]),"."):null),r.a.createElement(Ue,null))):r.a.createElement("div",{className:"warning-box",style:{marginTop:"5%"}},r.a.createElement("div",{className:"alert alert-danger",style:{marginBottom:"0px"},role:"alert"},"There are no data."))))}),Le=a(737),He=a(352),Ge=a(736),Ve=a(230),Ke=(a(717),function(){return r.a.createElement(v.Consumer,null,function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(Le.a,{bg:"dark",variant:"dark"},r.a.createElement(Le.a.Brand,{as:d.b,to:"/"},r.a.createElement(Ve.b,{size:40,className:"main-navigation__logo"}),"Budget planner"),r.a.createElement(He.a,{className:"main-navigation__items"},!e.token&&r.a.createElement("li",null,r.a.createElement(He.a.Link,{as:d.b,to:"/auth"},"Sign in")),e.token&&r.a.createElement(Ge.a,{alignRight:!0,title:r.a.createElement("span",null,r.a.createElement(L.e,{size:25})),id:"collasible-nav-dropdown"},r.a.createElement(Ge.a.Item,{as:d.b,to:"/settings"},"Settings"),r.a.createElement(Ge.a.Divider,null),r.a.createElement(Ge.a.Item,{onClick:e.logout},"Logout")),e.token&&r.a.createElement(Ge.a,{alignRight:!0,title:r.a.createElement("span",null,r.a.createElement(Ve.a,{size:25})),id:"collasible-nav-dropdown"},r.a.createElement(Ge.a.Item,{as:d.b,to:"/expenses"},"Expenses"),r.a.createElement(Ge.a.Item,{as:d.b,to:"/statistics"},"Statistics")))))})}),Xe=(a(720),new f.a({uri:"/graphql"})),We=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={token:null,userId:null},a.login=function(e,t){a.setState({token:e,userId:t})},a.logout=function(){fetch("/removeCookie",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){console.log(e.response.message)}).catch(function(e){console.log(e)}),a.setState({token:null,userId:null})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{client:Xe},r.a.createElement(d.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(v.Provider,{value:{token:this.state.token,userId:this.state.userId,login:this.login,logout:this.logout}},r.a.createElement(Ke,null),r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/uploadfiles",component:B}),!this.state.token&&r.a.createElement(p.b,{path:"/auth",component:M}),!this.state.token&&r.a.createElement(p.a,{to:"/auth",exact:!0}),this.state.token&&r.a.createElement(p.a,{from:"/auth",to:"/expenses",exact:!0}),this.state.token&&r.a.createElement(p.a,{from:"/",to:"/expenses",exact:!0}),this.state.token&&r.a.createElement(p.b,{path:"/expenses",component:Ne}),this.state.token&&r.a.createElement(p.b,{path:"/settings",component:Oe}),this.state.token&&r.a.createElement(p.b,{path:"/statistics",component:Je}))))))}}]),t}(n.Component);c.a.render(r.a.createElement(We,null),document.getElementById("root"))}},[[376,2,1]]]);
//# sourceMappingURL=main.e73260ed.chunk.js.map