(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e,t,a){},236:function(e,t,a){},269:function(e,t,a){e.exports=a(478)},276:function(e,t,a){},278:function(e,t,a){},430:function(e,t,a){},444:function(e,t,a){},446:function(e,t,a){},448:function(e,t,a){},450:function(e,t,a){},452:function(e,t,a){},461:function(e,t,a){},463:function(e,t,a){},465:function(e,t,a){},473:function(e,t,a){},478:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(21),l=a.n(o),i=(a(274),a(71)),c=a(72),s=a(82),m=a(73),d=a(84),u=a(490),p=a(492),f=a(493),E=a(491),h=a(266),b=a(75),v=a(14),g=(a(276),a(278),function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"cssload-inner cssload-one"}),r.a.createElement("div",{className:"cssload-inner cssload-two"}),r.a.createElement("div",{className:"cssload-inner cssload-three"}))}),N=r.a.createContext({token:null,userId:null,login:function(e,t){},logout:function(){}}),w=r.a.createContext(),y=a(13),k=a(17),S=function(){var e=Object(n.useContext)(N),t=e.submitHandler,a=e.switchModeHandler;return r.a.createElement(y.d,{initialValues:{firstName:"",lastName:"",email:"",password:"",confirmPassword:""},validationSchema:k.object().shape({firstName:k.string().required("First Name is required"),lastName:k.string().required("Last Name is required"),email:k.string().email("Email is invalid").required("Email is required"),password:k.string().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:k.string().oneOf([k.ref("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,n=(e.status,e.touched);return r.a.createElement(y.c,{className:"auth-form",id:"formContentSignUp"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h4",null,"Create account")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"firstName"},"First Name"),r.a.createElement("div",{className:"col-sm-8 col-form-label"},r.a.createElement(y.b,{placeholder:"Firs name",name:"firstName",type:"text",className:"form-control"+(t.firstName&&n.firstName?" is-invalid":"")}),r.a.createElement(y.a,{name:"firstName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"lastName"},"Last Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(y.b,{placeholder:"Last name",name:"lastName",type:"text",className:"form-control"+(t.lastName&&n.lastName?" is-invalid":"")}),r.a.createElement(y.a,{name:"lastName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(y.b,{placeholder:"Email",name:"email",type:"text",className:"form-control"+(t.email&&n.email?" is-invalid":"")}),r.a.createElement(y.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(y.b,{placeholder:"Password",name:"password",type:"password",className:"form-control"+(t.password&&n.password?" is-invalid":"")}),r.a.createElement(y.a,{name:"password",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"confirmPassword"},"Confirm Password"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(y.b,{placeholder:"Confirm",name:"confirmPassword",type:"password",className:"form-control"+(t.confirmPassword&&n.confirmPassword?" is-invalid":"")}),r.a.createElement(y.a,{name:"confirmPassword",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Register"),r.a.createElement("button",{onClick:a,type:"button",className:"btn btn-secondary mr-2"},"Sign in")))}})},x=function(){var e=Object(n.useContext)(N),t=e.submitHandler,a=e.switchModeHandler;return r.a.createElement(y.d,{initialValues:{email:"",password:""},validationSchema:k.object().shape({email:k.string().email("Email is invalid").required("Email is required"),password:k.string().required("Password is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,n=(e.status,e.touched);return r.a.createElement(y.c,{className:"auth-form",id:"formContentSignIn"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h4",null,"Sign in")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(y.b,{placeholder:"Email",name:"email",type:"text",className:"form-control"+(t.email&&n.email?" is-invalid":"")}),r.a.createElement(y.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(y.b,{placeholder:"Password",name:"password",type:"password",className:"form-control"+(t.password&&n.password?" is-invalid":"")}),r.a.createElement(y.a,{name:"password",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-actions"},r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Submit"),r.a.createElement("button",{onClick:a,type:"button",className:"btn btn-secondary mr-2"},"Sign up")))}})},O=a(486),C=a(429),j=(a(163),function(){var e=Object(n.useContext)(w),t=e.modalHeader,a=e.modalText,o=e.showInfoModal,l=e.setShowInfoModal,i=function(){return l(!1)};return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:o,onHide:i},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,t)),r.a.createElement(O.a.Body,null,a),r.a.createElement(O.a.Footer,null,r.a.createElement(C.a,{variant:"secondary",onClick:i},"Ok"))))}),F=function(){var e=Object(n.useState)(!1),t=Object(v.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(!1),i=Object(v.a)(l,2),c=i[0],s=i[1],m=Object(n.useState)(!1),d=Object(v.a)(m,2),u=d[0],p=d[1],f=Object(n.useState)(""),E=Object(v.a)(f,2),h=E[0],b=E[1],y=Object(n.useState)(),k=Object(v.a)(y,2),O=k[0],C=k[1];Object(n.useEffect)(function(){$()},[]);var F=function(e,t,a){p(e),b(t),C(a)},T=Object(n.useContext)(N).login,A=function(){return o(!a)},$=function(){fetch("/cookie",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){T(e.response.token,e.response.userId)}).catch(function(e){console.log("There is no cookie!")})};return r.a.createElement(w.Provider,{value:{modalHeader:h,modalText:O,showInfoModal:u,setShowInfoModal:p}},r.a.createElement(N.Provider,{value:{submitHandler:function(e){var t=JSON.stringify((new Date).getTime());s(!0);var n={query:"\n              query Login($email: String!, $password: String!) {\n                login(email: $email, password: $password) {\n                  userId\n                  token\n                }\n              }\n            ",variables:{email:e.email,password:e.password}};a&&(n={query:"\n            mutation CreateUser($email: String!, $password: String!, $name: String!, $surname: String!, $createdAt: String!, $updatedAt: String!) {\n              createUser(userInput: {email: $email, password: $password, name: $name, surname: $surname, createdAt: $createdAt, updatedAt: $updatedAt}) {\n                _id\n                email\n              }\n            }\n          ",variables:{email:e.email,password:e.password,name:e.firstName,surname:e.lastName,createdAt:t,updatedAt:t}}),fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(e){if(!e.ok)throw s(!1),e.statusText;return e.json()}).then(function(t){s(!1),t.data.login?T(t.data.login.token,t.data.login.userId):(F(!0,"Confirmation","Hi ".concat(e.firstName," ").concat(e.lastName,", your account was created. Now You can sign in.")),A())}).catch(function(e){throw s(!1),F(!0,"Oops!","Your email or password is incorect."),e})},switchModeHandler:A}},r.a.createElement(j,null),c?r.a.createElement(g,null):r.a.createElement(n.Fragment,null,a?r.a.createElement(S,null):r.a.createElement(x,null))))},T=(a(430),function(e){return r.a.createElement("ul",{className:"bookings__list"},e.bookings.map(function(t){return r.a.createElement("li",{key:t._id,className:"bookings__item"},r.a.createElement("div",{className:"bookings__item-data"},t.event.title," -"," ",new Date(t.createdAt).toLocaleDateString()),r.a.createElement("div",{className:"bookings__item-actions"},r.a.createElement("button",{className:"btn",onClick:e.onDelete.bind(void 0,t._id)},"Cancel")))}))}),A=a(62),$=a(241),_={Cheap:{min:0,max:100},Normal:{min:100,max:200},Expensive:{min:200,max:1e7}},D=function(e){var t={labels:[],datasets:[]},a=[],n=function(n){var r=e.bookings.reduce(function(e,t){return t.event.price>_[n].min&&t.event.price<_[n].max?e+1:e},0);a.push(r),t.labels.push(n),t.datasets.push({fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:a}),(a=Object(A.a)(a))[a.length-1]=0};for(var o in _)n(o);return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement($.Bar,{data:t}))},I=(a(444),function(e){return r.a.createElement("div",{className:"bookings-control"},r.a.createElement("button",{className:"list"===e.activeOutputType?"active":"",onClick:e.onChange.bind(void 0,"list")},"List"),r.a.createElement("button",{className:"chart"===e.activeOutputType?"active":"",onClick:e.onChange.bind(void 0,"chart")},"Chart"))}),Y=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!1,bookings:[],outputType:"list"},a.fetchBookings=function(){a.setState({isLoading:!0});fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify({query:"\n          query {\n            bookings {\n              _id\n             createdAt\n             event {\n               _id\n               title\n               date\n               price\n             }\n            }\n          }\n        "}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.context.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){var t=e.data.bookings;a.setState({bookings:t,isLoading:!1})}).catch(function(e){console.log(e),a.setState({isLoading:!1})})},a.deleteBookingHandler=function(e){a.setState({isLoading:!0});var t={query:"\n          mutation CancelBooking($id: ID!) {\n            cancelBooking(bookingId: $id) {\n            _id\n             title\n            }\n          }\n        ",variables:{id:e}};fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.context.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(t){a.setState(function(t){return{bookings:t.bookings.filter(function(t){return t._id!==e}),isLoading:!1}})}).catch(function(e){console.log(e),a.setState({isLoading:!1})})},a.changeOutputTypeHandler=function(e){"list"===e?a.setState({outputType:"list"}):a.setState({outputType:"chart"})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchBookings()}},{key:"render",value:function(){var e=r.a.createElement(g,null);return this.state.isLoading||(e=r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{activeOutputType:this.state.outputType,onChange:this.changeOutputTypeHandler}),r.a.createElement("div",null,"list"===this.state.outputType?r.a.createElement(T,{bookings:this.state.bookings,onDelete:this.deleteBookingHandler}):r.a.createElement(D,{bookings:this.state.bookings})))),r.a.createElement(r.a.Fragment,null,e)}}]),t}(n.Component);Y.contextType=N;var M=Y,q=(a(446),function(){return r.a.createElement("div",{className:"backdrop"})}),P=(a(448),function(e){return r.a.createElement("li",{key:e.eventId,className:"events__list-item"},r.a.createElement("div",null,r.a.createElement("h1",null,e.title),r.a.createElement("h2",null,"$",e.price," - ",new Date(e.date).toLocaleDateString())),r.a.createElement("div",null,e.userId===e.creatorId?r.a.createElement("p",null,"Your the owner of this event."):r.a.createElement("button",{className:"btn",onClick:e.onDetail.bind(void 0,e.eventId)},"View Details")))}),B=(a(450),function(e){var t=e.events.map(function(t){return r.a.createElement(P,{key:t._id,eventId:t._id,title:t.title,price:t.price,date:t.date,userId:e.authUserId,creatorId:t.creator._id,onDetail:e.onViewDetail})});return r.a.createElement("ul",{className:"event__list"},t)}),H=(a(452),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={creating:!1,events:[],isLoading:!1,selectedEvent:null},a.isActive=!0,a.startCreateEventHandler=function(){a.setState({creating:!0})},a.modalConfirmHandler=function(){a.setState({creating:!1});var e=a.titleElRef.current.value,t=+a.priceElRef.current.value,n=a.dateElRef.current.value,r=a.descriptionElRef.current.value;if(!(0===e.trim().length||t<=0||0===n.trim().length||0===r.trim().length)){var o={title:e,price:t,date:n,description:r};console.log(o);var l={query:"\n          mutation CreateEvent($title: String!, $desc: String!, $price: Float!, $date: String!) {\n            createEvent(eventInput: {title: $title, description: $desc, price: $price, date: $date}) {\n              _id\n              title\n              description\n              date\n              price\n            }\n          }\n        ",variables:{title:e,desc:r,price:t,date:n}},i=a.context.token;fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+i}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){a.setState(function(t){var n=Object(A.a)(t.events);return n.push({_id:e.data.createEvent._id,title:e.data.createEvent.title,description:e.data.createEvent.description,date:e.data.createEvent.date,price:e.data.createEvent.price,creator:{_id:a.context.userId}}),{events:n}})}).catch(function(e){console.log(e)})}},a.modalCancelHandler=function(){a.setState({creating:!1,selectedEvent:null})},a.showDetailHandler=function(e){a.setState(function(t){return{selectedEvent:t.events.find(function(t){return t._id===e})}})},a.bookEventHandler=function(){if(a.context.token){console.log(a.state.selectedEvent);var e={query:"\n          mutation BookEvent($id: ID!) {\n            bookEvent(eventId: $id) {\n              _id\n             createdAt\n             updatedAt\n            }\n          }\n        ",variables:{id:a.state.selectedEvent._id}};fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.context.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){console.log(e),a.setState({selectedEvent:null})}).catch(function(e){console.log(e)})}else a.setState({selectedEvent:null})},a.titleElRef=r.a.createRef(),a.priceElRef=r.a.createRef(),a.dateElRef=r.a.createRef(),a.descriptionElRef=r.a.createRef(),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchEvents()}},{key:"fetchEvents",value:function(){var e=this;this.setState({isLoading:!0});fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify({query:"\n          query {\n            events {\n              _id\n              title\n              description\n              date\n              price\n              creator {\n                _id\n                email\n              }\n            }\n          }\n        "}),headers:{"Content-Type":"application/json"}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(t){var a=t.data.events;e.isActive&&e.setState({events:a,isLoading:!1})}).catch(function(t){console.log(t),e.isActive&&e.setState({isLoading:!1})})}},{key:"componentWillUnmount",value:function(){this.isActive=!1}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,(this.state.creating||this.state.selectedEvent)&&r.a.createElement(q,null),this.state.creating&&r.a.createElement(j,{title:"Add Event",canCancel:!0,canConfirm:!0,onCancel:this.modalCancelHandler,onConfirm:this.modalConfirmHandler,confirmText:"Confirm"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",id:"title",ref:this.titleElRef})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"price"},"Price"),r.a.createElement("input",{type:"number",id:"price",ref:this.priceElRef})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"date"},"Date"),r.a.createElement("input",{type:"datetime-local",id:"date",ref:this.dateElRef})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{id:"description",rows:"4",ref:this.descriptionElRef})))),this.state.selectedEvent&&r.a.createElement(j,{title:this.state.selectedEvent.title,canCancel:!0,canConfirm:!0,onCancel:this.modalCancelHandler,onConfirm:this.bookEventHandler,confirmText:this.context.token?"Book":"Confirm"},r.a.createElement("h1",null,this.state.selectedEvent.title),r.a.createElement("h2",null,"$",this.state.selectedEvent.price," -"," ",new Date(this.state.selectedEvent.date).toLocaleDateString()),r.a.createElement("p",null,this.state.selectedEvent.description)),this.context.token&&r.a.createElement("div",{className:"events-control"},r.a.createElement("p",null,"Share your own Events!"),r.a.createElement("button",{className:"btn",onClick:this.startCreateEventHandler},"Create Event")),this.state.isLoading?r.a.createElement(g,null):r.a.createElement(B,{events:this.state.events,authUserId:this.context.userId,onViewDetail:this.showDetailHandler}))}}]),t}(n.Component));H.contextType=N;var L=H,z=a(122),R=r.a.createContext(),J=function(){var e=Object(n.useContext)(R),t=e.count,a=e.fruit,o=e.dataFromDb,l=Object(n.useState)("Baravykas"),i=Object(v.a)(l,2),c=i[0],s=i[1];return r.a.createElement("div",null,r.a.createElement("p",null,"Your name is ",c," ",t," ",o.lenght),r.a.createElement("button",{className:"btn",onClick:function(){return s(c="Johan")}},"Johan"),r.a.createElement("button",{className:"btn",onClick:function(){return s(c="Perter")}},"Peter"),r.a.createElement("button",{className:"btn",onClick:function(){return s(c=a)}},"Putin"))},U=a(70),V=a.n(U);function G(){var e=Object(z.a)(["query {\n        allFiles {\n            _id\n            title\n            description\n          }\n      }"]);return G=function(){return e},e}var K=function(){var e=V()(G()),t=Object(n.useState)(!1),a=Object(v.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)(0),c=Object(v.a)(i,2),s=c[0],m=c[1],d=Object(n.useState)("Fakama"),u=Object(v.a)(d,2),p=u[0],f=u[1],E=Object(n.useState)([]),h=Object(v.a)(E,2),g=h[0],N=h[1],w=function(){var e=["Banana","Abricot","Apple","Kiwi"];return e[Math.floor(Math.random()*e.length)]};Object(n.useEffect)(function(){var e;document.title="You clicked ".concat(s," times"),e=p,console.log(e)},[p]);return r.a.createElement(R.Provider,{value:{count:s,fruit:p,dataFromDb:g}},r.a.createElement(J,null),o,r.a.createElement("button",{onClick:function(){l(o=r.a.createElement("div",null,r.a.createElement("h1",null,"----------------------"),r.a.createElement(b.b,{query:e},function(e){var t=e.loading,a=e.err,o=e.data;return t?r.a.createElement("h1",null,"Loading"):a?r.a.createElement("h1",null,a):o?(f(p=w()),r.a.createElement(n.Fragment,null,o.allFiles.map(function(e){return r.a.createElement("div",{key:e._id},e._id)}))):void 0}),r.a.createElement("h1",null,"----------------------")))}},"Show?"),r.a.createElement("button",{className:"btn btn-primary btn-sm mr-2",onClick:function(){fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                allFiles {\n                    _id\n                    title\n                    description\n                  }\n              }\n            "}),headers:{"Content-Type":"application/json"}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){N(g=e.data.allFiles),console.log(g)}).catch(function(e){console.log(e)})}},"Get Files from db!"),r.a.createElement("button",{disabled:!g.length,className:"btn btn-primary btn-sm",onClick:function(){N(g=[])}},"Clear from screen"),r.a.createElement(n.Fragment,null,r.a.createElement("div",null,"There is ",g.length," in db!"),g.map(function(e){return r.a.createElement("div",{key:e._id},e._id)})),r.a.createElement("p",null,"You clicked ",s," times"),r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return m(s+1)}},"Click me +1"),r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return m(s-1)}},"Click me -1"),r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return m(s=0)}},"reset"),r.a.createElement("div",null,r.a.createElement("p",null,"You faforite fruit is ",p," "),r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return f(p=w())}},"pick fruit")))},W=a(97),Q=a.n(W),X=a(177),Z=a(18),ee=a.n(Z),te=r.a.createContext(),ae=a(91),ne=a(42),re=a(95),oe=(a(235),function(e){return ee()(e,"x").format("MM/DD/YYYY")}),le=function(){var e=Object(n.useContext)(w),t=e.submitExpense,a=e.showModal,o=e.setShowModal,l=e.expense,i=e.onUpdate,c=function(){return o(!a)},s=ee()().format("MM/DD/YYYY"),m=Object(n.useState)(new Date(l?oe(l.createdAt):s)),d=Object(v.a)(m,2),u=d[0],p=d[1];return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:a,onHide:c},r.a.createElement(O.a.Header,{closeButton:!0},i?r.a.createElement(O.a.Title,null,"Update expense"):r.a.createElement(O.a.Title,null,"Add expense")),r.a.createElement(O.a.Body,null,r.a.createElement(y.d,{initialValues:{tag:l?l.tag:"",title:l?l.title:"",description:l?l.description:"",group:l?l.group:"",price:l?l.price:"",date:l?oe(l.createdAt):s,updateDate:l?oe(l.updatedAt):s},validationSchema:k.object().shape({title:k.string().required("title is required"),description:k.string(),group:k.string().required("Group is required"),tag:k.string().required("Type is required"),price:k.number().required("Price is required"),date:k.date().required("Date is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,a=e.values,n=e.touched,o=e.handleChange,l=e.setFieldValue,s=e.handleBlur;return r.a.createElement(y.c,{className:"auth-form"},r.a.createElement("div",{className:"p-2"}),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Type"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("select",{name:"tag",onChange:o,onBlur:s,value:a.tag,className:"custom-select mr-sm-2 form-control"+(t.tag&&n.tag?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:""},"Select a type"),r.a.createElement("option",{value:"Expense"},"Expense"),r.a.createElement("option",{value:"Income"},"Income")),r.a.createElement(y.a,{name:"tag",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Title"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(y.b,{placeholder:"Title",name:"title",type:"text",className:"form-control"+(t.title&&n.title?" is-invalid":"")}),r.a.createElement(y.a,{name:"title",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"description"},"Description"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(y.b,{component:"textarea",placeholder:"Description",name:"description",type:"text",className:"form-control"}),r.a.createElement(y.a,{name:"description",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Group"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("select",{name:"group",onChange:o,onBlur:s,value:a.group,className:"custom-select mr-sm-2 form-control"+(t.group&&n.group?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:""},"Select a group"),r.a.createElement("option",{value:"1"},"One"),r.a.createElement("option",{value:"2"},"Two"),r.a.createElement("option",{value:"3"},"Three")),r.a.createElement(y.a,{name:"group",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Price"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("input",{placeholder:"0.00",name:"price",onChange:function(e){l("price",function(e){var t=e.target.value;return 1===t.length&&"."===t&&(t=t.slice(0,-1)),2===t.length&&"00"===t&&(t=t.slice(0,-1)),t.split(".").length-1>1&&(t=t.slice(0,-1)),(t=t.indexOf(".")>=0?t.substr(0,t.indexOf("."))+t.substr(t.indexOf("."),3):t).replace(/[^\d.-]/g,"").replace("-","")}(e))},value:a.price,className:"form-control"+(t.price&&n.price?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(re.a,{className:"",size:20}))),r.a.createElement(y.a,{name:"price",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"date"},"Date"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement(ae.a,{className:"form-control not-round-right-corner"+(t.date&&n.date?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",{className:""},a.date)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"date",selected:u,placeholder:"Enter date",onChange:function(e){var t;l("date",(t=e,ee()(t).format("MM/DD/YYYY"))),p(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(ne.a,{className:"",size:20}))))),r.a.createElement(y.a,{name:"date",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-actions float-right"},i?r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Update"):r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Submit"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:c},"Cancel")))}}))))},ie=function(){var e=Object(n.useContext)(w),t=e.modalText,a=e.showInfoModal,o=e.setShowInfoModal,l=e.actionFunction,i=function(){return o(!1)};return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:a,onHide:i},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,"Please confirm")),r.a.createElement(O.a.Body,null,t),r.a.createElement(O.a.Footer,null,r.a.createElement(C.a,{variant:"primary",onClick:l},"Yes"),r.a.createElement(C.a,{variant:"secondary",onClick:i},"Cancel"))))},ce=(a(236),function(e){var t,a=e.expense,o=Object(n.useState)(!1),l=Object(v.a)(o,2),i=l[0],c=l[1],s=Object(n.useState)(),m=Object(v.a)(s,2),d=m[0],u=m[1],p=Object(n.useState)(),f=Object(v.a)(p,2),E=f[0],h=f[1],b=Object(n.useState)(!1),g=Object(v.a)(b,2),N=g[0],y=g[1],k=Object(n.useContext)(te),S=k.removeExpense,x=k.updateExpense,O=k.showMore;return r.a.createElement(w.Provider,{value:{modalText:d,showInfoModal:i,setShowInfoModal:c,actionFunction:function(){S(E)},showModal:N,setShowModal:y,expense:a,onUpdate:!0,submitExpense:function(e){e.id=a._id,x(e)}}},r.a.createElement(ie,null),r.a.createElement(le,null),r.a.createElement("span",{className:O?"card_more":"card"},r.a.createElement("div",{style:{background:"rgb(249, 248, 248)"}},r.a.createElement("div",{className:O?"card_title_more":"card_title"}," ",a.title)),r.a.createElement("div",{className:"card_date"},(t=a.createdAt,ee()(t,"x").format("MM/DD/YYYY"))),r.a.createElement("div",{className:O?"card_group":"card_group invisible"},"Group: ",a.group),r.a.createElement("div",{className:O?"card_description":"card_description invisible"},a.description),"Expense"===a.tag?r.a.createElement("div",{className:"card_price_expense"},"-",a.price," \u20ac "):r.a.createElement("div",{className:"card_price_income"},a.price," \u20ac "),r.a.createElement("button",{className:"btn card_removeButton",onClick:function(){return e="Are you sure whant to delete this item?",t=a,c(!0),u(e),void h(t);var e,t}},r.a.createElement("i",null,r.a.createElement(ne.c,{size:20}))),r.a.createElement("button",{className:"btn card_editButton",onClick:function(){return y(!N)}},r.a.createElement("i",null,r.a.createElement(ne.b,{size:20})))))}),se=a(263),me=function(){var e=Object(n.useContext)(w),t=e.showModal,a=e.setShowModal,o=Object(n.useContext)(te),l=o.setShowMore,i=o.showMore,c=o.allExpenses;return r.a.createElement(te.Provider,{value:{showMore:i}},r.a.createElement("span",{className:"card_first card"},r.a.createElement(n.Fragment,null,r.a.createElement(j,null),r.a.createElement("div",{className:"row d-flex align-self-center"},r.a.createElement("button",{className:"btn_one",onClick:function(){return a(!t)}},r.a.createElement("i",null,r.a.createElement(se.a,{size:40}))),c.length?r.a.createElement("button",{className:"btn_one",onClick:function(){return l(!i)}},i?r.a.createElement("i",null,r.a.createElement(re.b,{size:40})):r.a.createElement("i",null,r.a.createElement(re.c,{size:40}))):null),t&&r.a.createElement(n.Fragment,null,r.a.createElement(le,null)))))},de=(a(461),function(){var e=Object(n.useContext)(te).allExpenses;return r.a.createElement(n.Fragment,null,r.a.createElement(me,null),e.map(function(e){return r.a.createElement(ce,{className:"expenses_list",key:e._id,expense:e})}))}),ue=function(){var e=Object(n.useContext)(te),t=e.getAllOnFilter,a=e.getAll,o=ee()().format("MM/DD/YYYY"),l=ee()().subtract(1,"months").format("MM/DD/YYYY"),i=Object(n.useState)(new Date(l)),c=Object(v.a)(i,2),s=c[0],m=c[1],d=Object(n.useState)(new Date(o)),u=Object(v.a)(d,2),p=u[0],f=u[1],E=function(e){return ee()(e).format("MM/DD/YYYY")},h=function(e){var n={dateFrom:"",dateTo:""};switch(e){case"today":n={dateFrom:ee()().format("MM/DD/YYYY"),dateTo:ee()().format("MM/DD/YYYY")},t(n);break;case"week":n={dateFrom:ee()().startOf("week").format("MM/DD/YYYY"),dateTo:ee()().endOf("week").format("MM/DD/YYYY")},t(n);break;case"month":n={dateFrom:ee()().startOf("month").format("MM/DD/YYYY"),dateTo:ee()().endOf("month").format("MM/DD/YYYY")},t(n);break;case"year":n={dateFrom:ee()().startOf("year").format("MM/DD/YYYY"),dateTo:ee()().endOf("year").format("MM/DD/YYYY")},t(n);break;case"all":a();break;default:n={dateFrom:ee()().startOf("month").format("MM/DD/YYYY"),dateTo:ee()().endOf("month").format("MM/DD/YYYY")},t(n)}};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"form-group row col-sm-12  justify-content-center mb-3"},r.a.createElement("button",{className:" col-sm-2 btn btn_with_line",onClick:function(){return h("today")}},"Today"),r.a.createElement("button",{className:"col-sm-2 btn btn_with_line",onClick:function(){return h("week")}},"This week"),r.a.createElement("button",{className:"col-sm-2 btn btn_with_line",onClick:function(){return h("month")}},"This month"),r.a.createElement("button",{className:"col-sm-2 btn btn_with_line",onClick:function(){return h("year")}},"This year"),r.a.createElement("button",{className:"col-sm-2 btn btn_with_line",onClick:function(){return h("all")}},"All")),r.a.createElement(y.d,{initialValues:{dateFrom:l,dateTo:o},validationSchema:k.object().shape({dateFrom:k.date().required("Date is required"),dateTo:k.date().required("Date is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,a=e.values,n=e.touched,o=e.setFieldValue;return r.a.createElement(y.c,null,r.a.createElement("div",{className:"form-group row col-sm-12  justify-content-center mb-2"},r.a.createElement("label",{className:" col-form-label mr-3",htmlFor:"dateFrom"},"From:"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement(ae.a,{selected:s,startDate:s,endDate:p,className:"form-control not-round-right-corner"+(t.dateFrom&&n.dateFrom?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",null,a.dateFrom)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"dateFrom",placeholder:"Enter date",onChange:function(e){o("dateFrom",E(e)),m(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(ne.a,{className:"",size:20}))))),r.a.createElement(y.a,{name:"dateTo",component:"div",className:"invalid-feedback"}),r.a.createElement("label",{className:"col-form-label ml-5 mr-3",htmlFor:"dateTo"},"To:"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement(ae.a,{selected:p,startDate:s,endDate:p,className:"form-control not-round-right-corner"+(t.dateTo&&n.dateTo?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",null,a.dateTo)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"dateTo",placeholder:"Enter date",onChange:function(e){o("dateTo",E(e)),f(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(ne.a,{className:"",size:20}))))),r.a.createElement(y.a,{name:"dateTo",component:"div",className:"invalid-feedback"}),r.a.createElement("div",{className:"float-right ml-5"},r.a.createElement("button",{type:"submit",className:"btn btn_main"},"Filter"))))}}))},pe=(a(463),function(){var e=N._currentValue,t=Object(n.useState)(!1),a=Object(v.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)(!1),c=Object(v.a)(i,2),s=c[0],m=c[1],d=Object(n.useState)([]),u=Object(v.a)(d,2),p=u[0],f=u[1],E=Object(n.useState)(""),h=Object(v.a)(E,2),b=h[0],y=h[1],k=Object(n.useState)(),S=Object(v.a)(k,2),x=S[0],O=S[1],C=Object(n.useState)(!1),F=Object(v.a)(C,2),T=F[0],$=F[1],_=Object(n.useState)(!1),D=Object(v.a)(_,2),I=D[0],Y=D[1],M=function(e,t,a){$(e),y(t),O(a)};Object(n.useEffect)(function(){V()},[]);var q=function(){l(!0);return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                expenses {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(l(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return console.log(e.data.expenses),e.data.expenses=R(e.data.expenses,"Expense"),l(!1),e.data.expenses}).catch(function(e){return l(!1),console.log(e),e})},P=function(){l(!0);return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                incomes {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(l(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return e.data.incomes=R(e.data.incomes,"Income"),console.log(e.data.incomes),l(!1),e.data.incomes}).catch(function(e){return l(!1),console.log(e),e})},B=function(t){l(!0);var a={query:"\n            query ExpensesFilter($dateFrom: String!, $dateTo: String!){\n                expensesFilter(dateFrom: $dateFrom, dateTo: $dateTo) {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                }\n            }",variables:{dateFrom:L(t.dateFrom),dateTo:L(t.dateTo)}};return fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw l(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.expensesFilter=R(e.data.expensesFilter,"Expense"),l(!1),e.data.expensesFilter}).catch(function(e){throw l(!1),console.log(e),M(!0,"Error",e),e})},H=function(t){l(!0);var a={query:"\n            query IncomesFilter($dateFrom: String!, $dateTo: String!){\n                incomesFilter(dateFrom: $dateFrom, dateTo: $dateTo) {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                }\n            }",variables:{dateFrom:L(t.dateFrom),dateTo:L(t.dateTo)}};return fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw l(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.incomesFilter=R(e.data.incomesFilter,"Income"),l(!1),e.data.incomesFilter}).catch(function(e){throw l(!1),console.log(e),M(!0,"Error",e),e})},L=function(e){return JSON.stringify(ee()(e).valueOf())},z=function(e){return e.sort(function(e,t){return e=ee()(e.createdAt,"x").format("DD-MM-YYYY").split("-").reverse().join(""),t=ee()(t.createdAt,"x").format("DD-MM-YYYY").split("-").reverse().join(""),e.localeCompare(t)}),e},R=function(e,t){return e.forEach(function(e){e.tag=t}),e},J=function(e){var t=[];return p.map(function(a){a._id===e._id?(a=e,t.push(a)):t.push(a)}),t=z(t)},U=function(e){var t=[];return p.forEach(function(a){a._id!==e._id&&t.push(a)}),t=z(t)},V=function(){var e=Object(X.a)(Q.a.mark(function e(){var t,a,n;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:return t=e.sent,e.next=5,P();case 5:a=e.sent,n=t.concat(a),n=z(n),f(n);case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(X.a)(Q.a.mark(function e(t){var a,n,r;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:return a=e.sent,e.next=5,H(t);case 5:n=e.sent,r=a.concat(n),r=z(r),f(r);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(te.Provider,{value:{currentUser:e,allExpenses:p,setAllExpenses:f,removeExpense:function(t){var a={query:""};a="Expense"===t.tag?{query:"\n                  mutation RemoveExpense($id: ID!) {\n                    removeExpense(expenseId: $id) {\n                    _id\n                     title\n                    }\n                  }\n                ",variables:{id:t._id}}:{query:"\n                  mutation RemoveIncome($id: ID!) {\n                    removeIncome(incomeId: $id) {\n                    _id\n                     title\n                    }\n                  }\n                ",variables:{id:t._id}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){var t=[];e.data.removeExpense?(t=U(e.data.removeExpense),M(!0,"Confirmation","Expense was deleted")):(t=U(e.data.removeIncome),M(!0,"Confirmation","Income was deleted")),f(t)}).catch(function(e){return console.log(e),e})},updateExpense:function(t){console.log(t),l(!0);var a={query:""};t.date=L(t.date),t.updateDate=L(t.updateDate),a="Expense"===t.tag?{query:"\n                          mutation UpdateExpense($id: ID!, $title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            updateExpense(expenseId: $id, expenseInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                              }\n                          }\n                        ",variables:{id:t.id,title:t.title,description:t.description,price:t.price,group:t.group,createdAt:t.date,updatedAt:t.updateDate}}:{query:"\n                          mutation UpdateIncome($id: ID!, $title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            updateIncome(incomeId: $id, incomeInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                              }\n                          }\n                        ",variables:{id:t.id,title:t.title,description:t.description,price:t.price,group:t.group,createdAt:t.date,updatedAt:t.updateDate}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw l(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;var t=[];e.data.updateExpense?(e.data.updateExpense.tag="Expense",console.log(e.data.updateExpense),t=J(e.data.updateExpense),M(!0,"Confirmation","Expense was updated")):(e.data.updateIncome.tag="Income",console.log(e.data.updateIncome),t=J(e.data.updateIncome),M(!0,"Confirmation","Income was updated")),f(t),l(!1)}).catch(function(e){throw l(!1),console.log(e),M(!0,"Error",e),e})},isLoading:o,getAllOnFilter:G,getAll:V,showMore:I,setShowMore:Y}},r.a.createElement(w.Provider,{value:{showInfoModal:T,setShowInfoModal:$,modalHeader:b,modalText:x,showModal:s,submitExpense:function(t){var a={query:""};l(!0);var n=L(t.date);a="Expense"===t.tag?{query:"\n                          mutation CreateExpense($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createExpense(expenseInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}}:{query:"\n                          mutation CreateIncome($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createIncome(incomeInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw l(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;l(!1),m(!1),e.data.createExpense?(M(!0,"Confirmation","Expense was created"),e.data.createExpense.tag="Expense",f([].concat(Object(A.a)(p),[e.data.createExpense]))):(M(!0,"Confirmation","Income was created"),e.data.createIncome.tag="Income",f([].concat(Object(A.a)(p),[e.data.createIncome])))}).catch(function(e){throw l(!1),m(!1),console.log(e),M(!0,"Error",e),e})},setShowModal:m,modalInfo:M}},r.a.createElement(ue,null),o?r.a.createElement(g,null):r.a.createElement(n.Fragment,null,r.a.createElement(j,null),r.a.createElement("div",{className:"center"},r.a.createElement(de,null)))))}),fe=a(485),Ee=a(487),he=a(489),be=a(488),ve=a(185),ge=(a(465),function(){return r.a.createElement(N.Consumer,null,function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(Ee.a,{bg:"dark",variant:"dark"},r.a.createElement(Ee.a.Brand,{as:fe.a,to:"/"},r.a.createElement(ve.b,{size:40,className:"main-navigation__logo"}),"Budget planner"),r.a.createElement(he.a,{className:"main-navigation__items"},!e.token&&r.a.createElement("li",null,r.a.createElement(he.a.Link,{as:fe.a,to:"/auth"},"Sign in")),e.token&&r.a.createElement(be.a,{alignRight:!0,title:r.a.createElement("span",null,r.a.createElement(ne.d,{size:25})),id:"collasible-nav-dropdown"},r.a.createElement(be.a.Item,{as:fe.a,to:"/settings"},"Settings"),r.a.createElement(be.a.Divider,null),r.a.createElement(be.a.Item,{onClick:e.logout},"Logout")),e.token&&r.a.createElement(be.a,{alignRight:!0,title:r.a.createElement("span",null,r.a.createElement(ve.a,{size:25})),id:"collasible-nav-dropdown"},r.a.createElement(be.a.Item,{as:fe.a,to:"/events"},"Events"),r.a.createElement(be.a.Item,{as:fe.a,to:"/bookings"},"Bookings"),r.a.createElement(be.a.Item,{as:fe.a,to:"/expenses"},"Expenses"),r.a.createElement(be.a.Item,{as:fe.a,to:"/incomes"},"Incomes"),r.a.createElement(be.a.Item,{as:fe.a,to:"/statistics"},"Statistics")))))})}),Ne=(a(473),new h.a({uri:"/graphql"})),we=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={token:null,userId:null},a.login=function(e,t){a.setState({token:e,userId:t})},a.logout=function(){fetch("/removeCookie",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){console.log(e.response.message)}).catch(function(e){console.log(e)}),a.setState({token:null,userId:null})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(b.a,{client:Ne},r.a.createElement(u.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(N.Provider,{value:{token:this.state.token,userId:this.state.userId,login:this.login,logout:this.logout}},r.a.createElement(ge,null),r.a.createElement("main",{className:"main-content"},r.a.createElement(p.a,null,r.a.createElement(f.a,{path:"/test",component:K}),this.state.token&&r.a.createElement(f.a,{path:"/expenses",component:pe}),this.state.token&&r.a.createElement(E.a,{from:"/",to:"/expenses",exact:!0}),this.state.token&&r.a.createElement(E.a,{from:"/auth",to:"/expenses",exact:!0}),!this.state.token&&r.a.createElement(f.a,{path:"/auth",component:F}),r.a.createElement(f.a,{path:"/events",component:L}),this.state.token&&r.a.createElement(f.a,{path:"/bookings",component:M}),!this.state.token&&r.a.createElement(E.a,{to:"/auth",exact:!0})))))))}}]),t}(n.Component);l.a.render(r.a.createElement(we,null),document.getElementById("root"))}},[[269,2,1]]]);
//# sourceMappingURL=main.a82f38d8.chunk.js.map