(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(e,t,a){},296:function(e,t,a){},327:function(e,t){},366:function(e,t,a){e.exports=a.p+"static/media/pig-face.96b2c961.png"},398:function(e,t,a){e.exports=a(706)},405:function(e,t,a){},407:function(e,t,a){},409:function(e,t,a){},550:function(e,t,a){},563:function(e,t,a){},565:function(e,t,a){},567:function(e,t,a){},569:function(e,t,a){},578:function(e,t,a){},686:function(e,t){},687:function(e,t){},688:function(e,t,a){},690:function(e,t,a){},692:function(e,t,a){},695:function(e,t,a){},701:function(e,t,a){},706:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(24),c=a.n(o),l=(a(403),a(96)),i=a(97),s=a(109),m=a(98),u=a(111),d=a(720),p=a(722),f=a(721),E=a(719),g=a(369),h=a(100),b=a(13),v=(a(405),a(407),function(){return r.a.createElement("div",{className:"backdrop"})}),y=(a(409),function(){return r.a.createElement(n.Fragment,null,r.a.createElement(v,null),r.a.createElement("div",{class:"cssload-loader"},r.a.createElement("div",{class:"cssload-inner cssload-one"}),r.a.createElement("div",{class:"cssload-inner cssload-two"}),r.a.createElement("div",{class:"cssload-inner cssload-three"})))}),N=r.a.createContext({token:null,userId:null,login:function(e,t){},logout:function(){}}),w=r.a.createContext(),x=a(15),S=a(17),O=function(){var e=Object(n.useContext)(N),t=e.submitHandler,a=e.switchModeHandler;return r.a.createElement(x.d,{initialValues:{firstName:"",lastName:"",email:"",password:"",confirmPassword:""},validationSchema:S.object().shape({firstName:S.string().required("First Name is required"),lastName:S.string().required("Last Name is required"),email:S.string().email("Email is invalid").required("Email is required"),password:S.string().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:S.string().oneOf([S.ref("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,n=(e.status,e.touched);return r.a.createElement(x.c,{className:"auth-form",id:"formContentSignUp"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h4",null,"Create account")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"firstName"},"First Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(x.b,{placeholder:"First name",name:"firstName",type:"text",className:"form-control"+(t.firstName&&n.firstName?" is-invalid":"")}),r.a.createElement(x.a,{name:"firstName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"lastName"},"Last Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(x.b,{placeholder:"Last name",name:"lastName",type:"text",className:"form-control"+(t.lastName&&n.lastName?" is-invalid":"")}),r.a.createElement(x.a,{name:"lastName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(x.b,{placeholder:"Email",name:"email",type:"text",className:"form-control"+(t.email&&n.email?" is-invalid":"")}),r.a.createElement(x.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(x.b,{placeholder:"Password",name:"password",type:"password",className:"form-control"+(t.password&&n.password?" is-invalid":"")}),r.a.createElement(x.a,{name:"password",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"confirmPassword"},"Confirm Password"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(x.b,{placeholder:"Confirm",name:"confirmPassword",type:"password",className:"form-control"+(t.confirmPassword&&n.confirmPassword?" is-invalid":"")}),r.a.createElement(x.a,{name:"confirmPassword",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Register"),r.a.createElement("button",{onClick:a,type:"button",className:"btn btn-secondary mr-2"},"Sign in")))}})},k=function(){var e=Object(n.useContext)(N),t=e.submitHandler,a=e.switchModeHandler;return r.a.createElement(x.d,{initialValues:{email:"",password:""},validationSchema:S.object().shape({email:S.string().email("Email is invalid").required("Email is required"),password:S.string().required("Password is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,n=(e.status,e.touched);return r.a.createElement(x.c,{className:"auth-form",id:"formContentSignIn"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h4",null,"Sign in")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(x.b,{placeholder:"Email",name:"email",type:"text",className:"form-control"+(t.email&&n.email?" is-invalid":"")}),r.a.createElement(x.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(x.b,{placeholder:"Password",name:"password",type:"password",className:"form-control"+(t.password&&n.password?" is-invalid":"")}),r.a.createElement(x.a,{name:"password",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-actions"},r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Submit"),r.a.createElement("button",{onClick:a,type:"button",className:"btn btn-secondary mr-2"},"Sign up")))}})},Y=a(716),C=a(549),j=(a(153),function(){var e=Object(n.useContext)(w),t=e.modalHeader,a=e.modalText,o=e.showInfoModal,c=e.setShowInfoModal,l=function(){return c(!1)};return r.a.createElement(n.Fragment,null,r.a.createElement(Y.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:o,onHide:l},r.a.createElement(Y.a.Header,{closeButton:!0},r.a.createElement(Y.a.Title,null,t)),r.a.createElement(Y.a.Body,null,a),r.a.createElement(Y.a.Footer,null,r.a.createElement(C.a,{variant:"secondary",onClick:l},"Ok"))))}),M=function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),l=Object(b.a)(c,2),i=l[0],s=l[1],m=Object(n.useState)(!1),u=Object(b.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(""),E=Object(b.a)(f,2),g=E[0],h=E[1],v=Object(n.useState)(),x=Object(b.a)(v,2),S=x[0],Y=x[1];Object(n.useEffect)(function(){F()},[]);var C=function(e,t,a){p(e),h(t),Y(a)},M=Object(n.useContext)(N).login,D=function(){return o(!a)},F=function(){fetch("/cookie",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){M(e.response.token,e.response.userId)}).catch(function(e){console.log("There is no cookie!")})},A=function(e,t){var a={query:"\n            mutation CreateSettings($dailyBudget: String!, $weeklyBudget: String!, $monthlyBudget: String!, $members: String!, $categories: String!,  $currency: String!, $userId: String!, $creatorEmail: String! ) {\n                createSettings(settingsInput:{dailyBudget: $dailyBudget, weeklyBudget: $weeklyBudget, monthlyBudget: $monthlyBudget, members:$members, categories:$categories,currency:$currency, userId: $userId, creatorEmail: $creatorEmail}) {\n                    _id\n                   \n                  }\n              }\n      ",variables:{dailyBudget:"",weeklyBudget:"",monthlyBudget:"",members:"",categories:"",currency:"",userId:e.userId,creatorEmail:e.creatorsEmail}};fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then(function(e){if(!e.ok)throw s(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;e.data&&(C(!0,"Confirmation","Hi ".concat(t.firstName," ").concat(t.lastName,", your account was created. Now You can sign in.")),D(),s(!1))}).catch(function(e){throw s(!1),console.log(e),C(!0,"Error",e),e})};return r.a.createElement(w.Provider,{value:{modalHeader:g,modalText:S,showInfoModal:d,setShowInfoModal:p}},r.a.createElement(N.Provider,{value:{submitHandler:function(e){var t=JSON.stringify((new Date).getTime());s(!0);var n={query:"\n              query Login($email: String!, $password: String!) {\n                login(email: $email, password: $password) {\n                  userId\n                  token\n                }\n              }\n            ",variables:{email:e.email,password:e.password}};a&&(n={query:"\n            mutation CreateUser($email: String!, $password: String!, $name: String!, $surname: String!, $createdAt: String!, $updatedAt: String!) {\n              createUser(userInput: {email: $email, password: $password, name: $name, surname: $surname, createdAt: $createdAt, updatedAt: $updatedAt}) {\n                _id\n                email\n              }\n            }\n          ",variables:{email:e.email,password:e.password,name:e.firstName,surname:e.lastName,createdAt:t,updatedAt:t}}),fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(e){if(!e.ok)throw s(!1),e.statusText;return e.json()}).then(function(t){if(t.data.login)s(!1),M(t.data.login.token,t.data.login.userId);else{var a={userId:t.data.createUser._id,creatorsEmail:t.data.createUser.email};A(a,e)}}).catch(function(e){throw s(!1),C(!0,"Oops!","Your email or password is incorect."),e})},switchModeHandler:D}},r.a.createElement(j,null),i?r.a.createElement(y,null):r.a.createElement(n.Fragment,null,a?r.a.createElement(O,null):r.a.createElement(k,null))))},D=(a(550),function(e){return r.a.createElement("ul",{className:"bookings__list"},e.bookings.map(function(t){return r.a.createElement("li",{key:t._id,className:"bookings__item"},r.a.createElement("div",{className:"bookings__item-data"},t.event.title," -"," ",new Date(t.createdAt).toLocaleDateString()),r.a.createElement("div",{className:"bookings__item-actions"},r.a.createElement("button",{className:"btn",onClick:e.onDelete.bind(void 0,t._id)},"Cancel")))}))}),F=a(38),A=a(333),$={Cheap:{min:0,max:100},Normal:{min:100,max:200},Expensive:{min:200,max:1e7}},I=function(e){var t={labels:[],datasets:[]},a=[],n=function(n){var r=e.bookings.reduce(function(e,t){return t.event.price>$[n].min&&t.event.price<$[n].max?e+1:e},0);a.push(r),t.labels.push(n),t.datasets.push({fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:a}),(a=Object(F.a)(a))[a.length-1]=0};for(var o in $)n(o);return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(A.Bar,{data:t}))},_=(a(563),function(e){return r.a.createElement("div",{className:"bookings-control"},r.a.createElement("button",{className:"list"===e.activeOutputType?"active":"",onClick:e.onChange.bind(void 0,"list")},"List"),r.a.createElement("button",{className:"chart"===e.activeOutputType?"active":"",onClick:e.onChange.bind(void 0,"chart")},"Chart"))}),B=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!1,bookings:[],outputType:"list"},a.fetchBookings=function(){a.setState({isLoading:!0});fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify({query:"\n          query {\n            bookings {\n              _id\n             createdAt\n             event {\n               _id\n               title\n               date\n               price\n             }\n            }\n          }\n        "}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.context.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){var t=e.data.bookings;a.setState({bookings:t,isLoading:!1})}).catch(function(e){console.log(e),a.setState({isLoading:!1})})},a.deleteBookingHandler=function(e){a.setState({isLoading:!0});var t={query:"\n          mutation CancelBooking($id: ID!) {\n            cancelBooking(bookingId: $id) {\n            _id\n             title\n            }\n          }\n        ",variables:{id:e}};fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.context.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(t){a.setState(function(t){return{bookings:t.bookings.filter(function(t){return t._id!==e}),isLoading:!1}})}).catch(function(e){console.log(e),a.setState({isLoading:!1})})},a.changeOutputTypeHandler=function(e){"list"===e?a.setState({outputType:"list"}):a.setState({outputType:"chart"})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchBookings()}},{key:"render",value:function(){var e=r.a.createElement(y,null);return this.state.isLoading||(e=r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{activeOutputType:this.state.outputType,onChange:this.changeOutputTypeHandler}),r.a.createElement("div",null,"list"===this.state.outputType?r.a.createElement(D,{bookings:this.state.bookings,onDelete:this.deleteBookingHandler}):r.a.createElement(I,{bookings:this.state.bookings})))),r.a.createElement(r.a.Fragment,null,e)}}]),t}(n.Component);B.contextType=N;var T=B,q=(a(565),function(e){return r.a.createElement("li",{key:e.eventId,className:"events__list-item"},r.a.createElement("div",null,r.a.createElement("h1",null,e.title),r.a.createElement("h2",null,"$",e.price," - ",new Date(e.date).toLocaleDateString())),r.a.createElement("div",null,e.userId===e.creatorId?r.a.createElement("p",null,"Your the owner of this event."):r.a.createElement("button",{className:"btn",onClick:e.onDetail.bind(void 0,e.eventId)},"View Details")))}),P=(a(567),function(e){var t=e.events.map(function(t){return r.a.createElement(q,{key:t._id,eventId:t._id,title:t.title,price:t.price,date:t.date,userId:e.authUserId,creatorId:t.creator._id,onDetail:e.onViewDetail})});return r.a.createElement("ul",{className:"event__list"},t)}),z=(a(569),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={creating:!1,events:[],isLoading:!1,selectedEvent:null},a.isActive=!0,a.startCreateEventHandler=function(){a.setState({creating:!0})},a.modalConfirmHandler=function(){a.setState({creating:!1});var e=a.titleElRef.current.value,t=+a.priceElRef.current.value,n=a.dateElRef.current.value,r=a.descriptionElRef.current.value;if(!(0===e.trim().length||t<=0||0===n.trim().length||0===r.trim().length)){var o={title:e,price:t,date:n,description:r};console.log(o);var c={query:"\n          mutation CreateEvent($title: String!, $desc: String!, $price: Float!, $date: String!) {\n            createEvent(eventInput: {title: $title, description: $desc, price: $price, date: $date}) {\n              _id\n              title\n              description\n              date\n              price\n            }\n          }\n        ",variables:{title:e,desc:r,price:t,date:n}},l=a.context.token;fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+l}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){a.setState(function(t){var n=Object(F.a)(t.events);return n.push({_id:e.data.createEvent._id,title:e.data.createEvent.title,description:e.data.createEvent.description,date:e.data.createEvent.date,price:e.data.createEvent.price,creator:{_id:a.context.userId}}),{events:n}})}).catch(function(e){console.log(e)})}},a.modalCancelHandler=function(){a.setState({creating:!1,selectedEvent:null})},a.showDetailHandler=function(e){a.setState(function(t){return{selectedEvent:t.events.find(function(t){return t._id===e})}})},a.bookEventHandler=function(){if(a.context.token){console.log(a.state.selectedEvent);var e={query:"\n          mutation BookEvent($id: ID!) {\n            bookEvent(eventId: $id) {\n              _id\n             createdAt\n             updatedAt\n            }\n          }\n        ",variables:{id:a.state.selectedEvent._id}};fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.context.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){console.log(e),a.setState({selectedEvent:null})}).catch(function(e){console.log(e)})}else a.setState({selectedEvent:null})},a.titleElRef=r.a.createRef(),a.priceElRef=r.a.createRef(),a.dateElRef=r.a.createRef(),a.descriptionElRef=r.a.createRef(),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchEvents()}},{key:"fetchEvents",value:function(){var e=this;this.setState({isLoading:!0});fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify({query:"\n          query {\n            events {\n              _id\n              title\n              description\n              date\n              price\n              creator {\n                _id\n                email\n              }\n            }\n          }\n        "}),headers:{"Content-Type":"application/json"}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(t){var a=t.data.events;e.isActive&&e.setState({events:a,isLoading:!1})}).catch(function(t){console.log(t),e.isActive&&e.setState({isLoading:!1})})}},{key:"componentWillUnmount",value:function(){this.isActive=!1}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,(this.state.creating||this.state.selectedEvent)&&r.a.createElement(v,null),this.state.creating&&r.a.createElement(j,{title:"Add Event",canCancel:!0,canConfirm:!0,onCancel:this.modalCancelHandler,onConfirm:this.modalConfirmHandler,confirmText:"Confirm"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",id:"title",ref:this.titleElRef})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"price"},"Price"),r.a.createElement("input",{type:"number",id:"price",ref:this.priceElRef})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"date"},"Date"),r.a.createElement("input",{type:"datetime-local",id:"date",ref:this.dateElRef})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{id:"description",rows:"4",ref:this.descriptionElRef})))),this.state.selectedEvent&&r.a.createElement(j,{title:this.state.selectedEvent.title,canCancel:!0,canConfirm:!0,onCancel:this.modalCancelHandler,onConfirm:this.bookEventHandler,confirmText:this.context.token?"Book":"Confirm"},r.a.createElement("h1",null,this.state.selectedEvent.title),r.a.createElement("h2",null,"$",this.state.selectedEvent.price," -"," ",new Date(this.state.selectedEvent.date).toLocaleDateString()),r.a.createElement("p",null,this.state.selectedEvent.description)),this.context.token&&r.a.createElement("div",{className:"events-control"},r.a.createElement("p",null,"Share your own Events!"),r.a.createElement("button",{className:"btn",onClick:this.startCreateEventHandler},"Create Event")),this.state.isLoading?r.a.createElement(y,null):r.a.createElement(P,{events:this.state.events,authUserId:this.context.userId,onViewDetail:this.showDetailHandler}))}}]),t}(n.Component));z.contextType=N;var R=z,U=a(165),L=r.a.createContext(),H=function(){var e=Object(n.useContext)(L),t=e.count,a=e.fruit,o=e.dataFromDb,c=Object(n.useState)("Baravykas"),l=Object(b.a)(c,2),i=l[0],s=l[1];return r.a.createElement("div",null,r.a.createElement("p",null,"Your name is ",i," ",t," ",o.lenght),r.a.createElement("button",{className:"btn",onClick:function(){return s(i="Johan")}},"Johan"),r.a.createElement("button",{className:"btn",onClick:function(){return s(i="Perter")}},"Peter"),r.a.createElement("button",{className:"btn",onClick:function(){return s(i=a)}},"Putin"))},J=a(95),G=a.n(J);function V(){var e=Object(U.a)(["query {\n        allFiles {\n            _id\n            title\n            description\n          }\n      }"]);return V=function(){return e},e}var K=function(){var e=G()(V()),t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(0),i=Object(b.a)(l,2),s=i[0],m=i[1],u=Object(n.useState)("Fakama"),d=Object(b.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)([]),g=Object(b.a)(E,2),v=g[0],y=g[1],N=function(){var e=["Banana","Abricot","Apple","Kiwi"];return e[Math.floor(Math.random()*e.length)]};Object(n.useEffect)(function(){var e;document.title="You clicked ".concat(s," times"),e=p,console.log(e)},[p]);return r.a.createElement(L.Provider,{value:{count:s,fruit:p,dataFromDb:v}},r.a.createElement(H,null),o,r.a.createElement("button",{onClick:function(){c(o=r.a.createElement("div",null,r.a.createElement("h1",null,"----------------------"),r.a.createElement(h.b,{query:e},function(e){var t=e.loading,a=e.err,o=e.data;return t?r.a.createElement("h1",null,"Loading"):a?r.a.createElement("h1",null,a):o?(f(p=N()),r.a.createElement(n.Fragment,null,o.allFiles.map(function(e){return r.a.createElement("div",{key:e._id},e._id)}))):void 0}),r.a.createElement("h1",null,"----------------------")))}},"Show?"),r.a.createElement("button",{className:"btn btn-primary btn-sm mr-2",onClick:function(){fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                allFiles {\n                    _id\n                    title\n                    description\n                  }\n              }\n            "}),headers:{"Content-Type":"application/json"}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){y(v=e.data.allFiles),console.log(v)}).catch(function(e){console.log(e)})}},"Get Files from db!"),r.a.createElement("button",{disabled:!v.length,className:"btn btn-primary btn-sm",onClick:function(){y(v=[])}},"Clear from screen"),r.a.createElement(n.Fragment,null,r.a.createElement("div",null,"There is ",v.length," in db!"),v.map(function(e){return r.a.createElement("div",{key:e._id},e._id)})),r.a.createElement("p",null,"You clicked ",s," times"),r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return m(s+1)}},"Click me +1"),r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return m(s-1)}},"Click me -1"),r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return m(s=0)}},"reset"),r.a.createElement("div",null,r.a.createElement("p",null,"You faforite fruit is ",p," "),r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return f(p=N())}},"pick fruit")))},X=a(57),W=a.n(X),Q=a(113),Z=a(10),ee=a.n(Z),te=r.a.createContext(),ae=a(127),ne=a(34),re=(a(295),function(e){return ee()(e,"x").format("MM/DD/YYYY")}),oe=function(e){var t=e.setting,a=Object(n.useContext)(w),o=a.submitExpense,c=a.showModal,l=a.setShowModal,i=a.expense,s=a.onUpdate,m="GBD"===t.currency?"\xa3":"Dollar"===t.currency?"$":"\u20ac",u=function(){return l(!c)},d=ee()().format("MM/DD/YYYY"),p=Object(n.useState)(function(e){var t=[];return e.categories.split(";").forEach(function(e){e.length&&t.push(e)}),t}(t)),f=Object(b.a)(p,2),E=f[0],g=(f[1],Object(n.useState)(new Date(i?re(i.createdAt):d))),h=Object(b.a)(g,2),v=h[0],y=h[1];return r.a.createElement(n.Fragment,null,r.a.createElement(Y.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:c,onHide:u},r.a.createElement(Y.a.Header,{closeButton:!0},s?r.a.createElement(Y.a.Title,null,"Update expense"):r.a.createElement(Y.a.Title,null,"Add expense")),r.a.createElement(Y.a.Body,null,r.a.createElement(x.d,{initialValues:{tag:i?i.tag:"",title:i?i.title:"",description:i?i.description:"",group:i?i.group:"",price:i?i.price:"",date:i?re(i.createdAt):d,updateDate:i?re(i.updatedAt):d},validationSchema:S.object().shape({title:S.string().required("title is required"),description:S.string(),group:S.string().required("Group is required"),tag:S.string().required("Type is required"),price:S.number().required("Price is required"),date:S.date().required("Date is required")}),onSubmit:function(e){o(e)},render:function(e){var t=e.errors,a=e.values,n=e.touched,o=e.handleChange,c=e.setFieldValue,l=e.handleBlur;return r.a.createElement(x.c,{className:"auth-form"},r.a.createElement("div",{className:"p-2"}),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Type"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("select",{name:"tag",onChange:o,onBlur:l,value:a.tag,className:"custom-select mr-sm-2 form-control"+(t.tag&&n.tag?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:""},"Select a type"),r.a.createElement("option",{value:"Expense"},"Expense"),r.a.createElement("option",{value:"Income"},"Income")),r.a.createElement(x.a,{name:"tag",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Title"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(x.b,{placeholder:"Title",name:"title",type:"text",className:"form-control"+(t.title&&n.title?" is-invalid":"")}),r.a.createElement(x.a,{name:"title",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"description"},"Description"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(x.b,{component:"textarea",placeholder:"Description",name:"description",type:"text",className:"form-control"}),r.a.createElement(x.a,{name:"description",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Group"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("select",{name:"group",onChange:o,onBlur:l,value:a.group,className:"custom-select mr-sm-2 form-control"+(t.group&&n.group?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:""},"Select a group"),E.map(function(e){return r.a.createElement("option",{key:e,value:e},e)})),r.a.createElement(x.a,{name:"group",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Price"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("input",{placeholder:"0.00",name:"price",onChange:function(e){c("price",function(e){var t=e.target.value;return 1===t.length&&"."===t&&(t=t.slice(0,-1)),2===t.length&&"00"===t&&(t=t.slice(0,-1)),t.split(".").length-1>1&&(t=t.slice(0,-1)),(t=t.indexOf(".")>=0?t.substr(0,t.indexOf("."))+t.substr(t.indexOf("."),3):t).replace(/[^\d.-]/g,"").replace("-","")}(e))},value:a.price,className:"form-control"+(t.price&&n.price?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{style:{fontSize:"15px"},className:"input-group-text"},m)),r.a.createElement(x.a,{name:"price",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"date"},"Date"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement(ae.a,{className:"form-control not-round-right-corner"+(t.date&&n.date?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",{className:""},a.date)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"date",selected:v,placeholder:"Enter date",onChange:function(e){var t;c("date",(t=e,ee()(t).format("MM/DD/YYYY"))),y(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(ne.a,{className:"",size:20}))))),r.a.createElement(x.a,{name:"date",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-actions float-right"},s?r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Update"):r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Submit"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:u},"Cancel")))}}))))},ce=function(){var e=Object(n.useContext)(w),t=e.modalText,a=e.showInfoModal,o=e.setShowInfoModal,c=e.actionFunction,l=function(){return o(!1)};return r.a.createElement(n.Fragment,null,r.a.createElement(Y.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:a,onHide:l},r.a.createElement(Y.a.Header,{closeButton:!0},r.a.createElement(Y.a.Title,null,"Please confirm")),r.a.createElement(Y.a.Body,null,t),r.a.createElement(Y.a.Footer,null,r.a.createElement(C.a,{variant:"primary",onClick:c},"Yes"),r.a.createElement(C.a,{variant:"secondary",onClick:l},"Cancel"))))},le=(a(296),function(e){var t,a=e.expense,o=e.setting,c=N._currentValue,l=Object(n.useState)(!1),i=Object(b.a)(l,2),s=i[0],m=i[1],u=Object(n.useState)(),d=Object(b.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)(),g=Object(b.a)(E,2),h=g[0],v=g[1],y=Object(n.useState)(!1),x=Object(b.a)(y,2),S=x[0],O=x[1],k="GBD"===o.currency?"\xa3":"Dollar"===o.currency?"$":"\u20ac",Y=function(e,t,a){m(e),f(t),v(a)},C=Object(n.useContext)(te),j=C.removeExpense,M=C.updateExpense,D=C.showMore;return r.a.createElement(w.Provider,{value:{modalText:p,showInfoModal:s,setShowInfoModal:m,actionFunction:function(){j(h)},showModal:S,setShowModal:O,expense:a,onUpdate:!0,submitExpense:function(e){e.id=a._id,M(e)}}},r.a.createElement(ce,null),r.a.createElement(oe,{setting:o}),r.a.createElement("span",{className:D?"card_more":"card"},r.a.createElement("div",{style:{background:"rgb(249, 248, 248)"}},r.a.createElement("div",{className:D?"card_title_more":"card_title"}," ",a.title)),r.a.createElement("div",{className:"card_date"},(t=a.createdAt,ee()(t,"x").format("MM/DD/YYYY"))),r.a.createElement("div",{className:D?"card_group":"card_group invisible"},"Group: ",a.group),r.a.createElement("div",{className:D?"card_group":"card_group invisible"},"Creator: ",o.creatorEmail),r.a.createElement("div",{className:D?"card_description":"card_description invisible"},a.description),"Expense"===a.tag?r.a.createElement("div",{className:"card_price_expense"},"-",a.price," ",k," "):r.a.createElement("div",{className:"card_price_income"},a.price," ",k," "),c.userId===o.creatorId?r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"btn card_removeButton",onClick:function(){return Y(!0,"Are you sure whant to delete this item?",a)}},r.a.createElement("i",null,r.a.createElement(ne.c,{size:20}))),r.a.createElement("button",{className:"btn card_editButton",onClick:function(){return O(!S)}},r.a.createElement("i",null,r.a.createElement(ne.b,{size:20})))):r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"btn card_removeButton disabled",disabled:!0,onClick:function(){return Y(!0,"Are you sure whant to delete this item?",a)}},r.a.createElement("i",null,r.a.createElement(ne.c,{size:20}))),r.a.createElement("button",{className:"btn card_editButton disabled",disabled:!0,onClick:function(){return O(!S)}},r.a.createElement("i",null,r.a.createElement(ne.b,{size:20}))))))}),ie=a(41),se=a(245),me=function(){var e=Object(n.useContext)(w),t=e.showModal,a=e.setShowModal,o=e.showImportModal,c=e.setShowIportModal,l=Object(n.useContext)(te),i=l.setShowMore,s=l.showMore,m=l.allExpenses,u=l.settings;return r.a.createElement("span",{className:"card_first card"},r.a.createElement(n.Fragment,null,r.a.createElement(j,null),r.a.createElement("div",{className:"row d-flex align-self-center"},r.a.createElement("button",{className:"btn_one",onClick:function(){return a(!t)}},r.a.createElement("i",null,r.a.createElement(ie.b,{size:30}))),r.a.createElement("button",{className:"btn_upload",onClick:function(){return c(!o)}},r.a.createElement("i",null,r.a.createElement(ie.d,{size:25}))),m.length?r.a.createElement("button",{className:"btn_one",onClick:function(){return i(!s)}},s?r.a.createElement("i",null,r.a.createElement(se.a,{size:30})):r.a.createElement("i",null,r.a.createElement(se.b,{size:30}))):null),t&&r.a.createElement(n.Fragment,null,r.a.createElement(oe,{setting:u[0]}))))},ue=(a(578),function(){var e=Object(n.useContext)(te),t=e.allExpenses,a=e.settings;return r.a.createElement(n.Fragment,null,r.a.createElement(me,null),t.map(function(e){return a.map(function(t){return e.creatorId===t.creatorId?r.a.createElement(le,{className:"expenses_list",key:e._id,expense:e,setting:t}):null})}))}),de=function(){var e=Object(n.useContext)(te),t=e.getAllOnFilter,a=e.getAll,o=ee()().format("MM/DD/YYYY"),c=ee()().subtract(1,"months").format("MM/DD/YYYY"),l=Object(n.useState)(new Date(c)),i=Object(b.a)(l,2),s=i[0],m=i[1],u=Object(n.useState)(new Date(o)),d=Object(b.a)(u,2),p=d[0],f=d[1],E=function(e){return ee()(e).format("MM/DD/YYYY")},g=function(e,n){var r={dateFrom:"",dateTo:"",tag:n};switch(e){case"today":r={dateFrom:ee()().format("MM/DD/YYYY"),dateTo:ee()().format("MM/DD/YYYY"),tag:n},t(r);break;case"week":r={dateFrom:ee()().startOf("week").format("MM/DD/YYYY"),dateTo:ee()().endOf("week").format("MM/DD/YYYY"),tag:n},t(r);break;case"month":r={dateFrom:ee()().startOf("month").format("MM/DD/YYYY"),dateTo:ee()().endOf("month").format("MM/DD/YYYY"),tag:n},t(r);break;case"year":r={dateFrom:ee()().startOf("year").format("MM/DD/YYYY"),dateTo:ee()().endOf("year").format("MM/DD/YYYY"),tag:n},t(r);break;case"all":a(r.tag);break;default:r={dateFrom:ee()().startOf("month").format("MM/DD/YYYY"),dateTo:ee()().endOf("month").format("MM/DD/YYYY"),tag:n},t(r)}};return r.a.createElement(n.Fragment,null,r.a.createElement(x.d,{initialValues:{dateFrom:c,dateTo:o,tag:"All"},validationSchema:S.object().shape({dateFrom:S.date().required("Date is required"),dateTo:S.date().required("Date is required"),tag:S.string()}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,a=e.values,n=e.touched,o=e.setFieldValue,c=e.handleChange,l=e.handleBlur;return r.a.createElement(x.c,null,r.a.createElement("div",{className:"form-group row col-sm-12  justify-content-center mb-3"},r.a.createElement("button",{type:"button",className:" col-sm-2 btn btn_with_line",onClick:function(){g("today",a.tag),o("dateFrom",ee()().format("MM/DD/YYYY")),o("dateTo",ee()().format("MM/DD/YYYY")),m(ee()()._d),f(ee()()._d)}},"Today"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){g("week",a.tag),o("dateFrom",ee()().startOf("week").format("MM/DD/YYYY")),o("dateTo",ee()().endOf("week").format("MM/DD/YYYY")),m(ee()().startOf("week")._d),f(ee()().endOf("week")._d)}},"This week"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){g("month",a.tag),o("dateFrom",ee()().startOf("month").format("MM/DD/YYYY")),o("dateTo",ee()().endOf("month").format("MM/DD/YYYY")),m(ee()().startOf("month")._d),f(ee()().endOf("month")._d)}},"This month"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){g("year",a.tag),o("dateFrom",ee()().startOf("year").format("MM/DD/YYYY")),o("dateTo",ee()().endOf("year").format("MM/DD/YYYY")),m(ee()().startOf("year")._d),f(ee()().endOf("year")._d)}},"This year"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){return g("all",a.tag)}},"All")),r.a.createElement("div",{className:"form-group row col-sm-12  justify-content-center mb-2"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:" col-form-label",htmlFor:"title"},"Type:"),r.a.createElement("div",{className:"ml-3 mr-2"},r.a.createElement("select",{name:"tag",onChange:c,onBlur:l,value:a.tag,className:"custom-select mr-sm-2 form-control"+(t.tag&&n.tag?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:"All"},"All"),r.a.createElement("option",{value:"Expense"},"Expenses"),r.a.createElement("option",{value:"Income"},"Incomes")),r.a.createElement(x.a,{name:"tag",component:"div",className:"invalid-feedback"}))),r.a.createElement("label",{className:" col-form-label ml-4",htmlFor:"dateFrom"},"From:"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2 mr-sm-2 ml-3 mr-3"},r.a.createElement(ae.a,{selected:s,startDate:s,endDate:p,className:"form-control not-round-right-corner"+(t.dateFrom&&n.dateFrom?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",null,a.dateFrom)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"dateFrom",placeholder:"Enter date",onChange:function(e){o("dateFrom",E(e)),m(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(ne.a,{className:"",size:20}))))),r.a.createElement(x.a,{name:"dateTo",component:"div",className:"invalid-feedback"}),r.a.createElement("label",{className:"col-form-label ml-5 mr-3",htmlFor:"dateTo"},"To:"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement(ae.a,{selected:p,startDate:s,endDate:p,className:"form-control not-round-right-corner"+(t.dateTo&&n.dateTo?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",null,a.dateTo)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"dateTo",placeholder:"Enter date",onChange:function(e){o("dateTo",E(e)),f(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(ne.a,{className:"",size:20}))))),r.a.createElement(x.a,{name:"dateTo",component:"div",className:"invalid-feedback"}),r.a.createElement("div",{className:"float-right ml-5"},r.a.createElement("button",{type:"submit",className:"btn btn_main"},"Filter"))))}}))},pe=a(50),fe=function(){var e=Object(n.useContext)(te).allExpenses,t=Object(n.useState)([]),a=Object(b.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(!0),i=Object(b.a)(l,2),s=i[0],m=i[1],u=Object(n.useState)(!0),d=Object(b.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)(!0),g=Object(b.a)(E,2),h=g[0],v=g[1],y={first:[]};Object(n.useEffect)(function(){!function(e){var t=[],a={expenses:0,incomes:0,budget:0};e.forEach(function(e){e.date=ee()(e.createdAt,"x").format("DD/MM"),"Expense"===e.tag?(a.expenses=a.expenses+parseFloat(e.price),a.budget=a.budget-parseFloat(e.price),t.push({date:e.date,Expenses:a.expenses.toFixed(2),Incomes:a.incomes.toFixed(2),Budget:a.budget.toFixed(2)})):(a.incomes=a.incomes+parseFloat(e.price),a.budget=a.budget+parseFloat(e.price),t.push({date:e.date,Expenses:a.expenses.toFixed(2),Incomes:a.incomes.toFixed(2),Budget:a.budget.toFixed(2)}))}),y.first.push(Math.min.apply(Math,t.map(function(e){return e.Incomes}))),y.first.push(Math.max.apply(Math,t.map(function(e){return e.Incomes}))),y.first.push(Math.min.apply(Math,t.map(function(e){return e.Budget}))),y.first.push(Math.max.apply(Math,t.map(function(e){return e.Budget}))),y.first.push(Math.min.apply(Math,t.map(function(e){return e.Expenses}))),y.first.push(Math.max.apply(Math,t.map(function(e){return e.Expenses}))),y.smallest=Math.min.apply(Math,y.first.map(function(e){return e})),y.biggest=Math.max.apply(Math,y.first.map(function(e){return e})),c(t)}(e)},[e]);return r.a.createElement(n.Fragment,null,e.length?r.a.createElement(pe.e,{width:"95%",height:150},r.a.createElement(pe.b,{data:o,margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,h?r.a.createElement("linearGradient",{id:"colorExp",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#FF0000",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#FF0000",stopOpacity:0})):null,",",p?r.a.createElement("linearGradient",{id:"colorInc",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})):null,",",s?r.a.createElement("linearGradient",{id:"colorBud",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#0000FF",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#0000FF",stopOpacity:0})):null),r.a.createElement(pe.c,{vertical:!1,horizontal:!1}),r.a.createElement(pe.d,{onClick:function(e){!function(e){switch(e.dataKey){case"Budget":m(!s);break;case"Incomes":f(!p);break;case"Expenses":v(!h);break;default:console.log("incorect name")}}(e)}}),r.a.createElement(pe.f,null),r.a.createElement(pe.a,{type:"monotone",dataKey:"Budget",stroke:"#0000FF",fillOpacity:1,fill:"url(#colorBud)"}),r.a.createElement(pe.a,{type:"monotone",dataKey:"Incomes",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorInc)"}),r.a.createElement(pe.a,{type:"monotone",dataKey:"Expenses",stroke:"#FF0000",fillOpacity:1,fill:"url(#colorExp)"}),r.a.createElement(pe.g,{dataKey:"date",fontSize:"10"}),r.a.createElement(pe.h,{type:"number",domain:[y.smallest,y.biggest],allowDataOverflow:!0,fontSize:"10"}))):null)},Ee=a(370),ge=a(365),he=a.n(ge),be=a(248),ve=a.n(be),ye=function(){var e=Object(n.useContext)(w),t=e.modalInfo,a=e.showImportModal,o=e.setShowIportModal,c=Object(n.useContext)(te),l=c.submitExpenseFromImport,i=c.setAllExpenses,s=Object(n.useState)([]),m=Object(b.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(!1),f=Object(b.a)(p,2),E=f[0],g=f[1],h=Object(n.useState)(!1),v=Object(b.a)(h,2),N=v[0],x=v[1],S=function(){return o(!1)},O=function(e){he.a.parse(e,{complete:function(e){k(e)}})},k=function(){var e=Object(Q.a)(W.a.mark(function e(a){var n,r,o,c;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{title:"",description:"",price:"",group:"",createdAt:"",tag:""}],r=[],e.next=4,j(a.data[0]);case 4:(o=e.sent).forEach(function(e,t){"title"===e.name.toLowerCase()&&(n[0].title=o[t].id),"description"===e.name.toLowerCase()&&(n[0].description=o[t].id),"price"===e.name.toLowerCase()&&(n[0].price=o[t].id),"group"===e.name.toLowerCase()&&(n[0].group=o[t].id),"date"===e.name.toLowerCase()&&(n[0].createdAt=o[t].id),"type"===e.name.toLowerCase()&&(n[0].tag=o[t].id)}),a.data.forEach(function(e,t){0!==t&&e[0].length&&r.push({title:e[n[0].title],description:e[n[0].description],price:e[n[0].price],group:e[n[0].group],createdAt:e[n[0].createdAt],tag:e[n[0].tag]})}),c=[],r.forEach(function(){var e=Object(Q.a)(W.a.mark(function e(a){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,l(a);case 3:if(e.t1=e.sent,e.t0.push.call(e.t0,e.t1),n.length!==c.length){e.next=12;break}return e.next=8,i(c);case 8:t(!0,"Confirmation","File was uploaded"),g(!1),d([]),S();case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),j=function(e){return new Promise(function(a,n){var r=[],o=[];if(["Title","Price","Group","Date","Type","Description"].forEach(function(t){var a=!1;e.forEach(function(e,n){t.toLocaleLowerCase()===e.toLowerCase()&&(a=!0,r.push({name:t,id:n}))}),a||o.push(t)}),o.length){var c="";o.forEach(function(e,t){o.length===t+1?c+=' "'.concat(e,'".'):c+=' "'.concat(e,'";')}),t(!0,"Error","Inappropriate file. Missing fields in the file:".concat(c)),g(!1),d([]),S()}else a(r)})},M=Object(n.useCallback)(function(e){e.length&&(d(function(){return[e[0]]}),x(!1))},[]),D=Object(Ee.a)({onDrop:M,accept:"text/csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",minSize:0,maxSize:50173280}),F=D.isDragActive,A=D.getRootProps,$=D.getInputProps,I=D.isDragReject,_=D.rejectedFiles,B=_.length>0&&_[0].size>50173280;return r.a.createElement(n.Fragment,null,r.a.createElement(Y.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:a,onHide:S},r.a.createElement(Y.a.Header,{closeButton:!0},r.a.createElement(Y.a.Title,null,"Import expenses ",E)),E?r.a.createElement(y,null):r.a.createElement(n.Fragment,null,r.a.createElement(Y.a.Body,null,N?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Please select a file first!"):null,r.a.createElement("div",null,r.a.createElement("ul",null,u.map(function(e){return r.a.createElement("li",{className:"",key:e.name},"".concat((a=e.name,a.length>20?a.substring(0,20)+"...":a),"  - (").concat((t=e.size)<1024?t+" Bytes":t<1048576?(t/1024).toFixed(3)+" KB":t<1073741824?(t/1048576).toFixed(3)+" MB":(t/1073741824).toFixed(3)+" GB",")"),r.a.createElement("button",{className:"btn_remove",onClick:function(){return function(e){var t=[];u.map(function(a){a.name!==e.name&&a.size!==e.size&&t.push(a)}),d(t)}(e)}},r.a.createElement("i",null,r.a.createElement(ie.a,{size:20}))));var t,a})),r.a.createElement("div",Object.assign({className:"drop_zone container text-center "},A()),r.a.createElement("input",$()),!F&&r.a.createElement("i",null,"Click here or drop a file to upload! ",r.a.createElement(ie.d,{size:20})),F&&!I&&"Drop it here!",I&&"File type not accepted, sorry!",B&&r.a.createElement("div",{className:"text-danger mt-2"},"File is too large."))))),r.a.createElement(Y.a.Footer,null,r.a.createElement(C.a,{type:"button",variant:"primary",disabled:E,onClick:function(){return function(e){if(e.length){g(!0);var t=e[0].name.split(".");if("csv"===(t=t[t.length-1].toLowerCase()))O(e[0]);else{var a=new FileReader;a.onload=function(e){var t=e.target.result,a=ve.a.read(t,{type:"binary",header:1,cellDates:!0,dateNF:"DD/MM/YYYY"}),n=a.SheetNames[0],r=a.Sheets[n],o=ve.a.utils.sheet_to_csv(r,{header:1,raw:!1});O(o)},a.readAsBinaryString(e[0])}}else x(!0)}(u)}},"Upload"),r.a.createElement(C.a,{variant:"secondary",disabled:E,onClick:S},"Cancel"))))},Ne=a(85),we=(a(688),a(366)),xe=a.n(we),Se=function(e,t,a){var n=ee()().format("YYYY-MM-DD"),r=0;return a.forEach(function(e){"Expense"===e.tag&&n===ee()(e.createdAt,"x").format("YYYY-MM-DD")&&(r+=parseFloat(e.price))}),r=r.toFixed(2),t[0].dailyBudget.length?(e=e.replace("{DAY_EXPENSES}",r).replace("{CURRENCY}",Ae(t[0])),"".concat(e," and your daily budget is ").concat(t[0].dailyBudget," ").concat(Ae(t[0]))):e.replace("{DAY_EXPENSES}",r).replace("{CURRENCY}",Ae(t[0]))},Oe=function(e,t,a){var n=ee()().startOf("year").format("YYYY-MM-DD"),r=ee()().endOf("year").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Expense"===e.tag&&n<=ee()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=ee()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),e.replace("{YEAR_EXPENSES}",o).replace("{CURRENCY}",Ae(t[0]))},ke=function(e,t,a){var n=ee()().startOf("week").format("YYYY-MM-DD"),r=ee()().endOf("week").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Expense"===e.tag&&n<=ee()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=ee()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),t[0].weeklyBudget.length?(e=e.replace("{WEEK_EXPENSES}",o).replace("{CURRENCY}",Ae(t[0])),"".concat(e," and your weekly budget is ").concat(t[0].weeklyBudget," ").concat(Ae(t[0]))):e.replace("{WEEK_EXPENSES}",o).replace("{CURRENCY}",Ae(t[0]))},Ye=function(e,t,a){var n=ee()().startOf("month").format("YYYY-MM-DD"),r=ee()().endOf("month").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Expense"===e.tag&&n<=ee()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=ee()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),t[0].monthlyBudget.length?(e=e.replace("{MONTH_EXPENSES}",o).replace("{CURRENCY}",Ae(t[0])),"".concat(e," and your monthly budget is ").concat(t[0].monthlyBudget," ").concat(Ae(t[0]))):e.replace("{MONTH_EXPENSES}",o).replace("{CURRENCY}",Ae(t[0]))},Ce=function(e,t,a){var n=ee()().format("YYYY-MM-DD"),r=0;return a.forEach(function(e){"Income"===e.tag&&n===ee()(e.createdAt,"x").format("YYYY-MM-DD")&&(r+=parseFloat(e.price))}),r=r.toFixed(2),e.replace("{DAY_INCOME}",r).replace("{CURRENCY}",Ae(t[0]))},je=function(e,t,a){var n=ee()().startOf("year").format("YYYY-MM-DD"),r=ee()().endOf("year").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Income"===e.tag&&n<=ee()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=ee()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),e.replace("{YEAR_INCOME}",o).replace("{CURRENCY}",Ae(t[0]))},Me=function(e,t,a){var n=ee()().startOf("week").format("YYYY-MM-DD"),r=ee()().endOf("week").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Income"===e.tag&&n<=ee()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=ee()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),e.replace("{WEEK_INCOME}",o).replace("{CURRENCY}",Ae(t[0]))},De=function(e,t,a){var n=ee()().startOf("month").format("YYYY-MM-DD"),r=ee()().endOf("month").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Income"===e.tag&&n<=ee()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=ee()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),e.replace("{MONTH_INCOME}",o).replace("{CURRENCY}",Ae(t[0]))},Fe=function(e,t,a){var n=[];a.forEach(function(e){if("Expense"===e.tag){var t=!1;n.forEach(function(a){a.groupName===e.group&&(t=!0,a.amount+=parseFloat(e.price))}),t||n.push({groupName:e.group,amount:parseFloat(e.price)})}}),n.forEach(function(e){e.amount=e.amount.toFixed(2)}),n=n.sort(function(e,t){return parseFloat(t.amount)-parseFloat(e.amount)});var r="";return n.forEach(function(e,a){n.length===a+1?r+="\u2022 ".concat(e.groupName," - ").concat(e.amount," ").concat(Ae(t[0]),"."):r+="\u2022 ".concat(e.groupName," - ").concat(e.amount," ").concat(Ae(t[0]),"; ")}),e.includes("{CATEGORY_NAME}")?"".concat(e.replace("{CATEGORY_NAME}",n[0].groupName)," - ").concat(n[0].amount," ").concat(Ae(t[0]),"."):e.replace("{All_GROUPS}",r)},Ae=function(e){return"GBD"===e.currency?"\xa3":"Dollar"===e.currency?"$":"\u20ac"},$e=function(){var e=Object(n.useContext)(te),t=e.settingsForBot,a=e.allExpensesForBot,o=e.user,c=N._currentValue;Object(n.useEffect)(function(){c.token&&(Object(Ne.dropMessages)(),l("Hello"))},[c.token]);var l=function(e){Object(Ne.toggleMsgLoader)();var n={userMessage:e};fetch("/watson",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){Object(Ne.toggleMsgLoader)(),e.response.forEach(function(e){var n=function(e,t,a,n){return e.includes("{NAME}")?e.replace("{NAME}",n.name).replace("{SURNAME}",n.surname):e.includes("{DAY_EXPENSES}")?e=Se(e,t,a):e.includes("{YEAR_EXPENSES}")?e=Oe(e,t,a):e.includes("{WEEK_EXPENSES}")?e=ke(e,t,a):e.includes("{MONTH_EXPENSES}")?e=Ye(e,t,a):e.includes("{DAY_INCOME}")?e=Ce(e,t,a):e.includes("{YEAR_INCOME}")?e=je(e,t,a):e.includes("{WEEK_INCOME}")?e=Me(e,t,a):e.includes("{MONTH_INCOME}")?e=De(e,t,a):e.includes("{All_GROUPS}")?e=Fe(e,t,a):e.includes("{CATEGORY_NAME}")?e=Fe(e,t,a):e}(e.text,t,a,o);Object(Ne.addResponseMessage)(n)})}).catch(function(e){Object(Ne.toggleMsgLoader)(),console.log(e)})};return r.a.createElement(n.Fragment,null,c.token?r.a.createElement(Ne.Widget,{handleNewUserMessage:l,title:"Budget Buddy",subtitle:"",profileAvatar:xe.a}):null)},Ie=(a(690),function(){var e=N._currentValue,t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(!1),i=Object(b.a)(l,2),s=i[0],m=i[1],u=Object(n.useState)(!1),d=Object(b.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)(!1),g=Object(b.a)(E,2),h=g[0],v=g[1],x=Object(n.useState)([]),S=Object(b.a)(x,2),O=S[0],k=S[1],Y=Object(n.useState)(""),C=Object(b.a)(Y,2),M=C[0],D=C[1],A=Object(n.useState)(),$=Object(b.a)(A,2),I=$[0],_=$[1],B=Object(n.useState)(!1),T=Object(b.a)(B,2),q=T[0],P=T[1],z=Object(n.useState)([]),R=Object(b.a)(z,2),U=R[0],L=R[1],H=Object(n.useState)([]),J=Object(b.a)(H,2),G=J[0],V=J[1],K=Object(n.useState)([]),X=Object(b.a)(K,2),Z=X[0],ae=X[1],ne=Object(n.useState)({}),re=Object(b.a)(ne,2),oe=re[0],ce=re[1],le=function(e,t,a){f(e),D(t),_(a)};Object(n.useEffect)(function(){we()},[]);var ie=function(){c(!0);return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                settingsData {\n                    _id\n                    dailyBudget\n                    weeklyBudget\n                    monthlyBudget\n                    categories\n                    members\n                    currency\n                    creatorId\n                    creatorEmail\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(c(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return console.log(e.data),L.apply(void 0,Object(F.a)(U).concat([e.data.settingsData])),e.data.settingsData}).catch(function(e){return c(!1),le(!0,"Error",e),console.log(e),e})},se=function(t){c(!0);var a={query:"\n              query {\n                expenses {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                  }\n              }",allUsers:t};return fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(c(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return console.log(e.data.expenses),e.data.expenses=be(e.data.expenses,"Expense"),c(!1),e.data.expenses}).catch(function(e){return c(!1),console.log(e),e})},me=function(t){c(!0);var a={query:"\n              query {\n                incomes {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                  }\n              }",allUsers:t};return fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(c(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return e.data.incomes=be(e.data.incomes,"Income"),console.log(e.data.incomes),c(!1),e.data.incomes}).catch(function(e){return c(!1),console.log(e),e})},pe=function(t,a){c(!0);var n={query:"\n            query ExpensesFilter($dateFrom: String!, $dateTo: String!){\n                expensesFilter(dateFrom: $dateFrom, dateTo: $dateTo) {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                }\n            }",variables:{dateFrom:ge(t.dateFrom),dateTo:ge(t.dateTo)},allUsers:a};return fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw c(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.expensesFilter=be(e.data.expensesFilter,"Expense"),c(!1),e.data.expensesFilter}).catch(function(e){throw c(!1),console.log(e),le(!0,"Error",e),e})},Ee=function(t,a){c(!0);var n={query:"\n            query IncomesFilter($dateFrom: String!, $dateTo: String!){\n                incomesFilter(dateFrom: $dateFrom, dateTo: $dateTo) {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                }\n            }",variables:{dateFrom:ge(t.dateFrom),dateTo:ge(t.dateTo)},allUsers:a};return fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw c(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.incomesFilter=be(e.data.incomesFilter,"Income"),c(!1),e.data.incomesFilter}).catch(function(e){throw c(!1),console.log(e),le(!0,"Error",e),e})},ge=function(e){return JSON.stringify(ee()(e).valueOf())},he=function(e){return e.sort(function(e,t){return e=ee()(e.createdAt,"x").format("DD-MM-YYYY").split("-").reverse().join(""),t=ee()(t.createdAt,"x").format("DD-MM-YYYY").split("-").reverse().join(""),e.localeCompare(t)}),e},be=function(e,t){return e.forEach(function(e){e.tag=t}),e},ve=function(e,t){var a=[];return t.map(function(t){t._id===e._id?(t=e,a.push(t)):a.push(t)}),a=he(a)},Ne=function(e,t){var a=[];return t.forEach(function(t){t._id!==e._id&&a.push(t)}),a=he(a)},we=function(){var t=Object(Q.a)(W.a.mark(function t(a){var n,r,o,l,i,s,m,u,d,p,f,E;return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!=a&&"All"!==a){t.next=29;break}if(n=[],U.length){t.next=8;break}return t.next=5,ie();case 5:n=t.sent,t.next=9;break;case 8:n=U;case 9:return r=[],n.forEach(function(e){r.push(e.creatorId)}),t.next=13,se(r);case 13:return o=t.sent,t.next=16,me(r);case 16:if(l=t.sent,i=o.concat(l),i=he(i),k(i),Z.length){t.next=27;break}return t.next=23,fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                userData {\n                    _id\n                    email\n                    name\n                    surname\n                    createdAt\n                    updatedAt\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(c(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return e.data.userData[0]}).catch(function(e){return console.log(e),e});case 23:s=t.sent,ae(i),V(n),ce(s);case 27:t.next=62;break;case 29:if("Expense"!==a){t.next=47;break}if(m=[],U.length){t.next=37;break}return t.next=34,ie();case 34:m=t.sent,t.next=38;break;case 37:m=U;case 38:return u=[],m.forEach(function(e){u.push(e.creatorId)}),t.next=42,se(u);case 42:d=t.sent,d=he(d),k(d),t.next=62;break;case 47:if(p=[],U.length){t.next=54;break}return t.next=51,ie();case 51:p=t.sent,t.next=55;break;case 54:p=U;case 55:return f=[],p.forEach(function(e){f.push(e.creatorId)}),t.next=59,me(f);case 59:E=t.sent,E=he(E),k(E);case 62:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),xe=function(){var e=Object(Q.a)(W.a.mark(function e(t){var a,n,r,o,c,l;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],"All"!==t.tag){e.next=14;break}return U.forEach(function(e){a.push(e.creatorId)}),e.next=5,pe(t,a);case 5:return n=e.sent,e.next=8,Ee(t,a);case 8:r=e.sent,o=n.concat(r),o=he(o),k(o),e.next=29;break;case 14:if("Expense"!==t.tag){e.next=23;break}return U.forEach(function(e){a.push(e.creatorId)}),e.next=18,pe(t,a);case 18:c=e.sent,c=he(c),k(c),e.next=29;break;case 23:return U.forEach(function(e){a.push(e.creatorId)}),e.next=26,Ee(t,a);case 26:l=e.sent,l=he(l),k(l);case 29:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(te.Provider,{value:{currentUser:e,allExpenses:O,setAllExpenses:k,removeExpense:function(t){var a={query:""};a="Expense"===t.tag?{query:"\n                  mutation RemoveExpense($id: ID!) {\n                    removeExpense(expenseId: $id) {\n                    _id\n                     title\n                    }\n                  }\n                ",variables:{id:t._id}}:{query:"\n                  mutation RemoveIncome($id: ID!) {\n                    removeIncome(incomeId: $id) {\n                    _id\n                     title\n                    }\n                  }\n                ",variables:{id:t._id}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){var t=[],a=[];e.data.removeExpense?(t=Ne(e.data.removeExpense,O),a=Ne(e.data.removeExpense,Z),le(!0,"Confirmation","Expense was deleted")):(t=Ne(e.data.removeIncome,O),a=Ne(e.data.removeIncome,Z),le(!0,"Confirmation","Income was deleted")),k(t),ae(a)}).catch(function(e){return console.log(e),e})},isLoading:o,getAllOnFilter:xe,getAll:we,showMore:q,setShowMore:P,submitExpenseFromImport:function(t){var a={query:""},n=ge(t.createdAt);return a="Expense"===t.tag?{query:"\n                          mutation CreateExpense($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createExpense(expenseInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}}:{query:"\n                          mutation CreateIncome($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createIncome(incomeInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.createExpense?(e.data.createExpense.tag="Expense",e.data.createExpense):(e.data.createIncome.tag="Income",e.data.createIncome)}).catch(function(e){throw console.log(e),le(!0,"Error",e),e})},settings:U,settingsForBot:G,allExpensesForBot:Z,user:oe,updateExpense:function(t){c(!0);var a={query:""};t.date=ge(t.date),t.updateDate=ge(t.updateDate),a="Expense"===t.tag?{query:"\n                          mutation UpdateExpense($id: ID!, $title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            updateExpense(expenseId: $id, expenseInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{id:t.id,title:t.title,description:t.description,price:t.price,group:t.group,createdAt:t.date,updatedAt:t.updateDate}}:{query:"\n                          mutation UpdateIncome($id: ID!, $title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            updateIncome(incomeId: $id, incomeInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{id:t.id,title:t.title,description:t.description,price:t.price,group:t.group,createdAt:t.date,updatedAt:t.updateDate}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw c(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;var t=[],a=[];e.data.updateExpense?(e.data.updateExpense.tag="Expense",console.log(e.data.updateExpense),t=ve(e.data.updateExpense,O),a=ve(e.data.updateExpense,Z),le(!0,"Confirmation","Expense was updated")):(e.data.updateIncome.tag="Income",console.log(e.data.updateIncome),t=ve(e.data.updateIncome,O),a=ve(e.data.updateIncome,Z),le(!0,"Confirmation","Income was updated")),k(t),ae(a),c(!1)}).catch(function(e){throw c(!1),console.log(e),le(!0,"Error",e),e})}}},r.a.createElement(w.Provider,{value:{showInfoModal:p,setShowInfoModal:f,modalHeader:M,modalText:I,showModal:s,submitExpense:function(t){var a={query:""};c(!0);var n=ge(t.date);a="Expense"===t.tag?{query:"\n                          mutation CreateExpense($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createExpense(expenseInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}}:{query:"\n                          mutation CreateIncome($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createIncome(incomeInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw c(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;c(!1),m(!1),e.data.createExpense?(le(!0,"Confirmation","Expense was created"),e.data.createExpense.tag="Expense",k([].concat(Object(F.a)(O),[e.data.createExpense])),ae([].concat(Object(F.a)(Z),[e.data.createExpense]))):(le(!0,"Confirmation","Income was created"),e.data.createIncome.tag="Income",k([].concat(Object(F.a)(O),[e.data.createIncome])),ae([].concat(Object(F.a)(Z),[e.data.createIncome])))}).catch(function(e){throw c(!1),m(!1),console.log(e),le(!0,"Error",e),e})},setShowModal:m,modalInfo:le,showImportModal:h,setShowIportModal:v}},r.a.createElement(de,null),r.a.createElement(n.Fragment,null,oe._id?r.a.createElement($e,null):null),r.a.createElement(fe,null),o?r.a.createElement(y,null):r.a.createElement(n.Fragment,null,r.a.createElement(j,null),r.a.createElement(ye,null),r.a.createElement("div",{className:"center"},r.a.createElement(ue,null)))))}),_e=a(86),Be=a(723),Te=a(714),qe=(a(692),function(){var e=Object(n.useState)({newCategorie:!1,newMember:!1,emailValidation:!1}),t=Object(b.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)([]),l=Object(b.a)(c,2),i=l[0],s=l[1],m=Object(n.useState)([]),u=Object(b.a)(m,2),d=u[0],p=u[1],f=N._currentValue,E=Object(n.useState)({}),g=Object(b.a)(E,2),h=g[0],v=g[1],O=Object(n.useState)({}),k=Object(b.a)(O,2),Y=k[0],C=k[1],M=Object(n.useState)({}),D=Object(b.a)(M,2),A=D[0],$=D[1],I=Object(n.useState)(!1),_=Object(b.a)(I,2),B=_[0],T=_[1],q=Object(n.useState)(!1),P=Object(b.a)(q,2),z=P[0],R=P[1],U=Object(n.useState)(""),L=Object(b.a)(U,2),H=L[0],J=L[1],G=Object(n.useState)(),V=Object(b.a)(G,2),K=V[0],X=V[1],W=function(e,t,a){R(e),J(t),X(a)},Q=Object(n.useState)("systemSettings"),Z=Object(b.a)(Q,2),te=Z[0],ae=Z[1];Object(n.useEffect)(function(){re(),oe()},[]);var re=function(){T(!0);return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                userData {\n                    _id\n                    email\n                    name\n                    surname\n                    createdAt\n                    updatedAt\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}}).then(function(e){if(T(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return v(e.data.userData[0]),C(e.data.userData[0]),T(!1),e.data.userData[0]}).catch(function(e){return T(!1),console.log(e),e})},oe=function(){T(!0);return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                settingsData {\n                    _id\n                    dailyBudget\n                    weeklyBudget\n                    monthlyBudget\n                    categories\n                    members\n                    currency\n                    creatorEmail\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}}).then(function(e){if(T(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){var t=[];$(e.data.settingsData[0]),s(e.data.settingsData[0].categories.split(";")),e.data.settingsData[0].members.split(";").forEach(function(e){e.length&&t.push(e)}),p(t)}).catch(function(e){return T(!1),W(!0,"Error",e),console.log(e),e})},ce=function(e){var t=e.target.value;return 1===t.length&&"."===t&&(t=t.slice(0,-1)),2===t.length&&"00"===t&&(t=t.slice(0,-1)),t.split(".").length-1>1&&(t=t.slice(0,-1)),(t=t.indexOf(".")>=0?t.substr(0,t.indexOf("."))+t.substr(t.indexOf("."),3):t).replace(/[^\d.-]/g,"").replace("-","")};return B?r.a.createElement(y,null):r.a.createElement(n.Fragment,null,r.a.createElement(w.Provider,{value:{showInfoModal:z,setShowInfoModal:R,modalHeader:H,modalText:K,modalInfo:W}},r.a.createElement(j,null),r.a.createElement(Be.a,{id:"settings-tab",activeKey:te,onSelect:function(e){return ae(e)}},r.a.createElement(Te.a,{eventKey:"userSettings",title:"userSettings"===te?r.a.createElement("span",{style:{color:"#ea97c4"}},r.a.createElement(ie.e,{size:20}),"\xa0 User "):r.a.createElement("span",null,r.a.createElement(ie.e,{size:20,color:"#aeaeae"}),"\xa0 User ")},r.a.createElement(x.d,{enableReinitialize:!0,initialValues:{firstName:Y.name||"",lastName:Y.surname||"",email:Y.email||""},validationSchema:S.object().shape({firstName:S.string().required("First Name is required"),lastName:S.string().required("Last Name is required"),email:S.string().email("Email is invalid").required("Email is required")}),onSubmit:function(e){!function(e){e.updatedAt=JSON.stringify(ee()(new Date).valueOf()),T(!0);var t={query:"\n\n                              mutation UpdateUser($id: ID!, $name: String!, $surname: String!, $email: String!, $updatedAt: String!) {\n                                updateUser(userId: $id, name: $name, surname: $surname, email: $email, updatedAt: $updatedAt) {\n                                    name\n                                    surname\n                                    email\n                                  }\n                              }\n                            ",variables:{id:h._id,name:e.firstName,surname:e.lastName,email:e.email,updatedAt:e.updatedAt}};fetch("/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}}).then(function(e){if(!e.ok)throw T(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;console.log(e),C(e.data.updateUser),W(!0,"Confirmation","User was updated"),T(!1)}).catch(function(e){throw T(!1),console.log(e),W(!0,"Error",e),e})}(e)},render:function(e){var t=e.errors,a=e.touched;return r.a.createElement(x.c,{className:"settings-form",id:"formContentUserSettings"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h4",null,"User settings")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"firstName"},"First Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(x.b,{placeholder:"First name",name:"firstName",type:"text",className:"form-control"+(t.firstName&&a.firstName?" is-invalid":"")}),r.a.createElement(x.a,{name:"firstName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"lastName"},"Last Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(x.b,{placeholder:"Last name",name:"lastName",type:"text",className:"form-control"+(t.lastName&&a.lastName?" is-invalid":"")}),r.a.createElement(x.a,{name:"lastName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(x.b,{placeholder:"Email",name:"email",type:"text",className:"form-control"+(t.email&&a.email?" is-invalid":"")}),r.a.createElement(x.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn_main update-btn"},"Update")))}})),r.a.createElement(Te.a,{eventKey:"systemSettings",title:"systemSettings"===te?r.a.createElement("span",{style:{color:"#ea97c4"}},r.a.createElement(ie.c,{size:20}),"\xa0 System "):r.a.createElement("span",null,r.a.createElement(ie.c,{size:20,color:"#aeaeae"}),"\xa0 System ")},r.a.createElement(x.d,{validateOnChange:!0,enableReinitialize:!0,initialValues:{dailyBudget:A.dailyBudget||"",weeklyBudget:A.weeklyBudget||"",monthlyBudget:A.monthlyBudget||"",categories:A.categories||"",newCategorie:"",newMember:"",members:A.members||"",currency:A.currency||""},validationSchema:S.object().shape({dailyBudget:S.number(),weeklyBudget:S.number(),monthlyBudget:S.number(),categories:S.string(),newCategorie:S.string(),memebers:S.string().email("Email is invalid"),newMember:S.string().email("Email is invalid"),currency:S.string().required("Currency is required")}),onSubmit:function(e){!function(e){T(!0);var t="",a="";i.forEach(function(e,t){i.length!=t+1?a+="".concat(e,";"):a+=e}),d.length&&d.forEach(function(e,a){d.length!=a+1?t+="".concat(e,";"):t+=e});var n={query:"\n\n                              mutation UpdateSettings($id: ID!, $dailyBudget: String!, $weeklyBudget: String!, $monthlyBudget: String!, $categories: String!, $members: String!, $currency: String!) {\n                                updateSettings(settingsId: $id, dailyBudget: $dailyBudget, weeklyBudget: $weeklyBudget, monthlyBudget: $monthlyBudget, categories: $categories, members: $members, currency: $currency) {\n                                    _id\n                                    dailyBudget\n                                    weeklyBudget\n                                    monthlyBudget\n                                    categories\n                                    members\n                                    currency\n                                  }\n                              }\n                            ",variables:{id:A._id,dailyBudget:e.dailyBudget,weeklyBudget:e.weeklyBudget,monthlyBudget:e.monthlyBudget,categories:a,members:t,currency:e.currency}};fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}}).then(function(e){if(!e.ok)throw T(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;var t=[];$(e.data.updateSettings),s(e.data.updateSettings.categories.split(";")),e.data.updateSettings.members.split(";").forEach(function(e){e.length&&t.push(e)}),p(t),T(!1),W(!0,"Confirmation","Settings was updated")}).catch(function(e){throw T(!1),console.log(e),W(!0,"Error",e),e})}(e)},render:function(e){var t=e.errors,n=e.values,c=e.touched,l=e.handleChange,m=e.setFieldValue,u=e.handleBlur;e.validateField;return r.a.createElement(x.c,{id:"formContentSystemSettings"},r.a.createElement("div",{className:"form-group row col-sm-12",style:{paddingTop:"25px"}},r.a.createElement("div",{className:"col-sm-4 "},r.a.createElement("div",{className:"p-2 settings-form"},r.a.createElement("h4",null,"Budget settings")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-5",htmlFor:"title"},"Daily budget"),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("div",{className:"input-group "},r.a.createElement("input",{placeholder:"0.00",name:"dailyBudget",onChange:function(e){m("dailyBudget",ce(e))},value:n.dailyBudget,className:"form-control"+(t.dailyBudget&&c.dailyBudget?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},"GBD"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\xa3")):"Dollar"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"$")):r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\u20ac"))),r.a.createElement(x.a,{name:"dailyBudget",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-5",htmlFor:"title"},"Weekly budget"),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("input",{placeholder:"0.00",name:"weeklyBudget",onChange:function(e){m("weeklyBudget",ce(e))},value:n.weeklyBudget,className:"form-control"+(t.weeklyBudget&&c.weeklyBudget?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},"GBD"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\xa3")):"Dollar"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"$")):r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\u20ac"))),r.a.createElement(x.a,{name:"weeklyBudget",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-5",htmlFor:"title"},"Monthly budget"),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("input",{placeholder:"0.00",name:"monthlyBudget",onChange:function(e){m("monthlyBudget",ce(e))},value:n.monthlyBudget,className:"form-control"+(t.monthlyBudget&&c.monthlyBudget?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},"GBD"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\xa3")):"Dollar"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"$")):r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\u20ac"))),r.a.createElement(x.a,{name:"monthlyBudget",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-5",htmlFor:"title"},"Currency"),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("select",{name:"currency",onChange:l,onBlur:u,value:n.currency,className:"custom-select mr-sm-2 form-control"+(t.currency&&c.currency?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:""},"Select a currency"),r.a.createElement("option",{value:"Euro"},"Euro \u20ac"),r.a.createElement("option",{value:"Dollar"},"Dollar $"),r.a.createElement("option",{value:"GBD"},"Pound \xa3")),r.a.createElement(x.a,{name:"currency",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"col-sm-4 "},r.a.createElement("div",{className:"p-2 settings-form"},r.a.createElement("h4",null,"Categories settings")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4",htmlFor:"title"},"Add category"),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("input",{placeholder:"Category name",name:"newCategorie",onChange:function(e){var t;m("newCategorie",(t=e,a.newCategorie&&o(Object(_e.a)({},a,{newCategorie:!1})),t.target.value.replace(/[\/\/|\/;&$%@"<>()+{}.',=_~`!#^*\/?]/g,"")))},value:n.newCategorie,className:"form-control col-sm-8 mr-1"+(a.newCategorie?" is-invalid":"")}),r.a.createElement("button",{type:"button",onClick:function(e){m("categories",function(e,t){if(void 0===e.target.value||!e.target.value.length)return o(Object(_e.a)({},a,{newCategorie:!0})),t;e.target.value=e.target.value.toLowerCase();var n=e.target.value.charAt(0).toUpperCase()+e.target.value.slice(1),r=!1;i.forEach(function(e){e===n&&(r=!0)}),r?W(!0,"Error","This category already in the category list."):s([].concat(Object(F.a)(i),[n]))}(e,n.categories)),m("newCategorie","")},value:n.newCategorie,className:"col-sm-3 btn btn_main"},"Add"),r.a.createElement(x.a,{name:"newCategorie",component:"div",className:"invalid-feedback"}),a.newCategorie?r.a.createElement("div",{className:"invalid-feedback"}," Category field can't be empty"):null))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4",htmlFor:"title"},"All categories"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("ul",{className:"list-group col-sm-9"},i.map(function(e){return r.a.createElement("li",{className:"row",key:e},r.a.createElement("span",{className:"list-group-item list-item col-sm-12"},e,r.a.createElement("button",{className:"btn card_removeButton",type:"button",onClick:function(){return function(e){1===i.length?W(!0,"Error","You can't delete all categories."):s(i.filter(function(t){return t!==e}))}(e)}},r.a.createElement("i",null,r.a.createElement(ne.c,{size:20})))))}))))),r.a.createElement("div",{className:"col-sm-4 "},r.a.createElement("div",{className:"p-2 settings-form"},r.a.createElement("h4",null,"Family settings")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4",htmlFor:"title"},"Add member"),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("input",{placeholder:"Member email",name:"newMember",onChange:function(e){var t;m("newMember",(t=e,a.emailValidation&&o(Object(_e.a)({},a,{emailValidation:!1})),a.newMember&&o(Object(_e.a)({},a,{newMember:!1})),t.target.value.replace(/[\/\/|\/;&$%"<>()+{}',=~`!#^*\/?]/g,"")))},value:n.newMember,className:"form-control col-sm-8 mr-1"+(a.newMember||a.emailValidation?" is-invalid":"")}),r.a.createElement("button",{type:"button",onClick:function(e){m("members",function(e,t,n){if(void 0===e.target.value||!e.target.value.length)return o(Object(_e.a)({},a,{newMember:!0,emailValidation:!1})),t;if(n.newMember)o(Object(_e.a)({},a,{emailValidation:!0}));else{var r=e.target.value.toLowerCase(),c=!1;d.forEach(function(e){e===r&&(c=!0)}),c?W(!0,"Error","This member already in the members list."):p([].concat(Object(F.a)(d),[r]))}}(e,n.members,t)),m("newMember","")},value:n.newMember,className:"col-sm-3 btn btn_main"},"Add"),r.a.createElement(x.a,{name:"newMember",component:"div",className:"invalid-feedback"}),a.newMember?r.a.createElement("div",{className:"invalid-feedback"}," Member field can't be empty"):null,a.emailValidation?r.a.createElement("div",{className:"invalid-feedback"},"Email is invalid"):null))),d.length?r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4",htmlFor:"title"},"All members"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("ul",{className:"list-group col-sm-9"},d.map(function(e){return r.a.createElement("li",{className:"row",key:e},r.a.createElement("span",{className:"list-group-item list-item col-sm-12"},e,r.a.createElement("button",{className:"btn card_removeButton",type:"button",onClick:function(){return function(e){p(d.filter(function(t){return t!==e}))}(e)}},r.a.createElement("i",null,r.a.createElement(ne.c,{size:20})))))})))):null)),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn_main update-btn"},"Update")))}})))))}),Pe=a(715),ze=a(718),Re=a(708),Ue=a(717),Le=a(249),He=(a(695),function(){return r.a.createElement(N.Consumer,null,function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(ze.a,{bg:"dark",variant:"dark"},r.a.createElement(ze.a.Brand,{as:Pe.a,to:"/"},r.a.createElement(Le.b,{size:40,className:"main-navigation__logo"}),"Budget planner"),r.a.createElement(Re.a,{className:"main-navigation__items"},!e.token&&r.a.createElement("li",null,r.a.createElement(Re.a.Link,{as:Pe.a,to:"/auth"},"Sign in")),e.token&&r.a.createElement(Ue.a,{alignRight:!0,title:r.a.createElement("span",null,r.a.createElement(ne.d,{size:25})),id:"collasible-nav-dropdown"},r.a.createElement(Ue.a.Item,{as:Pe.a,to:"/settings"},"Settings"),r.a.createElement(Ue.a.Divider,null),r.a.createElement(Ue.a.Item,{onClick:e.logout},"Logout")),e.token&&r.a.createElement(Ue.a,{alignRight:!0,title:r.a.createElement("span",null,r.a.createElement(Le.a,{size:25})),id:"collasible-nav-dropdown"},r.a.createElement(Ue.a.Item,{as:Pe.a,to:"/expenses"},"Expenses"),r.a.createElement(Ue.a.Item,{as:Pe.a,to:"/statistics"},"Statistics")))))})}),Je=(a(701),new g.a({uri:"/graphql"})),Ge=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={token:null,userId:null},a.login=function(e,t){a.setState({token:e,userId:t})},a.logout=function(){fetch("/removeCookie",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){console.log(e.response.message)}).catch(function(e){console.log(e)}),a.setState({token:null,userId:null})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{client:Je},r.a.createElement(d.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(N.Provider,{value:{token:this.state.token,userId:this.state.userId,login:this.login,logout:this.logout}},r.a.createElement(He,null),r.a.createElement("main",{className:"main-content"},r.a.createElement(p.a,null,!this.state.token&&r.a.createElement(f.a,{path:"/auth",component:M}),r.a.createElement(f.a,{path:"/test",component:K}),this.state.token&&r.a.createElement(f.a,{path:"/expenses",component:Ie}),this.state.token&&r.a.createElement(E.a,{from:"/",to:"/expenses",exact:!0}),this.state.token&&r.a.createElement(E.a,{from:"/auth",to:"/expenses",exact:!0}),r.a.createElement(f.a,{path:"/events",component:R}),this.state.token&&r.a.createElement(f.a,{path:"/bookings",component:T}),this.state.token&&r.a.createElement(f.a,{path:"/settings",component:qe}),!this.state.token&&r.a.createElement(E.a,{to:"/auth",exact:!0})))))))}}]),t}(n.Component);c.a.render(r.a.createElement(Ge,null),document.getElementById("root"))}},[[398,2,1]]]);
//# sourceMappingURL=main.d556682b.chunk.js.map