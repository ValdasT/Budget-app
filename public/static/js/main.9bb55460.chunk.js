(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(e,t,a){},294:function(e,t,a){},325:function(e,t){},395:function(e,t,a){e.exports=a(701)},402:function(e,t,a){},404:function(e,t,a){},545:function(e,t,a){},558:function(e,t,a){},560:function(e,t,a){},562:function(e,t,a){},564:function(e,t,a){},566:function(e,t,a){},575:function(e,t,a){},683:function(e,t){},684:function(e,t){},685:function(e,t,a){},687:function(e,t,a){},690:function(e,t,a){},696:function(e,t,a){},701:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(24),i=a.n(o),l=(a(400),a(94)),c=a(95),s=a(107),m=a(96),u=a(108),d=a(715),p=a(717),f=a(716),E=a(714),h=a(366),g=a(98),b=a(13),v=(a(402),a(404),function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"cssload-inner cssload-one"}),r.a.createElement("div",{className:"cssload-inner cssload-two"}),r.a.createElement("div",{className:"cssload-inner cssload-three"}))}),N=r.a.createContext({token:null,userId:null,login:function(e,t){},logout:function(){}}),y=r.a.createContext(),w=a(14),x=a(21),S=function(){var e=Object(n.useContext)(N),t=e.submitHandler,a=e.switchModeHandler;return r.a.createElement(w.d,{initialValues:{firstName:"",lastName:"",email:"",password:"",confirmPassword:""},validationSchema:x.object().shape({firstName:x.string().required("First Name is required"),lastName:x.string().required("Last Name is required"),email:x.string().email("Email is invalid").required("Email is required"),password:x.string().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:x.string().oneOf([x.ref("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,n=(e.status,e.touched);return r.a.createElement(w.c,{className:"auth-form",id:"formContentSignUp"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h4",null,"Create account")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"firstName"},"First Name"),r.a.createElement("div",{className:"col-sm-8 col-form-label"},r.a.createElement(w.b,{placeholder:"First name",name:"firstName",type:"text",className:"form-control"+(t.firstName&&n.firstName?" is-invalid":"")}),r.a.createElement(w.a,{name:"firstName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"lastName"},"Last Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Last name",name:"lastName",type:"text",className:"form-control"+(t.lastName&&n.lastName?" is-invalid":"")}),r.a.createElement(w.a,{name:"lastName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Email",name:"email",type:"text",className:"form-control"+(t.email&&n.email?" is-invalid":"")}),r.a.createElement(w.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Password",name:"password",type:"password",className:"form-control"+(t.password&&n.password?" is-invalid":"")}),r.a.createElement(w.a,{name:"password",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"confirmPassword"},"Confirm Password"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Confirm",name:"confirmPassword",type:"password",className:"form-control"+(t.confirmPassword&&n.confirmPassword?" is-invalid":"")}),r.a.createElement(w.a,{name:"confirmPassword",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Register"),r.a.createElement("button",{onClick:a,type:"button",className:"btn btn-secondary mr-2"},"Sign in")))}})},O=function(){var e=Object(n.useContext)(N),t=e.submitHandler,a=e.switchModeHandler;return r.a.createElement(w.d,{initialValues:{email:"",password:""},validationSchema:x.object().shape({email:x.string().email("Email is invalid").required("Email is required"),password:x.string().required("Password is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,n=(e.status,e.touched);return r.a.createElement(w.c,{className:"auth-form",id:"formContentSignIn"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h4",null,"Sign in")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(w.b,{placeholder:"Email",name:"email",type:"text",className:"form-control"+(t.email&&n.email?" is-invalid":"")}),r.a.createElement(w.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(w.b,{placeholder:"Password",name:"password",type:"password",className:"form-control"+(t.password&&n.password?" is-invalid":"")}),r.a.createElement(w.a,{name:"password",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-actions"},r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Submit"),r.a.createElement("button",{onClick:a,type:"button",className:"btn btn-secondary mr-2"},"Sign up")))}})},k=a(711),j=a(544),C=(a(152),function(){var e=Object(n.useContext)(y),t=e.modalHeader,a=e.modalText,o=e.showInfoModal,i=e.setShowInfoModal,l=function(){return i(!1)};return r.a.createElement(n.Fragment,null,r.a.createElement(k.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:o,onHide:l},r.a.createElement(k.a.Header,{closeButton:!0},r.a.createElement(k.a.Title,null,t)),r.a.createElement(k.a.Body,null,a),r.a.createElement(k.a.Footer,null,r.a.createElement(j.a,{variant:"secondary",onClick:l},"Ok"))))}),F=function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),l=Object(b.a)(i,2),c=l[0],s=l[1],m=Object(n.useState)(!1),u=Object(b.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(""),E=Object(b.a)(f,2),h=E[0],g=E[1],w=Object(n.useState)(),x=Object(b.a)(w,2),k=x[0],j=x[1];Object(n.useEffect)(function(){T()},[]);var F=function(e,t,a){p(e),g(t),j(a)},A=Object(n.useContext)(N).login,$=function(){return o(!a)},T=function(){fetch("/cookie",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){A(e.response.token,e.response.userId)}).catch(function(e){console.log("There is no cookie!")})};return r.a.createElement(y.Provider,{value:{modalHeader:h,modalText:k,showInfoModal:d,setShowInfoModal:p}},r.a.createElement(N.Provider,{value:{submitHandler:function(e){var t=JSON.stringify((new Date).getTime());s(!0);var n={query:"\n              query Login($email: String!, $password: String!) {\n                login(email: $email, password: $password) {\n                  userId\n                  token\n                }\n              }\n            ",variables:{email:e.email,password:e.password}};a&&(n={query:"\n            mutation CreateUser($email: String!, $password: String!, $name: String!, $surname: String!, $createdAt: String!, $updatedAt: String!) {\n              createUser(userInput: {email: $email, password: $password, name: $name, surname: $surname, createdAt: $createdAt, updatedAt: $updatedAt}) {\n                _id\n                email\n              }\n            }\n          ",variables:{email:e.email,password:e.password,name:e.firstName,surname:e.lastName,createdAt:t,updatedAt:t}}),fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(e){if(!e.ok)throw s(!1),e.statusText;return e.json()}).then(function(t){s(!1),t.data.login?A(t.data.login.token,t.data.login.userId):(F(!0,"Confirmation","Hi ".concat(e.firstName," ").concat(e.lastName,", your account was created. Now You can sign in.")),$())}).catch(function(e){throw s(!1),F(!0,"Oops!","Your email or password is incorect."),e})},switchModeHandler:$}},r.a.createElement(C,null),c?r.a.createElement(v,null):r.a.createElement(n.Fragment,null,a?r.a.createElement(S,null):r.a.createElement(O,null))))},A=(a(545),function(e){return r.a.createElement("ul",{className:"bookings__list"},e.bookings.map(function(t){return r.a.createElement("li",{key:t._id,className:"bookings__item"},r.a.createElement("div",{className:"bookings__item-data"},t.event.title," -"," ",new Date(t.createdAt).toLocaleDateString()),r.a.createElement("div",{className:"bookings__item-actions"},r.a.createElement("button",{className:"btn",onClick:e.onDelete.bind(void 0,t._id)},"Cancel")))}))}),$=a(84),T=a(331),I={Cheap:{min:0,max:100},Normal:{min:100,max:200},Expensive:{min:200,max:1e7}},M=function(e){var t={labels:[],datasets:[]},a=[],n=function(n){var r=e.bookings.reduce(function(e,t){return t.event.price>I[n].min&&t.event.price<I[n].max?e+1:e},0);a.push(r),t.labels.push(n),t.datasets.push({fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:a}),(a=Object($.a)(a))[a.length-1]=0};for(var o in I)n(o);return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(T.Bar,{data:t}))},D=(a(558),function(e){return r.a.createElement("div",{className:"bookings-control"},r.a.createElement("button",{className:"list"===e.activeOutputType?"active":"",onClick:e.onChange.bind(void 0,"list")},"List"),r.a.createElement("button",{className:"chart"===e.activeOutputType?"active":"",onClick:e.onChange.bind(void 0,"chart")},"Chart"))}),_=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!1,bookings:[],outputType:"list"},a.fetchBookings=function(){a.setState({isLoading:!0});fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify({query:"\n          query {\n            bookings {\n              _id\n             createdAt\n             event {\n               _id\n               title\n               date\n               price\n             }\n            }\n          }\n        "}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.context.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){var t=e.data.bookings;a.setState({bookings:t,isLoading:!1})}).catch(function(e){console.log(e),a.setState({isLoading:!1})})},a.deleteBookingHandler=function(e){a.setState({isLoading:!0});var t={query:"\n          mutation CancelBooking($id: ID!) {\n            cancelBooking(bookingId: $id) {\n            _id\n             title\n            }\n          }\n        ",variables:{id:e}};fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.context.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(t){a.setState(function(t){return{bookings:t.bookings.filter(function(t){return t._id!==e}),isLoading:!1}})}).catch(function(e){console.log(e),a.setState({isLoading:!1})})},a.changeOutputTypeHandler=function(e){"list"===e?a.setState({outputType:"list"}):a.setState({outputType:"chart"})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchBookings()}},{key:"render",value:function(){var e=r.a.createElement(v,null);return this.state.isLoading||(e=r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{activeOutputType:this.state.outputType,onChange:this.changeOutputTypeHandler}),r.a.createElement("div",null,"list"===this.state.outputType?r.a.createElement(A,{bookings:this.state.bookings,onDelete:this.deleteBookingHandler}):r.a.createElement(M,{bookings:this.state.bookings})))),r.a.createElement(r.a.Fragment,null,e)}}]),t}(n.Component);_.contextType=N;var q=_,Y=(a(560),function(){return r.a.createElement("div",{className:"backdrop"})}),P=(a(562),function(e){return r.a.createElement("li",{key:e.eventId,className:"events__list-item"},r.a.createElement("div",null,r.a.createElement("h1",null,e.title),r.a.createElement("h2",null,"$",e.price," - ",new Date(e.date).toLocaleDateString())),r.a.createElement("div",null,e.userId===e.creatorId?r.a.createElement("p",null,"Your the owner of this event."):r.a.createElement("button",{className:"btn",onClick:e.onDetail.bind(void 0,e.eventId)},"View Details")))}),B=(a(564),function(e){var t=e.events.map(function(t){return r.a.createElement(P,{key:t._id,eventId:t._id,title:t.title,price:t.price,date:t.date,userId:e.authUserId,creatorId:t.creator._id,onDetail:e.onViewDetail})});return r.a.createElement("ul",{className:"event__list"},t)}),z=(a(566),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={creating:!1,events:[],isLoading:!1,selectedEvent:null},a.isActive=!0,a.startCreateEventHandler=function(){a.setState({creating:!0})},a.modalConfirmHandler=function(){a.setState({creating:!1});var e=a.titleElRef.current.value,t=+a.priceElRef.current.value,n=a.dateElRef.current.value,r=a.descriptionElRef.current.value;if(!(0===e.trim().length||t<=0||0===n.trim().length||0===r.trim().length)){var o={title:e,price:t,date:n,description:r};console.log(o);var i={query:"\n          mutation CreateEvent($title: String!, $desc: String!, $price: Float!, $date: String!) {\n            createEvent(eventInput: {title: $title, description: $desc, price: $price, date: $date}) {\n              _id\n              title\n              description\n              date\n              price\n            }\n          }\n        ",variables:{title:e,desc:r,price:t,date:n}},l=a.context.token;fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer "+l}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){a.setState(function(t){var n=Object($.a)(t.events);return n.push({_id:e.data.createEvent._id,title:e.data.createEvent.title,description:e.data.createEvent.description,date:e.data.createEvent.date,price:e.data.createEvent.price,creator:{_id:a.context.userId}}),{events:n}})}).catch(function(e){console.log(e)})}},a.modalCancelHandler=function(){a.setState({creating:!1,selectedEvent:null})},a.showDetailHandler=function(e){a.setState(function(t){return{selectedEvent:t.events.find(function(t){return t._id===e})}})},a.bookEventHandler=function(){if(a.context.token){console.log(a.state.selectedEvent);var e={query:"\n          mutation BookEvent($id: ID!) {\n            bookEvent(eventId: $id) {\n              _id\n             createdAt\n             updatedAt\n            }\n          }\n        ",variables:{id:a.state.selectedEvent._id}};fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.context.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){console.log(e),a.setState({selectedEvent:null})}).catch(function(e){console.log(e)})}else a.setState({selectedEvent:null})},a.titleElRef=r.a.createRef(),a.priceElRef=r.a.createRef(),a.dateElRef=r.a.createRef(),a.descriptionElRef=r.a.createRef(),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchEvents()}},{key:"fetchEvents",value:function(){var e=this;this.setState({isLoading:!0});fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify({query:"\n          query {\n            events {\n              _id\n              title\n              description\n              date\n              price\n              creator {\n                _id\n                email\n              }\n            }\n          }\n        "}),headers:{"Content-Type":"application/json"}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(t){var a=t.data.events;e.isActive&&e.setState({events:a,isLoading:!1})}).catch(function(t){console.log(t),e.isActive&&e.setState({isLoading:!1})})}},{key:"componentWillUnmount",value:function(){this.isActive=!1}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,(this.state.creating||this.state.selectedEvent)&&r.a.createElement(Y,null),this.state.creating&&r.a.createElement(C,{title:"Add Event",canCancel:!0,canConfirm:!0,onCancel:this.modalCancelHandler,onConfirm:this.modalConfirmHandler,confirmText:"Confirm"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",id:"title",ref:this.titleElRef})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"price"},"Price"),r.a.createElement("input",{type:"number",id:"price",ref:this.priceElRef})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"date"},"Date"),r.a.createElement("input",{type:"datetime-local",id:"date",ref:this.dateElRef})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{id:"description",rows:"4",ref:this.descriptionElRef})))),this.state.selectedEvent&&r.a.createElement(C,{title:this.state.selectedEvent.title,canCancel:!0,canConfirm:!0,onCancel:this.modalCancelHandler,onConfirm:this.bookEventHandler,confirmText:this.context.token?"Book":"Confirm"},r.a.createElement("h1",null,this.state.selectedEvent.title),r.a.createElement("h2",null,"$",this.state.selectedEvent.price," -"," ",new Date(this.state.selectedEvent.date).toLocaleDateString()),r.a.createElement("p",null,this.state.selectedEvent.description)),this.context.token&&r.a.createElement("div",{className:"events-control"},r.a.createElement("p",null,"Share your own Events!"),r.a.createElement("button",{className:"btn",onClick:this.startCreateEventHandler},"Create Event")),this.state.isLoading?r.a.createElement(v,null):r.a.createElement(B,{events:this.state.events,authUserId:this.context.userId,onViewDetail:this.showDetailHandler}))}}]),t}(n.Component));z.contextType=N;var L=z,H=a(164),R=r.a.createContext(),J=function(){var e=Object(n.useContext)(R),t=e.count,a=e.fruit,o=e.dataFromDb,i=Object(n.useState)("Baravykas"),l=Object(b.a)(i,2),c=l[0],s=l[1];return r.a.createElement("div",null,r.a.createElement("p",null,"Your name is ",c," ",t," ",o.lenght),r.a.createElement("button",{className:"btn",onClick:function(){return s(c="Johan")}},"Johan"),r.a.createElement("button",{className:"btn",onClick:function(){return s(c="Perter")}},"Peter"),r.a.createElement("button",{className:"btn",onClick:function(){return s(c=a)}},"Putin"))},U=a(93),V=a.n(U);function G(){var e=Object(H.a)(["query {\n        allFiles {\n            _id\n            title\n            description\n          }\n      }"]);return G=function(){return e},e}var K=function(){var e=V()(G()),t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(0),c=Object(b.a)(l,2),s=c[0],m=c[1],u=Object(n.useState)("Fakama"),d=Object(b.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)([]),h=Object(b.a)(E,2),v=h[0],N=h[1],y=function(){var e=["Banana","Abricot","Apple","Kiwi"];return e[Math.floor(Math.random()*e.length)]};Object(n.useEffect)(function(){var e;document.title="You clicked ".concat(s," times"),e=p,console.log(e)},[p]);return r.a.createElement(R.Provider,{value:{count:s,fruit:p,dataFromDb:v}},r.a.createElement(J,null),o,r.a.createElement("button",{onClick:function(){i(o=r.a.createElement("div",null,r.a.createElement("h1",null,"----------------------"),r.a.createElement(g.b,{query:e},function(e){var t=e.loading,a=e.err,o=e.data;return t?r.a.createElement("h1",null,"Loading"):a?r.a.createElement("h1",null,a):o?(f(p=y()),r.a.createElement(n.Fragment,null,o.allFiles.map(function(e){return r.a.createElement("div",{key:e._id},e._id)}))):void 0}),r.a.createElement("h1",null,"----------------------")))}},"Show?"),r.a.createElement("button",{className:"btn btn-primary btn-sm mr-2",onClick:function(){fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                allFiles {\n                    _id\n                    title\n                    description\n                  }\n              }\n            "}),headers:{"Content-Type":"application/json"}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){N(v=e.data.allFiles),console.log(v)}).catch(function(e){console.log(e)})}},"Get Files from db!"),r.a.createElement("button",{disabled:!v.length,className:"btn btn-primary btn-sm",onClick:function(){N(v=[])}},"Clear from screen"),r.a.createElement(n.Fragment,null,r.a.createElement("div",null,"There is ",v.length," in db!"),v.map(function(e){return r.a.createElement("div",{key:e._id},e._id)})),r.a.createElement("p",null,"You clicked ",s," times"),r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return m(s+1)}},"Click me +1"),r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return m(s-1)}},"Click me -1"),r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return m(s=0)}},"reset"),r.a.createElement("div",null,r.a.createElement("p",null,"You faforite fruit is ",p," "),r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return f(p=y())}},"pick fruit")))},W=a(56),Q=a.n(W),X=a(111),Z=a(22),ee=a.n(Z),te=r.a.createContext(),ae=a(125),ne=a(54),re=a(129),oe=(a(293),function(e){return ee()(e,"x").format("MM/DD/YYYY")}),ie=function(){var e=Object(n.useContext)(y),t=e.submitExpense,a=e.showModal,o=e.setShowModal,i=e.expense,l=e.onUpdate,c=function(){return o(!a)},s=ee()().format("MM/DD/YYYY"),m=Object(n.useState)(new Date(i?oe(i.createdAt):s)),u=Object(b.a)(m,2),d=u[0],p=u[1];return r.a.createElement(n.Fragment,null,r.a.createElement(k.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:a,onHide:c},r.a.createElement(k.a.Header,{closeButton:!0},l?r.a.createElement(k.a.Title,null,"Update expense"):r.a.createElement(k.a.Title,null,"Add expense")),r.a.createElement(k.a.Body,null,r.a.createElement(w.d,{initialValues:{tag:i?i.tag:"",title:i?i.title:"",description:i?i.description:"",group:i?i.group:"",price:i?i.price:"",date:i?oe(i.createdAt):s,updateDate:i?oe(i.updatedAt):s},validationSchema:x.object().shape({title:x.string().required("title is required"),description:x.string(),group:x.string().required("Group is required"),tag:x.string().required("Type is required"),price:x.number().required("Price is required"),date:x.date().required("Date is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,a=e.values,n=e.touched,o=e.handleChange,i=e.setFieldValue,s=e.handleBlur;return r.a.createElement(w.c,{className:"auth-form"},r.a.createElement("div",{className:"p-2"}),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Type"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("select",{name:"tag",onChange:o,onBlur:s,value:a.tag,className:"custom-select mr-sm-2 form-control"+(t.tag&&n.tag?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:""},"Select a type"),r.a.createElement("option",{value:"Expense"},"Expense"),r.a.createElement("option",{value:"Income"},"Income")),r.a.createElement(w.a,{name:"tag",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Title"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(w.b,{placeholder:"Title",name:"title",type:"text",className:"form-control"+(t.title&&n.title?" is-invalid":"")}),r.a.createElement(w.a,{name:"title",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"description"},"Description"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(w.b,{component:"textarea",placeholder:"Description",name:"description",type:"text",className:"form-control"}),r.a.createElement(w.a,{name:"description",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Group"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("select",{name:"group",onChange:o,onBlur:s,value:a.group,className:"custom-select mr-sm-2 form-control"+(t.group&&n.group?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:""},"Select a group"),r.a.createElement("option",{value:"1"},"One"),r.a.createElement("option",{value:"2"},"Two"),r.a.createElement("option",{value:"3"},"Three")),r.a.createElement(w.a,{name:"group",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Price"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("input",{placeholder:"0.00",name:"price",onChange:function(e){i("price",function(e){var t=e.target.value;return 1===t.length&&"."===t&&(t=t.slice(0,-1)),2===t.length&&"00"===t&&(t=t.slice(0,-1)),t.split(".").length-1>1&&(t=t.slice(0,-1)),(t=t.indexOf(".")>=0?t.substr(0,t.indexOf("."))+t.substr(t.indexOf("."),3):t).replace(/[^\d.-]/g,"").replace("-","")}(e))},value:a.price,className:"form-control"+(t.price&&n.price?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(re.a,{className:"",size:20}))),r.a.createElement(w.a,{name:"price",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"date"},"Date"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement(ae.a,{className:"form-control not-round-right-corner"+(t.date&&n.date?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",{className:""},a.date)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"date",selected:d,placeholder:"Enter date",onChange:function(e){var t;i("date",(t=e,ee()(t).format("MM/DD/YYYY"))),p(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(ne.a,{className:"",size:20}))))),r.a.createElement(w.a,{name:"date",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-actions float-right"},l?r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Update"):r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Submit"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:c},"Cancel")))}}))))},le=function(){var e=Object(n.useContext)(y),t=e.modalText,a=e.showInfoModal,o=e.setShowInfoModal,i=e.actionFunction,l=function(){return o(!1)};return r.a.createElement(n.Fragment,null,r.a.createElement(k.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:a,onHide:l},r.a.createElement(k.a.Header,{closeButton:!0},r.a.createElement(k.a.Title,null,"Please confirm")),r.a.createElement(k.a.Body,null,t),r.a.createElement(k.a.Footer,null,r.a.createElement(j.a,{variant:"primary",onClick:i},"Yes"),r.a.createElement(j.a,{variant:"secondary",onClick:l},"Cancel"))))},ce=(a(294),function(e){var t,a=e.expense,o=Object(n.useState)(!1),i=Object(b.a)(o,2),l=i[0],c=i[1],s=Object(n.useState)(),m=Object(b.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(),f=Object(b.a)(p,2),E=f[0],h=f[1],g=Object(n.useState)(!1),v=Object(b.a)(g,2),N=v[0],w=v[1],x=Object(n.useContext)(te),S=x.removeExpense,O=x.updateExpense,k=x.showMore;return r.a.createElement(y.Provider,{value:{modalText:u,showInfoModal:l,setShowInfoModal:c,actionFunction:function(){S(E)},showModal:N,setShowModal:w,expense:a,onUpdate:!0,submitExpense:function(e){e.id=a._id,O(e)}}},r.a.createElement(le,null),r.a.createElement(ie,null),r.a.createElement("span",{className:k?"card_more":"card"},r.a.createElement("div",{style:{background:"rgb(249, 248, 248)"}},r.a.createElement("div",{className:k?"card_title_more":"card_title"}," ",a.title)),r.a.createElement("div",{className:"card_date"},(t=a.createdAt,ee()(t,"x").format("MM/DD/YYYY"))),r.a.createElement("div",{className:k?"card_group":"card_group invisible"},"Group: ",a.group),r.a.createElement("div",{className:k?"card_description":"card_description invisible"},a.description),"Expense"===a.tag?r.a.createElement("div",{className:"card_price_expense"},"-",a.price," \u20ac "):r.a.createElement("div",{className:"card_price_income"},a.price," \u20ac "),r.a.createElement("button",{className:"btn card_removeButton",onClick:function(){return e="Are you sure whant to delete this item?",t=a,c(!0),d(e),void h(t);var e,t}},r.a.createElement("i",null,r.a.createElement(ne.c,{size:20}))),r.a.createElement("button",{className:"btn card_editButton",onClick:function(){return w(!N)}},r.a.createElement("i",null,r.a.createElement(ne.b,{size:20})))))}),se=a(39),me=function(){var e=Object(n.useContext)(y),t=e.showModal,a=e.setShowModal,o=e.showImportModal,i=e.setShowIportModal,l=Object(n.useContext)(te),c=l.setShowMore,s=l.showMore,m=l.allExpenses;return r.a.createElement(te.Provider,{value:{showMore:s}},r.a.createElement("span",{className:"card_first card"},r.a.createElement(n.Fragment,null,r.a.createElement(C,null),r.a.createElement("div",{className:"row d-flex align-self-center"},r.a.createElement("button",{className:"btn_one",onClick:function(){return a(!t)}},r.a.createElement("i",null,r.a.createElement(se.b,{size:30}))),r.a.createElement("button",{className:"btn_upload",onClick:function(){return i(!o)}},r.a.createElement("i",null,r.a.createElement(se.d,{size:25}))),m.length?r.a.createElement("button",{className:"btn_one",onClick:function(){return c(!s)}},s?r.a.createElement("i",null,r.a.createElement(re.b,{size:30})):r.a.createElement("i",null,r.a.createElement(re.c,{size:30}))):null),t&&r.a.createElement(n.Fragment,null,r.a.createElement(ie,null)))))},ue=(a(575),function(){var e=Object(n.useContext)(te).allExpenses;return r.a.createElement(n.Fragment,null,r.a.createElement(me,null),e.map(function(e){return r.a.createElement(ce,{className:"expenses_list",key:e._id,expense:e})}))}),de=function(){var e=Object(n.useContext)(te),t=e.getAllOnFilter,a=e.getAll,o=ee()().format("MM/DD/YYYY"),i=ee()().subtract(1,"months").format("MM/DD/YYYY"),l=Object(n.useState)(new Date(i)),c=Object(b.a)(l,2),s=c[0],m=c[1],u=Object(n.useState)(new Date(o)),d=Object(b.a)(u,2),p=d[0],f=d[1],E=function(e){return ee()(e).format("MM/DD/YYYY")},h=function(e){var n={dateFrom:"",dateTo:""};switch(e){case"today":n={dateFrom:ee()().format("MM/DD/YYYY"),dateTo:ee()().format("MM/DD/YYYY")},t(n);break;case"week":n={dateFrom:ee()().startOf("week").format("MM/DD/YYYY"),dateTo:ee()().endOf("week").format("MM/DD/YYYY")},t(n);break;case"month":n={dateFrom:ee()().startOf("month").format("MM/DD/YYYY"),dateTo:ee()().endOf("month").format("MM/DD/YYYY")},t(n);break;case"year":n={dateFrom:ee()().startOf("year").format("MM/DD/YYYY"),dateTo:ee()().endOf("year").format("MM/DD/YYYY")},t(n);break;case"all":a();break;default:n={dateFrom:ee()().startOf("month").format("MM/DD/YYYY"),dateTo:ee()().endOf("month").format("MM/DD/YYYY")},t(n)}};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"form-group row col-sm-12  justify-content-center mb-3"},r.a.createElement("button",{className:" col-sm-2 btn btn_with_line",onClick:function(){return h("today")}},"Today"),r.a.createElement("button",{className:"col-sm-2 btn btn_with_line",onClick:function(){return h("week")}},"This week"),r.a.createElement("button",{className:"col-sm-2 btn btn_with_line",onClick:function(){return h("month")}},"This month"),r.a.createElement("button",{className:"col-sm-2 btn btn_with_line",onClick:function(){return h("year")}},"This year"),r.a.createElement("button",{className:"col-sm-2 btn btn_with_line",onClick:function(){return h("all")}},"All")),r.a.createElement(w.d,{initialValues:{dateFrom:i,dateTo:o},validationSchema:x.object().shape({dateFrom:x.date().required("Date is required"),dateTo:x.date().required("Date is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,a=e.values,n=e.touched,o=e.setFieldValue;return r.a.createElement(w.c,null,r.a.createElement("div",{className:"form-group row col-sm-12  justify-content-center mb-2"},r.a.createElement("label",{className:" col-form-label mr-3",htmlFor:"dateFrom"},"From:"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement(ae.a,{selected:s,startDate:s,endDate:p,className:"form-control not-round-right-corner"+(t.dateFrom&&n.dateFrom?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",null,a.dateFrom)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"dateFrom",placeholder:"Enter date",onChange:function(e){o("dateFrom",E(e)),m(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(ne.a,{className:"",size:20}))))),r.a.createElement(w.a,{name:"dateTo",component:"div",className:"invalid-feedback"}),r.a.createElement("label",{className:"col-form-label ml-5 mr-3",htmlFor:"dateTo"},"To:"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement(ae.a,{selected:p,startDate:s,endDate:p,className:"form-control not-round-right-corner"+(t.dateTo&&n.dateTo?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",null,a.dateTo)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"dateTo",placeholder:"Enter date",onChange:function(e){o("dateTo",E(e)),f(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(ne.a,{className:"",size:20}))))),r.a.createElement(w.a,{name:"dateTo",component:"div",className:"invalid-feedback"}),r.a.createElement("div",{className:"float-right ml-5"},r.a.createElement("button",{type:"submit",className:"btn btn_main"},"Filter"))))}}))},pe=a(48),fe=function(){var e=Object(n.useContext)(te).allExpenses,t=Object(n.useState)([]),a=Object(b.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!0),c=Object(b.a)(l,2),s=c[0],m=c[1],u=Object(n.useState)(!0),d=Object(b.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)(!0),h=Object(b.a)(E,2),g=h[0],v=h[1],N={first:[]};Object(n.useEffect)(function(){!function(e){var t=[],a={expenses:0,incomes:0,budget:0};e.forEach(function(e){e.date=ee()(e.createdAt,"x").format("DD/MM"),"Expense"===e.tag?(a.expenses=a.expenses+parseFloat(e.price),a.budget=a.budget-parseFloat(e.price),t.push({date:e.date,Expenses:a.expenses.toFixed(2),Incomes:a.incomes.toFixed(2),Budget:a.budget.toFixed(2)})):(a.incomes=a.incomes+parseFloat(e.price),a.budget=a.budget+parseFloat(e.price),t.push({date:e.date,Expenses:a.expenses.toFixed(2),Incomes:a.incomes.toFixed(2),Budget:a.budget.toFixed(2)}))}),N.first.push(Math.min.apply(Math,t.map(function(e){return e.Incomes}))),N.first.push(Math.max.apply(Math,t.map(function(e){return e.Incomes}))),N.first.push(Math.min.apply(Math,t.map(function(e){return e.Budget}))),N.first.push(Math.max.apply(Math,t.map(function(e){return e.Budget}))),N.first.push(Math.min.apply(Math,t.map(function(e){return e.Expenses}))),N.first.push(Math.max.apply(Math,t.map(function(e){return e.Expenses}))),N.smallest=Math.min.apply(Math,N.first.map(function(e){return e})),N.biggest=Math.max.apply(Math,N.first.map(function(e){return e})),i(t)}(e)},[e]);return r.a.createElement(n.Fragment,null,e.length?r.a.createElement(pe.e,{width:"95%",height:150},r.a.createElement(pe.b,{data:o,margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,g?r.a.createElement("linearGradient",{id:"colorExp",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#FF0000",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#FF0000",stopOpacity:0})):null,",",p?r.a.createElement("linearGradient",{id:"colorInc",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})):null,",",s?r.a.createElement("linearGradient",{id:"colorBud",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#0000FF",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#0000FF",stopOpacity:0})):null),r.a.createElement(pe.c,{vertical:!1,horizontal:!1}),r.a.createElement(pe.d,{onClick:function(e){!function(e){switch(e.dataKey){case"Budget":m(!s);break;case"Incomes":f(!p);break;case"Expenses":v(!g);break;default:console.log("incorect name")}}(e)}}),r.a.createElement(pe.f,null),r.a.createElement(pe.a,{type:"monotone",dataKey:"Budget",stroke:"#0000FF",fillOpacity:1,fill:"url(#colorBud)"}),r.a.createElement(pe.a,{type:"monotone",dataKey:"Incomes",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorInc)"}),r.a.createElement(pe.a,{type:"monotone",dataKey:"Expenses",stroke:"#FF0000",fillOpacity:1,fill:"url(#colorExp)"}),r.a.createElement(pe.g,{dataKey:"date",fontSize:"10"}),r.a.createElement(pe.h,{type:"number",domain:[N.smallest,N.biggest],allowDataOverflow:!0,fontSize:"10"}))):null)},Ee=a(367),he=a(363),ge=a.n(he),be=a(246),ve=a.n(be),Ne=function(){var e=Object(n.useContext)(y),t=e.modalInfo,a=e.showImportModal,o=e.setShowIportModal,i=Object(n.useContext)(te),l=i.submitExpenseFromImport,c=i.setAllExpenses,s=Object(n.useState)([]),m=Object(b.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(!1),f=Object(b.a)(p,2),E=f[0],h=f[1],g=Object(n.useState)(!1),N=Object(b.a)(g,2),w=N[0],x=N[1],S=function(){return o(!1)},O=function(e){ge.a.parse(e,{complete:function(e){C(e)}})},C=function(){var e=Object(X.a)(Q.a.mark(function e(a){var n,r,o,i;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{title:"",description:"",price:"",group:"",createdAt:"",tag:""}],r=[],e.next=4,F(a.data[0]);case 4:(o=e.sent).forEach(function(e,t){"title"===e.name.toLowerCase()&&(n[0].title=o[t].id),"description"===e.name.toLowerCase()&&(n[0].description=o[t].id),"price"===e.name.toLowerCase()&&(n[0].price=o[t].id),"group"===e.name.toLowerCase()&&(n[0].group=o[t].id),"date"===e.name.toLowerCase()&&(n[0].createdAt=o[t].id),"type"===e.name.toLowerCase()&&(n[0].tag=o[t].id)}),a.data.forEach(function(e,t){0!==t&&e[0].length&&r.push({title:e[n[0].title],description:e[n[0].description],price:e[n[0].price],group:e[n[0].group],createdAt:e[n[0].createdAt],tag:e[n[0].tag]})}),i=[],r.forEach(function(){var e=Object(X.a)(Q.a.mark(function e(a){return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i,e.next=3,l(a);case 3:if(e.t1=e.sent,e.t0.push.call(e.t0,e.t1),n.length!==i.length){e.next=12;break}return e.next=8,c(i);case 8:t(!0,"Confirmation","File was uploaded"),h(!1),d([]),S();case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),F=function(e){return new Promise(function(a,n){var r=[],o=[];if(["Title","Price","Group","Date","Type","Description"].forEach(function(t){var a=!1;e.forEach(function(e,n){t.toLocaleLowerCase()===e.toLowerCase()&&(a=!0,r.push({name:t,id:n}))}),a||o.push(t)}),o.length){var i="";o.forEach(function(e,t){o.length===t+1?i+=' "'.concat(e,'".'):i+=' "'.concat(e,'";')}),t(!0,"Error","Inappropriate file. Missing fields in the file:".concat(i)),h(!1),d([]),S()}else a(r)})},A=Object(n.useCallback)(function(e){e.length&&(d(function(){return[e[0]]}),x(!1))},[]),$=Object(Ee.a)({onDrop:A,accept:"text/csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",minSize:0,maxSize:50173280}),T=$.isDragActive,I=$.getRootProps,M=$.getInputProps,D=$.isDragReject,_=$.rejectedFiles,q=_.length>0&&_[0].size>50173280;return r.a.createElement(n.Fragment,null,r.a.createElement(k.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:a,onHide:S},r.a.createElement(k.a.Header,{closeButton:!0},r.a.createElement(k.a.Title,null,"Import expenses ",E)),E?r.a.createElement(v,null):r.a.createElement(n.Fragment,null,r.a.createElement(k.a.Body,null,w?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Please select a file first!"):null,r.a.createElement("div",null,r.a.createElement("ul",null,u.map(function(e){return r.a.createElement("li",{className:"",key:e.name},"".concat((a=e.name,a.length>20?a.substring(0,20)+"...":a),"  - (").concat((t=e.size)<1024?t+" Bytes":t<1048576?(t/1024).toFixed(3)+" KB":t<1073741824?(t/1048576).toFixed(3)+" MB":(t/1073741824).toFixed(3)+" GB",")"),r.a.createElement("button",{className:"btn_remove",onClick:function(){return function(e){var t=[];u.map(function(a){a.name!==e.name&&a.size!==e.size&&t.push(a)}),d(t)}(e)}},r.a.createElement("i",null,r.a.createElement(se.a,{size:20}))));var t,a})),r.a.createElement("div",Object.assign({className:"drop_zone container text-center "},I()),r.a.createElement("input",M()),!T&&r.a.createElement("i",null,"Click here or drop a file to upload! ",r.a.createElement(se.d,{size:20})),T&&!D&&"Drop it here!",D&&"File type not accepted, sorry!",q&&r.a.createElement("div",{className:"text-danger mt-2"},"File is too large."))))),r.a.createElement(k.a.Footer,null,r.a.createElement(j.a,{type:"button",variant:"primary",disabled:E,onClick:function(){return function(e){if(e.length){h(!0);var t=e[0].name.split(".");if("csv"===(t=t[t.length-1].toLowerCase()))O(e[0]);else{var a=new FileReader;a.onload=function(e){var t=e.target.result,a=ve.a.read(t,{type:"binary",header:1,cellDates:!0,dateNF:"DD/MM/YYYY"}),n=a.SheetNames[0],r=a.Sheets[n],o=ve.a.utils.sheet_to_csv(r,{header:1,raw:!1});O(o)},a.readAsBinaryString(e[0])}}else x(!0)}(u)}},"Upload"),r.a.createElement(j.a,{variant:"secondary",disabled:E,onClick:S},"Cancel"))))},ye=(a(685),function(){var e=N._currentValue,t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),c=Object(b.a)(l,2),s=c[0],m=c[1],u=Object(n.useState)(!1),d=Object(b.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)(!1),h=Object(b.a)(E,2),g=h[0],w=h[1],x=Object(n.useState)([]),S=Object(b.a)(x,2),O=S[0],k=S[1],j=Object(n.useState)(""),F=Object(b.a)(j,2),A=F[0],T=F[1],I=Object(n.useState)(),M=Object(b.a)(I,2),D=M[0],_=M[1],q=Object(n.useState)(!1),Y=Object(b.a)(q,2),P=Y[0],B=Y[1],z=function(e,t,a){f(e),T(t),_(a)};Object(n.useEffect)(function(){Z()},[]);var L=function(){i(!0);return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                expenses {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(i(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return console.log(e.data.expenses),e.data.expenses=G(e.data.expenses,"Expense"),i(!1),e.data.expenses}).catch(function(e){return i(!1),console.log(e),e})},H=function(){i(!0);return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                incomes {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(i(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return e.data.incomes=G(e.data.incomes,"Income"),console.log(e.data.incomes),i(!1),e.data.incomes}).catch(function(e){return i(!1),console.log(e),e})},R=function(t){i(!0);var a={query:"\n            query ExpensesFilter($dateFrom: String!, $dateTo: String!){\n                expensesFilter(dateFrom: $dateFrom, dateTo: $dateTo) {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                }\n            }",variables:{dateFrom:U(t.dateFrom),dateTo:U(t.dateTo)}};return fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw i(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.expensesFilter=G(e.data.expensesFilter,"Expense"),i(!1),e.data.expensesFilter}).catch(function(e){throw i(!1),console.log(e),z(!0,"Error",e),e})},J=function(t){i(!0);var a={query:"\n            query IncomesFilter($dateFrom: String!, $dateTo: String!){\n                incomesFilter(dateFrom: $dateFrom, dateTo: $dateTo) {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                }\n            }",variables:{dateFrom:U(t.dateFrom),dateTo:U(t.dateTo)}};return fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw i(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.incomesFilter=G(e.data.incomesFilter,"Income"),i(!1),e.data.incomesFilter}).catch(function(e){throw i(!1),console.log(e),z(!0,"Error",e),e})},U=function(e){return JSON.stringify(ee()(e).valueOf())},V=function(e){return e.sort(function(e,t){return e=ee()(e.createdAt,"x").format("DD-MM-YYYY").split("-").reverse().join(""),t=ee()(t.createdAt,"x").format("DD-MM-YYYY").split("-").reverse().join(""),e.localeCompare(t)}),e},G=function(e,t){return e.forEach(function(e){e.tag=t}),e},K=function(e){var t=[];return O.map(function(a){a._id===e._id?(a=e,t.push(a)):t.push(a)}),t=V(t)},W=function(e){var t=[];return O.forEach(function(a){a._id!==e._id&&t.push(a)}),t=V(t)},Z=function(){var e=Object(X.a)(Q.a.mark(function e(){var t,a,n;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:return t=e.sent,e.next=5,H();case 5:a=e.sent,n=t.concat(a),n=V(n),k(n);case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(X.a)(Q.a.mark(function e(t){var a,n,r;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t);case 2:return a=e.sent,e.next=5,J(t);case 5:n=e.sent,r=a.concat(n),r=V(r),k(r);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(te.Provider,{value:{currentUser:e,allExpenses:O,setAllExpenses:k,removeExpense:function(t){var a={query:""};a="Expense"===t.tag?{query:"\n                  mutation RemoveExpense($id: ID!) {\n                    removeExpense(expenseId: $id) {\n                    _id\n                     title\n                    }\n                  }\n                ",variables:{id:t._id}}:{query:"\n                  mutation RemoveIncome($id: ID!) {\n                    removeIncome(incomeId: $id) {\n                    _id\n                     title\n                    }\n                  }\n                ",variables:{id:t._id}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){var t=[];e.data.removeExpense?(t=W(e.data.removeExpense),z(!0,"Confirmation","Expense was deleted")):(t=W(e.data.removeIncome),z(!0,"Confirmation","Income was deleted")),k(t)}).catch(function(e){return console.log(e),e})},updateExpense:function(t){i(!0);var a={query:""};t.date=U(t.date),t.updateDate=U(t.updateDate),a="Expense"===t.tag?{query:"\n                          mutation UpdateExpense($id: ID!, $title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            updateExpense(expenseId: $id, expenseInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                              }\n                          }\n                        ",variables:{id:t.id,title:t.title,description:t.description,price:t.price,group:t.group,createdAt:t.date,updatedAt:t.updateDate}}:{query:"\n                          mutation UpdateIncome($id: ID!, $title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            updateIncome(incomeId: $id, incomeInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                              }\n                          }\n                        ",variables:{id:t.id,title:t.title,description:t.description,price:t.price,group:t.group,createdAt:t.date,updatedAt:t.updateDate}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw i(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;var t=[];e.data.updateExpense?(e.data.updateExpense.tag="Expense",console.log(e.data.updateExpense),t=K(e.data.updateExpense),z(!0,"Confirmation","Expense was updated")):(e.data.updateIncome.tag="Income",console.log(e.data.updateIncome),t=K(e.data.updateIncome),z(!0,"Confirmation","Income was updated")),k(t),i(!1)}).catch(function(e){throw i(!1),console.log(e),z(!0,"Error",e),e})},isLoading:o,getAllOnFilter:ae,getAll:Z,showMore:P,setShowMore:B,submitExpenseFromImport:function(t){var a={query:""},n=U(t.createdAt);return a="Expense"===t.tag?{query:"\n                          mutation CreateExpense($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createExpense(expenseInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}}:{query:"\n                          mutation CreateIncome($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createIncome(incomeInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.createExpense?(e.data.createExpense.tag="Expense",e.data.createExpense):(e.data.createIncome.tag="Income",e.data.createIncome)}).catch(function(e){throw console.log(e),z(!0,"Error",e),e})}}},r.a.createElement(y.Provider,{value:{showInfoModal:p,setShowInfoModal:f,modalHeader:A,modalText:D,showModal:s,submitExpense:function(t){var a={query:""};i(!0);var n=U(t.date);a="Expense"===t.tag?{query:"\n                          mutation CreateExpense($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createExpense(expenseInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}}:{query:"\n                          mutation CreateIncome($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createIncome(incomeInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw i(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;i(!1),m(!1),e.data.createExpense?(z(!0,"Confirmation","Expense was created"),e.data.createExpense.tag="Expense",k([].concat(Object($.a)(O),[e.data.createExpense]))):(z(!0,"Confirmation","Income was created"),e.data.createIncome.tag="Income",k([].concat(Object($.a)(O),[e.data.createIncome])))}).catch(function(e){throw i(!1),m(!1),console.log(e),z(!0,"Error",e),e})},setShowModal:m,modalInfo:z,showImportModal:g,setShowIportModal:w}},r.a.createElement(de,null),r.a.createElement(fe,null),o?r.a.createElement(v,null):r.a.createElement(n.Fragment,null,r.a.createElement(C,null),r.a.createElement(Ne,null),r.a.createElement("div",{className:"center"},r.a.createElement(ue,null)))))}),we=a(718),xe=a(709),Se=(a(687),function(){var e=N._currentValue,t=Object(n.useState)({}),a=Object(b.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)({}),c=Object(b.a)(l,2),s=c[0],m=c[1],u=Object(n.useState)(!1),d=Object(b.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)(!1),h=Object(b.a)(E,2),g=h[0],S=h[1],O=Object(n.useState)(""),k=Object(b.a)(O,2),j=k[0],F=k[1],A=Object(n.useState)(),$=Object(b.a)(A,2),T=$[0],I=$[1],M=function(e,t,a){S(e),F(t),I(a)},D=Object(n.useState)("userSettings"),_=Object(b.a)(D,2),q=_[0],Y=_[1];Object(n.useEffect)(function(){P()},[]);var P=function(){f(!0);return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                userData {\n                    _id\n                    email\n                    name\n                    surname\n                    createdAt\n                    updatedAt\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(f(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return i(e.data.userData[0]),m(e.data.userData[0]),f(!1),e.data.expenses}).catch(function(e){return f(!1),console.log(e),e})};return p?r.a.createElement(v,null):r.a.createElement(n.Fragment,null,r.a.createElement(y.Provider,{value:{showInfoModal:g,setShowInfoModal:S,modalHeader:j,modalText:T,modalInfo:M}},r.a.createElement(C,null),r.a.createElement(we.a,{id:"settings-tab",activeKey:q,onSelect:function(e){return Y(e)}},r.a.createElement(xe.a,{eventKey:"userSettings",title:"userSettings"===q?r.a.createElement("span",{style:{color:"#ea97c4"}},r.a.createElement(se.e,{size:20}),"\xa0 User "):r.a.createElement("span",null,r.a.createElement(se.e,{size:20,color:"#aeaeae"}),"\xa0 User ")},r.a.createElement(w.d,{enableReinitialize:!0,initialValues:{firstName:s.name||"",lastName:s.surname||"",email:s.email||""},validationSchema:x.object().shape({firstName:x.string().required("First Name is required"),lastName:x.string().required("Last Name is required"),email:x.string().email("Email is invalid").required("Email is required")}),onSubmit:function(t){!function(t){t.updatedAt=JSON.stringify(ee()(new Date).valueOf()),f(!0);var a={query:"\n\n                              mutation UpdateUser($id: ID!, $name: String!, $surname: String!, $email: String!, $updatedAt: String!) {\n                                updateUser(userId: $id, name: $name, surname: $surname, email: $email, updatedAt: $updatedAt) {\n                                    name\n                                    surname\n                                    email\n                                  }\n                              }\n                            ",variables:{id:o._id,name:t.firstName,surname:t.lastName,email:t.email,updatedAt:t.updatedAt}};fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw f(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;console.log(e),m(e.data.updateUser),M(!0,"Confirmation","User was updated"),f(!1)}).catch(function(e){throw f(!1),console.log(e),M(!0,"Error",e),e})}(t)},render:function(e){var t=e.errors,a=(e.status,e.touched);return r.a.createElement(w.c,{className:"settings-form",id:"formContentUserSettings"},r.a.createElement("div",{className:"p-2"}),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"firstName"},"First Name"),r.a.createElement("div",{className:"col-sm-8 col-form-label"},r.a.createElement(w.b,{placeholder:"First name",name:"firstName",type:"text",className:"form-control"+(t.firstName&&a.firstName?" is-invalid":"")}),r.a.createElement(w.a,{name:"firstName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"lastName"},"Last Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Last name",name:"lastName",type:"text",className:"form-control"+(t.lastName&&a.lastName?" is-invalid":"")}),r.a.createElement(w.a,{name:"lastName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Email",name:"email",type:"text",className:"form-control"+(t.email&&a.email?" is-invalid":"")}),r.a.createElement(w.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn_main update-btn"},"Update")))}})),r.a.createElement(xe.a,{eventKey:"systemSettings",title:"systemSettings"===q?r.a.createElement("span",{style:{color:"#ea97c4"}},r.a.createElement(se.c,{size:20}),"\xa0 System "):r.a.createElement("span",null,r.a.createElement(se.c,{size:20,color:"#aeaeae"}),"\xa0 System ")},r.a.createElement("p",null,"11111")))))}),Oe=a(710),ke=a(713),je=a(703),Ce=a(712),Fe=a(247),Ae=(a(690),function(){return r.a.createElement(N.Consumer,null,function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(ke.a,{bg:"dark",variant:"dark"},r.a.createElement(ke.a.Brand,{as:Oe.a,to:"/"},r.a.createElement(Fe.b,{size:40,className:"main-navigation__logo"}),"Budget planner"),r.a.createElement(je.a,{className:"main-navigation__items"},!e.token&&r.a.createElement("li",null,r.a.createElement(je.a.Link,{as:Oe.a,to:"/auth"},"Sign in")),e.token&&r.a.createElement(Ce.a,{alignRight:!0,title:r.a.createElement("span",null,r.a.createElement(ne.d,{size:25})),id:"collasible-nav-dropdown"},r.a.createElement(Ce.a.Item,{as:Oe.a,to:"/settings"},"Settings"),r.a.createElement(Ce.a.Divider,null),r.a.createElement(Ce.a.Item,{onClick:e.logout},"Logout")),e.token&&r.a.createElement(Ce.a,{alignRight:!0,title:r.a.createElement("span",null,r.a.createElement(Fe.a,{size:25})),id:"collasible-nav-dropdown"},r.a.createElement(Ce.a.Item,{as:Oe.a,to:"/expenses"},"Expenses"),r.a.createElement(Ce.a.Item,{as:Oe.a,to:"/statistics"},"Statistics")))))})}),$e=(a(696),new h.a({uri:"/graphql"})),Te=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={token:null,userId:null},a.login=function(e,t){a.setState({token:e,userId:t})},a.logout=function(){fetch("/removeCookie",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){console.log(e.response.message)}).catch(function(e){console.log(e)}),a.setState({token:null,userId:null})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(g.a,{client:$e},r.a.createElement(d.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(N.Provider,{value:{token:this.state.token,userId:this.state.userId,login:this.login,logout:this.logout}},r.a.createElement(Ae,null),r.a.createElement("main",{className:"main-content"},r.a.createElement(p.a,null,r.a.createElement(f.a,{path:"/test",component:K}),this.state.token&&r.a.createElement(f.a,{path:"/expenses",component:ye}),this.state.token&&r.a.createElement(E.a,{from:"/",to:"/expenses",exact:!0}),this.state.token&&r.a.createElement(E.a,{from:"/auth",to:"/expenses",exact:!0}),!this.state.token&&r.a.createElement(f.a,{path:"/auth",component:F}),r.a.createElement(f.a,{path:"/events",component:L}),this.state.token&&r.a.createElement(f.a,{path:"/bookings",component:q}),this.state.token&&r.a.createElement(f.a,{path:"/settings",component:Se}),!this.state.token&&r.a.createElement(E.a,{to:"/auth",exact:!0})))))))}}]),t}(n.Component);i.a.render(r.a.createElement(Te,null),document.getElementById("root"))}},[[395,2,1]]]);
//# sourceMappingURL=main.9bb55460.chunk.js.map