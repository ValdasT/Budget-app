(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{131:function(e,t,a){},280:function(e,t,a){},311:function(e,t){},336:function(e,t,a){e.exports=a.p+"static/media/pig-face.96b2c961.png"},368:function(e,t,a){e.exports=a(718)},375:function(e,t,a){},377:function(e,t,a){},379:function(e,t,a){},538:function(e,t,a){},587:function(e,t,a){},694:function(e,t){},695:function(e,t){},696:function(e,t,a){},698:function(e,t,a){},700:function(e,t,a){},703:function(e,t,a){},705:function(e,t,a){},711:function(e,t,a){},718:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(28),c=a.n(o),l=(a(373),a(314)),s=a(315),i=a(344),m=a(316),u=a(345),d=a(731),p=a(732),f=a(734),E=a(730),g=a(343),h=a(342),b=a(11),v=(a(375),a(377),function(){return r.a.createElement("div",{className:"backdrop"})}),y=(a(379),function(){return r.a.createElement(n.Fragment,null,r.a.createElement(v,null),r.a.createElement("div",{className:"cssload-loader"},r.a.createElement("div",{className:"cssload-inner cssload-one"}),r.a.createElement("div",{className:"cssload-inner cssload-two"}),r.a.createElement("div",{className:"cssload-inner cssload-three"})))}),N=r.a.createContext({token:null,userId:null,login:function(e,t){},logout:function(){}}),x=r.a.createContext(),w=a(15),Y=a(16),O=function(){var e=Object(n.useContext)(N),t=e.submitHandler,a=e.switchModeHandler;return r.a.createElement(w.d,{initialValues:{firstName:"",lastName:"",email:"",password:"",confirmPassword:""},validationSchema:Y.object().shape({firstName:Y.string().required("First Name is required"),lastName:Y.string().required("Last Name is required"),email:Y.string().email("Email is invalid").required("Email is required"),password:Y.string().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:Y.string().oneOf([Y.ref("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,n=(e.status,e.touched);return r.a.createElement(w.c,{className:"auth-form",id:"formContentSignUp"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h4",null,"Create account")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"firstName"},"First Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"First name",name:"firstName",type:"text",className:"form-control"+(t.firstName&&n.firstName?" is-invalid":"")}),r.a.createElement(w.a,{name:"firstName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"lastName"},"Last Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Last name",name:"lastName",type:"text",className:"form-control"+(t.lastName&&n.lastName?" is-invalid":"")}),r.a.createElement(w.a,{name:"lastName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Email",name:"email",type:"text",className:"form-control"+(t.email&&n.email?" is-invalid":"")}),r.a.createElement(w.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Password",name:"password",type:"password",className:"form-control"+(t.password&&n.password?" is-invalid":"")}),r.a.createElement(w.a,{name:"password",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"confirmPassword"},"Confirm Password"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Confirm",name:"confirmPassword",type:"password",className:"form-control"+(t.confirmPassword&&n.confirmPassword?" is-invalid":"")}),r.a.createElement(w.a,{name:"confirmPassword",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Register"),r.a.createElement("button",{onClick:a,type:"button",className:"btn btn-secondary mr-2"},"Sign in")))}})},S=function(){var e=Object(n.useContext)(N),t=e.submitHandler,a=e.switchModeHandler;return r.a.createElement(w.d,{initialValues:{email:"",password:""},validationSchema:Y.object().shape({email:Y.string().email("Email is invalid").required("Email is required"),password:Y.string().required("Password is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,n=(e.status,e.touched);return r.a.createElement(w.c,{className:"auth-form",id:"formContentSignIn"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h4",null,"Sign in")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(w.b,{placeholder:"Email",name:"email",type:"text",className:"form-control"+(t.email&&n.email?" is-invalid":"")}),r.a.createElement(w.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(w.b,{placeholder:"Password",name:"password",type:"password",className:"form-control"+(t.password&&n.password?" is-invalid":"")}),r.a.createElement(w.a,{name:"password",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-actions"},r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Submit"),r.a.createElement("button",{onClick:a,type:"button",className:"btn btn-secondary mr-2"},"Sign up")))}})},M=a(727),D=a(521),j=(a(131),function(){var e=Object(n.useContext)(x),t=e.modalHeader,a=e.modalText,o=e.showInfoModal,c=e.setShowInfoModal,l=function(){return c(!1)};return r.a.createElement(n.Fragment,null,r.a.createElement(M.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:o,onHide:l},r.a.createElement(M.a.Header,{closeButton:!0},r.a.createElement(M.a.Title,null,t)),r.a.createElement(M.a.Body,null,a),r.a.createElement(M.a.Footer,null,r.a.createElement(D.a,{variant:"secondary",onClick:l},"Ok"))))}),F=function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),l=Object(b.a)(c,2),s=l[0],i=l[1],m=Object(n.useState)(!1),u=Object(b.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(""),E=Object(b.a)(f,2),g=E[0],h=E[1],v=Object(n.useState)(),w=Object(b.a)(v,2),Y=w[0],M=w[1];Object(n.useEffect)(function(){C()},[]);var D=function(e,t,a){p(e),h(t),M(a)},F=Object(n.useContext)(N).login,k=function(){return o(!a)},C=function(){fetch("/cookie",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){F(e.response.token,e.response.userId)}).catch(function(e){console.log("There is no cookie!")})},A=function(e,t){var a={query:"\n            mutation CreateSettings($dailyBudget: String!, $weeklyBudget: String!, $monthlyBudget: String!, $members: String!, $categories: String!,  $currency: String!, $userId: String!, $creatorEmail: String! ) {\n                createSettings(settingsInput:{dailyBudget: $dailyBudget, weeklyBudget: $weeklyBudget, monthlyBudget: $monthlyBudget, members:$members, categories:$categories,currency:$currency, userId: $userId, creatorEmail: $creatorEmail}) {\n                    _id\n                   \n                  }\n              }\n      ",variables:{dailyBudget:"",weeklyBudget:"",monthlyBudget:"",members:"",categories:"",currency:"",userId:e.userId,creatorEmail:e.creatorsEmail}};fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then(function(e){if(!e.ok)throw i(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;e.data&&(D(!0,"Confirmation","Hi ".concat(t.firstName," ").concat(t.lastName,", your account was created. Now You can sign in.")),k(),i(!1))}).catch(function(e){throw i(!1),console.log(e),D(!0,"Error",e),e})};return r.a.createElement(x.Provider,{value:{modalHeader:g,modalText:Y,showInfoModal:d,setShowInfoModal:p}},r.a.createElement(N.Provider,{value:{submitHandler:function(e){var t=JSON.stringify((new Date).getTime());i(!0);var n={query:"\n              query Login($email: String!, $password: String!) {\n                login(email: $email, password: $password) {\n                  userId\n                  token\n                }\n              }\n            ",variables:{email:e.email,password:e.password}};a&&(n={query:"\n            mutation CreateUser($email: String!, $password: String!, $name: String!, $surname: String!, $createdAt: String!, $updatedAt: String!) {\n              createUser(userInput: {email: $email, password: $password, name: $name, surname: $surname, createdAt: $createdAt, updatedAt: $updatedAt}) {\n                _id\n                email\n              }\n            }\n          ",variables:{email:e.email,password:e.password,name:e.firstName,surname:e.lastName,createdAt:t,updatedAt:t}}),fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(e){if(!e.ok)throw i(!1),e.statusText;return e.json()}).then(function(t){if(t.data.login)i(!1),F(t.data.login.token,t.data.login.userId);else{var a={userId:t.data.createUser._id,creatorsEmail:t.data.createUser.email};A(a,e)}}).catch(function(e){throw i(!1),D(!0,"Oops!","Your email or password is incorect."),e})},switchModeHandler:k}},r.a.createElement(j,null),s?r.a.createElement(y,null):r.a.createElement(n.Fragment,null,a?r.a.createElement(O,null):r.a.createElement(S,null))))},k=a(164),C=a(34),A=a(145),T=a.n(A),I=a(146),B=a.n(I),$=(a(538),function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),l=Object(b.a)(c,2),s=l[0],i=l[1],m=Object(n.useState)(!1),u=Object(b.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(""),E=Object(b.a)(f,2),g=E[0],h=E[1],v=Object(n.useState)(),N=Object(b.a)(v,2),w=N[0],Y=N[1],O=Object(n.useState)(!1),S=Object(b.a)(O,2),M=S[0],D=S[1],F=function(e,t,a){D(e),h(t),Y(a)},A=Object(n.useCallback)(function(e){e.length&&(o(function(){return[e[0]]}),p(!1))},[]),I=Object(k.a)({onDrop:A,accept:"text/csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, image/png, image/jpeg, application/pdf",minSize:0,maxSize:50173280}),$=I.isDragActive,_=I.getRootProps,q=I.getInputProps,z=I.isDragReject,P=I.rejectedFiles,R=P.length>0&&P[0].size>50173280;return r.a.createElement(n.Fragment,null,r.a.createElement(x.Provider,{value:{showInfoModal:M,setShowInfoModal:D,modalHeader:g,modalText:w,modalInfo:F}},s?r.a.createElement(y,null):r.a.createElement(n.Fragment,null,r.a.createElement(j,null),r.a.createElement("div",{className:"container h-100"},r.a.createElement("div",{className:"row h-100 justify-content-center"},r.a.createElement("div",{className:"dropBox"},d?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Please select a file first!"):null,r.a.createElement("div",null,r.a.createElement("ul",null,a.map(function(e){return r.a.createElement("li",{className:"text-left",key:e.name},"".concat((n=e.name,n.length>20?n.substring(0,20)+"...":n),"  - (").concat((t=e.size)<1024?t+" Bytes":t<1048576?(t/1024).toFixed(3)+" KB":t<1073741824?(t/1048576).toFixed(3)+" MB":(t/1073741824).toFixed(3)+" GB",")"),r.a.createElement("button",{className:"btn_remove",onClick:function(){return function(e){var t=[];a.map(function(a){a.name!==e.name&&a.size!==e.size&&t.push(a)}),o(t)}(e)}},r.a.createElement("i",null,r.a.createElement(C.a,{size:20}))));var t,n})),r.a.createElement("div",Object.assign({className:"drop_zone container text-center "},_()),r.a.createElement("input",q()),!$&&r.a.createElement("i",null,"Click here or drop a file to upload! ",r.a.createElement(C.d,{size:20})),$&&!z&&"Drop it here!",z&&"File type not accepted, sorry!",R&&r.a.createElement("div",{className:"text-danger mt-2"},"File is too large."))),r.a.createElement("button",{className:"btn btn_main button_Upload",onClick:function(){!function(e){if(e.length){var t=new FormData;t.append("file",e[0]),i(!0),fetch("/upload",{method:"POST",body:t}).then(function(e){if(console.log(e),i(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e}).then(function(e){o([]),F(!0,"Succsess","File was uploaded to db."),i(!1)}).catch(function(e){i(!1),F(!0,"Error",e),console.log(e)})}else p(!0)}(a)}}," Upload"),r.a.createElement("button",{className:"btn btn_main button_Upload",onClick:function(){!function(){var e="7c6ee306971e226ac39f2b5ffc53d192.png";B()({method:"GET",url:"/file/".concat(e),responseType:"blob"}).then(function(t){console.log(t),T.a.saveAs(t.data,e)}).then(function(){console.log("Completed")}).catch(function(e){console.log(e)})}()}}," Download")))))))}),_=a(35),q=a.n(_),z=a(60),P=a(61),R=a(5),U=a.n(R),J=r.a.createContext(),L=a(66),H=a.n(L),G=a(27),V=(a(195),function(e){return U()(e,"x").format("MM/DD/YYYY")}),K=function(e){var t=e.setting,a=Object(n.useContext)(x),o=a.submitExpense,c=a.showModal,l=a.setShowModal,s=a.expense,i=a.onUpdate,m="GBD"===t.currency?"\xa3":"Dollar"===t.currency?"$":"\u20ac",u=function(){return l(!c)},d=U()().format("MM/DD/YYYY"),p=Object(n.useState)(function(e){var t=[];return e.categories.split(";").forEach(function(e){e.length&&t.push(e)}),t}(t)),f=Object(b.a)(p,2),E=f[0],g=(f[1],Object(n.useState)(new Date(s?V(s.createdAt):d))),h=Object(b.a)(g,2),v=h[0],y=h[1];return r.a.createElement(n.Fragment,null,r.a.createElement(M.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:c,onHide:u},r.a.createElement(M.a.Header,{closeButton:!0},i?r.a.createElement(M.a.Title,null,"Update expense"):r.a.createElement(M.a.Title,null,"Add expense")),r.a.createElement(M.a.Body,null,r.a.createElement(w.d,{initialValues:{tag:s?s.tag:"",title:s?s.title:"",description:s?s.description:"",group:s?s.group:"",price:s?s.price:"",date:s?V(s.createdAt):d,updateDate:s?V(s.updatedAt):d},validationSchema:Y.object().shape({title:Y.string().required("title is required"),description:Y.string(),group:Y.string().required("Category is required"),tag:Y.string().required("Type is required"),price:Y.number().required("Price is required"),date:Y.date().required("Date is required")}),onSubmit:function(e){o(e)},render:function(e){var t=e.errors,a=e.values,n=e.touched,o=e.handleChange,c=e.setFieldValue,l=e.handleBlur;return r.a.createElement(w.c,{className:"auth-form"},r.a.createElement("div",{className:"p-2"}),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Type"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("select",{name:"tag",onChange:o,onBlur:l,value:a.tag,className:"custom-select mr-sm-2 form-control"+(t.tag&&n.tag?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:""},"Select a type"),r.a.createElement("option",{value:"Expense"},"Expense"),r.a.createElement("option",{value:"Income"},"Income")),r.a.createElement(w.a,{name:"tag",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Title"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(w.b,{placeholder:"Title",name:"title",type:"text",className:"form-control"+(t.title&&n.title?" is-invalid":"")}),r.a.createElement(w.a,{name:"title",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"description"},"Description"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(w.b,{component:"textarea",placeholder:"Description",name:"description",type:"text",className:"form-control"}),r.a.createElement(w.a,{name:"description",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Group"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("select",{name:"group",onChange:o,onBlur:l,value:a.group,className:"custom-select mr-sm-2 form-control"+(t.group&&n.group?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:""},"Select a category"),E.map(function(e){return r.a.createElement("option",{key:e,value:e},e)})),r.a.createElement(w.a,{name:"group",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Price"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("input",{placeholder:"0.00",name:"price",onChange:function(e){c("price",function(e){var t=e.target.value;return 1===t.length&&"."===t&&(t=t.slice(0,-1)),2===t.length&&"00"===t&&(t=t.slice(0,-1)),t.split(".").length-1>1&&(t=t.slice(0,-1)),(t=t.indexOf(".")>=0?t.substr(0,t.indexOf("."))+t.substr(t.indexOf("."),3):t).replace(/[^\d.-]/g,"").replace("-","")}(e))},value:a.price,className:"form-control"+(t.price&&n.price?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{style:{fontSize:"15px"},className:"input-group-text"},m)),r.a.createElement(w.a,{name:"price",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"date"},"Date"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement(H.a,{className:"form-control not-round-right-corner"+(t.date&&n.date?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",{className:""},a.date)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"date",selected:v,placeholder:"Enter date",onChange:function(e){var t;c("date",(t=e,U()(t).format("MM/DD/YYYY"))),y(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(G.b,{className:"",size:20}))))),r.a.createElement(w.a,{name:"date",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-actions float-right"},i?r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Update"):r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Submit"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:u},"Cancel")))}}))))},X=function(){var e=Object(n.useContext)(x),t=e.modalText,a=e.showInfoModal,o=e.setShowInfoModal,c=e.actionFunction,l=function(){return o(!1)};return r.a.createElement(n.Fragment,null,r.a.createElement(M.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:a,onHide:l},r.a.createElement(M.a.Header,{closeButton:!0},r.a.createElement(M.a.Title,null,"Please confirm")),r.a.createElement(M.a.Body,null,t),r.a.createElement(M.a.Footer,null,r.a.createElement(D.a,{variant:"primary",onClick:c},"Yes"),r.a.createElement(D.a,{variant:"secondary",onClick:l},"Cancel"))))},W=(a(280),function(e){var t,a=e.expense,o=e.setting,c=N._currentValue,l=Object(n.useState)(!1),s=Object(b.a)(l,2),i=s[0],m=s[1],u=Object(n.useState)(),d=Object(b.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)(),g=Object(b.a)(E,2),h=g[0],v=g[1],y=Object(n.useState)(!1),w=Object(b.a)(y,2),Y=w[0],O=w[1],S="GBD"===o.currency?"\xa3":"Dollar"===o.currency?"$":"\u20ac",M=function(e,t,a){m(e),f(t),v(a)},D=Object(n.useContext)(J),j=D.removeExpense,F=D.updateExpense,k=D.showMore;return r.a.createElement(x.Provider,{value:{modalText:p,showInfoModal:i,setShowInfoModal:m,actionFunction:function(){j(h)},showModal:Y,setShowModal:O,expense:a,onUpdate:!0,submitExpense:function(e){e.id=a._id,F(e)}}},r.a.createElement(X,null),r.a.createElement(K,{setting:o}),r.a.createElement("span",{className:k?"card_more":"card"},r.a.createElement("div",{style:{background:"rgb(249, 248, 248)"}},r.a.createElement("div",{className:k?"card_title_more":"card_title"}," ",a.title)),r.a.createElement("div",{className:"card_date"},(t=a.createdAt,U()(t,"x").format("MM/DD/YYYY"))),r.a.createElement("div",{className:k?"card_group":"card_group invisible"},"Group: ",a.group),r.a.createElement("div",{className:k?"card_group":"card_group invisible"},"Creator: ",o.creatorEmail),r.a.createElement("div",{className:k?"card_description":"card_description invisible"},a.description),"Expense"===a.tag?r.a.createElement("div",{className:"card_price_expense"},"-",a.price," ",S," "):r.a.createElement("div",{className:"card_price_income"},a.price," ",S," "),c.userId===o.creatorId?r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"btn card_removeButton",onClick:function(){return M(!0,"Are you sure whant to delete this item?",a)}},r.a.createElement("i",null,r.a.createElement(G.d,{size:20}))),r.a.createElement("button",{className:"btn card_editButton",onClick:function(){return O(!Y)}},r.a.createElement("i",null,r.a.createElement(G.c,{size:20})))):r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"btn card_removeButton disabled",disabled:!0,onClick:function(){return M(!0,"Are you sure whant to delete this item?",a)}},r.a.createElement("i",null,r.a.createElement(G.d,{size:20}))),r.a.createElement("button",{className:"btn card_editButton disabled",disabled:!0,onClick:function(){return O(!Y)}},r.a.createElement("i",null,r.a.createElement(G.c,{size:20}))))))}),Q=a(223),Z=function(){var e=Object(n.useContext)(x),t=e.showModal,a=e.setShowModal,o=e.showImportModal,c=e.setShowIportModal,l=Object(n.useContext)(J),s=l.setShowMore,i=l.showMore,m=l.allExpenses,u=l.settings;return r.a.createElement("span",{className:"card_first card"},r.a.createElement(n.Fragment,null,r.a.createElement(j,null),r.a.createElement("div",{className:"row d-flex align-self-center"},r.a.createElement("button",{className:"btn_one",onClick:function(){return a(!t)}},r.a.createElement("i",null,r.a.createElement(C.b,{size:30}))),r.a.createElement("button",{className:"btn_upload",onClick:function(){return c(!o)}},r.a.createElement("i",null,r.a.createElement(C.d,{size:25}))),m.length?r.a.createElement("button",{className:"btn_one",onClick:function(){return s(!i)}},i?r.a.createElement("i",null,r.a.createElement(Q.a,{size:30})):r.a.createElement("i",null,r.a.createElement(Q.b,{size:30}))):null),t&&r.a.createElement(n.Fragment,null,r.a.createElement(K,{setting:u[0]}))))},ee=(a(587),function(){var e=Object(n.useContext)(J),t=e.allExpenses,a=e.settings;return r.a.createElement(n.Fragment,null,r.a.createElement(Z,null),t.map(function(e){return a.map(function(t){return e.creatorId===t.creatorId?r.a.createElement(W,{className:"expenses_list",key:e._id,expense:e,setting:t}):null})}))}),te=function(){var e=Object(n.useContext)(J),t=e.getAllOnFilter,a=e.getAll,o=U()().format("MM/DD/YYYY"),c=U()().subtract(1,"months").format("MM/DD/YYYY"),l=Object(n.useState)(new Date(c)),s=Object(b.a)(l,2),i=s[0],m=s[1],u=Object(n.useState)(new Date(o)),d=Object(b.a)(u,2),p=d[0],f=d[1],E=function(e){return U()(e).format("MM/DD/YYYY")},g=function(e,n){var r={dateFrom:"",dateTo:"",tag:n};switch(e){case"today":r={dateFrom:U()().format("MM/DD/YYYY"),dateTo:U()().format("MM/DD/YYYY"),tag:n},t(r);break;case"week":r={dateFrom:U()().startOf("week").format("MM/DD/YYYY"),dateTo:U()().endOf("week").format("MM/DD/YYYY"),tag:n},t(r);break;case"month":r={dateFrom:U()().startOf("month").format("MM/DD/YYYY"),dateTo:U()().endOf("month").format("MM/DD/YYYY"),tag:n},t(r);break;case"year":r={dateFrom:U()().startOf("year").format("MM/DD/YYYY"),dateTo:U()().endOf("year").format("MM/DD/YYYY"),tag:n},t(r);break;case"all":a(r.tag);break;default:r={dateFrom:U()().startOf("month").format("MM/DD/YYYY"),dateTo:U()().endOf("month").format("MM/DD/YYYY"),tag:n},t(r)}};return r.a.createElement(n.Fragment,null,r.a.createElement(w.d,{initialValues:{dateFrom:c,dateTo:o,tag:"All"},validationSchema:Y.object().shape({dateFrom:Y.date().required("Date is required"),dateTo:Y.date().required("Date is required"),tag:Y.string()}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,a=e.values,n=e.touched,o=e.setFieldValue,c=e.handleChange,l=e.handleBlur;return r.a.createElement(w.c,null,r.a.createElement("div",{className:"form-group row col-sm-12  justify-content-center mb-3"},r.a.createElement("button",{type:"button",className:" col-sm-2 btn btn_with_line",onClick:function(){g("today",a.tag),o("dateFrom",U()().format("MM/DD/YYYY")),o("dateTo",U()().format("MM/DD/YYYY")),m(U()()._d),f(U()()._d)}},"Today"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){g("week",a.tag),o("dateFrom",U()().startOf("week").format("MM/DD/YYYY")),o("dateTo",U()().endOf("week").format("MM/DD/YYYY")),m(U()().startOf("week")._d),f(U()().endOf("week")._d)}},"This week"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){g("month",a.tag),o("dateFrom",U()().startOf("month").format("MM/DD/YYYY")),o("dateTo",U()().endOf("month").format("MM/DD/YYYY")),m(U()().startOf("month")._d),f(U()().endOf("month")._d)}},"This month"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){g("year",a.tag),o("dateFrom",U()().startOf("year").format("MM/DD/YYYY")),o("dateTo",U()().endOf("year").format("MM/DD/YYYY")),m(U()().startOf("year")._d),f(U()().endOf("year")._d)}},"This year"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){return g("all",a.tag)}},"All")),r.a.createElement("div",{className:"form-group row col-sm-12  justify-content-center mb-2"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:" col-form-label",htmlFor:"title"},"Type:"),r.a.createElement("div",{className:"ml-3 mr-2"},r.a.createElement("select",{name:"tag",onChange:c,onBlur:l,value:a.tag,className:"custom-select mr-sm-2 form-control"+(t.tag&&n.tag?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:"All"},"All"),r.a.createElement("option",{value:"Expense"},"Expenses"),r.a.createElement("option",{value:"Income"},"Incomes")),r.a.createElement(w.a,{name:"tag",component:"div",className:"invalid-feedback"}))),r.a.createElement("label",{className:" col-form-label ml-4",htmlFor:"dateFrom"},"From:"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2 mr-sm-2 ml-3 mr-3"},r.a.createElement(H.a,{selected:i,startDate:i,endDate:p,className:"form-control not-round-right-corner"+(t.dateFrom&&n.dateFrom?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",null,a.dateFrom)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"dateFrom",placeholder:"Enter date",onChange:function(e){o("dateFrom",E(e)),m(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(G.b,{className:"",size:20}))))),r.a.createElement(w.a,{name:"dateTo",component:"div",className:"invalid-feedback"}),r.a.createElement("label",{className:"col-form-label ml-5 mr-3",htmlFor:"dateTo"},"To:"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement(H.a,{selected:p,startDate:i,endDate:p,className:"form-control not-round-right-corner"+(t.dateTo&&n.dateTo?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",null,a.dateTo)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"dateTo",placeholder:"Enter date",onChange:function(e){o("dateTo",E(e)),f(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(G.b,{className:"",size:20}))))),r.a.createElement(w.a,{name:"dateTo",component:"div",className:"invalid-feedback"}),r.a.createElement("div",{className:"float-right ml-5"},r.a.createElement("button",{type:"submit",className:"btn btn_main"},"Filter"))))}}))},ae=a(21),ne=function(){var e=Object(n.useContext)(J).allExpenses,t=Object(n.useState)([]),a=Object(b.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(!0),s=Object(b.a)(l,2),i=s[0],m=s[1],u=Object(n.useState)(!0),d=Object(b.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)(!0),g=Object(b.a)(E,2),h=g[0],v=g[1],y=Object(n.useState)("auto"),N=Object(b.a)(y,2),x=N[0],w=N[1],Y=Object(n.useState)("auto"),O=Object(b.a)(Y,2),S=O[0],M=O[1],D={first:[]};Object(n.useEffect)(function(){!function(e){var t=[],a={expenses:0,incomes:0,budget:0};e.forEach(function(e){e.date=U()(e.createdAt,"x").format("DD/MM"),"Expense"===e.tag?(a.expenses=a.expenses+parseFloat(e.price),a.budget=a.budget-parseFloat(e.price),t.push({date:e.date,Expenses:a.expenses.toFixed(2),Incomes:a.incomes.toFixed(2),Budget:a.budget.toFixed(2)})):(a.incomes=a.incomes+parseFloat(e.price),a.budget=a.budget+parseFloat(e.price),t.push({date:e.date,Expenses:a.expenses.toFixed(2),Incomes:a.incomes.toFixed(2),Budget:a.budget.toFixed(2)}))}),D.first.push(Math.min.apply(Math,t.map(function(e){return e.Incomes}))),D.first.push(Math.max.apply(Math,t.map(function(e){return e.Incomes}))),D.first.push(Math.min.apply(Math,t.map(function(e){return e.Budget}))),D.first.push(Math.max.apply(Math,t.map(function(e){return e.Budget}))),D.first.push(Math.min.apply(Math,t.map(function(e){return e.Expenses}))),D.first.push(Math.max.apply(Math,t.map(function(e){return e.Expenses}))),D.smallest=Math.min.apply(Math,D.first.map(function(e){return e})),D.biggest=Math.max.apply(Math,D.first.map(function(e){return e})),w(D.biggest),M(D.smallest),c(t)}(e)},[e]);return r.a.createElement(n.Fragment,null,e.length?r.a.createElement(ae.h,{width:"95%",height:150},r.a.createElement(ae.b,{data:o,margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,h?r.a.createElement("linearGradient",{id:"colorExp",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#FF0000",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#FF0000",stopOpacity:0})):null,",",p?r.a.createElement("linearGradient",{id:"colorInc",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})):null,",",i?r.a.createElement("linearGradient",{id:"colorBud",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#0000FF",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#0000FF",stopOpacity:0})):null),r.a.createElement(ae.c,{vertical:!1,horizontal:!1}),r.a.createElement(ae.e,{onClick:function(e){!function(e){switch(e.dataKey){case"Budget":m(!i);break;case"Incomes":f(!p);break;case"Expenses":v(!h);break;default:console.log("incorect name")}}(e)}}),r.a.createElement(ae.i,null),r.a.createElement(ae.a,{type:"monotone",dataKey:"Budget",stroke:"#0000FF",fillOpacity:1,fill:"url(#colorBud)"}),r.a.createElement(ae.a,{type:"monotone",dataKey:"Incomes",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorInc)"}),r.a.createElement(ae.a,{type:"monotone",dataKey:"Expenses",stroke:"#FF0000",fillOpacity:1,fill:"url(#colorExp)"}),r.a.createElement(ae.j,{dataKey:"date",fontSize:"10"}),r.a.createElement(ae.k,{type:"number",domain:[S,x],allowDataOverflow:!0,fontSize:"10"}))):null)},re=a(335),oe=a.n(re),ce=a(225),le=a.n(ce),se=function(){var e=Object(n.useContext)(x),t=e.modalInfo,a=e.showImportModal,o=e.setShowIportModal,c=Object(n.useContext)(J),l=c.submitExpenseFromImport,s=c.setAllExpenses,i=Object(n.useState)([]),m=Object(b.a)(i,2),u=m[0],d=m[1],p=Object(n.useState)(!1),f=Object(b.a)(p,2),E=f[0],g=f[1],h=Object(n.useState)(!1),v=Object(b.a)(h,2),N=v[0],w=v[1],Y=function(){return o(!1)},O=function(e){oe.a.parse(e,{complete:function(e){S(e)}})},S=function(){var e=Object(z.a)(q.a.mark(function e(a){var n,r,o,c;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{title:"",description:"",price:"",group:"",createdAt:"",tag:""}],r=[],e.next=4,j(a.data[0]);case 4:(o=e.sent).forEach(function(e,t){"title"===e.name.toLowerCase()&&(n[0].title=o[t].id),"description"===e.name.toLowerCase()&&(n[0].description=o[t].id),"price"===e.name.toLowerCase()&&(n[0].price=o[t].id),"group"===e.name.toLowerCase()&&(n[0].group=o[t].id),"date"===e.name.toLowerCase()&&(n[0].createdAt=o[t].id),"type"===e.name.toLowerCase()&&(n[0].tag=o[t].id)}),a.data.forEach(function(e,t){0!==t&&e[0].length&&r.push({title:e[n[0].title],description:e[n[0].description],price:e[n[0].price],group:e[n[0].group],createdAt:e[n[0].createdAt],tag:e[n[0].tag]})}),c=[],r.forEach(function(){var e=Object(z.a)(q.a.mark(function e(a){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,l(a);case 3:if(e.t1=e.sent,e.t0.push.call(e.t0,e.t1),n.length!==c.length){e.next=12;break}return e.next=8,s(c);case 8:t(!0,"Confirmation","File was uploaded"),g(!1),d([]),Y();case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),j=function(e){return new Promise(function(a,n){var r=[],o=[];if(["Title","Price","Group","Date","Type","Description"].forEach(function(t){var a=!1;e.forEach(function(e,n){t.toLocaleLowerCase()===e.toLowerCase()&&(a=!0,r.push({name:t,id:n}))}),a||o.push(t)}),o.length){var c="";o.forEach(function(e,t){o.length===t+1?c+=' "'.concat(e,'".'):c+=' "'.concat(e,'";')}),t(!0,"Error","Inappropriate file. Missing fields in the file:".concat(c)),g(!1),d([]),Y()}else a(r)})},F=Object(n.useCallback)(function(e){e.length&&(d(function(){return[e[0]]}),w(!1))},[]),A=Object(k.a)({onDrop:F,accept:"text/csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",minSize:0,maxSize:50173280}),I=A.isDragActive,$=A.getRootProps,_=A.getInputProps,P=A.isDragReject,R=A.rejectedFiles,U=R.length>0&&R[0].size>50173280;return r.a.createElement(n.Fragment,null,r.a.createElement(M.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:a,onHide:Y},r.a.createElement(M.a.Header,{closeButton:!0},r.a.createElement(M.a.Title,null,"Import expenses ",E)),E?r.a.createElement(y,null):r.a.createElement(n.Fragment,null,r.a.createElement(M.a.Body,null,N?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Please select a file first!"):null,r.a.createElement("div",null,r.a.createElement("ul",null,u.map(function(e){return r.a.createElement("li",{className:"",key:e.name},"".concat((a=e.name,a.length>20?a.substring(0,20)+"...":a),"  - (").concat((t=e.size)<1024?t+" Bytes":t<1048576?(t/1024).toFixed(3)+" KB":t<1073741824?(t/1048576).toFixed(3)+" MB":(t/1073741824).toFixed(3)+" GB",")"),r.a.createElement("button",{className:"btn_remove",onClick:function(){return function(e){var t=[];u.map(function(a){a.name!==e.name&&a.size!==e.size&&t.push(a)}),d(t)}(e)}},r.a.createElement("i",null,r.a.createElement(C.a,{size:20}))));var t,a})),r.a.createElement("div",Object.assign({className:"drop_zone container text-center "},$()),r.a.createElement("input",_()),!I&&r.a.createElement("i",null,"Click here or drop a file to upload! ",r.a.createElement(C.d,{size:20})),I&&!P&&"Drop it here!",P&&"File type not accepted, sorry!",U&&r.a.createElement("div",{className:"text-danger mt-2"},"File is too large."))),r.a.createElement("div",{className:"mt-2"},r.a.createElement("a",{onClick:function(){var e;e="9d51495ee31655607488187b3b3f4b14.xlsx",B()({method:"GET",url:"/file/".concat(e),responseType:"blob"}).then(function(e){console.log(e),T.a.saveAs(e.data,"example.xlsx")}).then(function(){console.log("Completed")}).catch(function(e){console.log(e)})},style:{cursor:"pointer"}},r.a.createElement("i",null,r.a.createElement(G.a,{size:20,color:"grey"}))," - Download template file.")))),r.a.createElement(M.a.Footer,null,r.a.createElement(D.a,{type:"button",variant:"primary",disabled:E,onClick:function(){return function(e){if(e.length){g(!0);var t=e[0].name.split(".");if("csv"===(t=t[t.length-1].toLowerCase()))O(e[0]);else{var a=new FileReader;a.onload=function(e){var t=e.target.result,a=le.a.read(t,{type:"binary",header:1,cellDates:!0,dateNF:"MM/DD/YYYY"}),n=a.SheetNames[0],r=a.Sheets[n],o=le.a.utils.sheet_to_csv(r,{header:1,raw:!1});O(o)},a.readAsBinaryString(e[0])}}else w(!0)}(u)}},"Upload"),r.a.createElement(D.a,{variant:"secondary",disabled:E,onClick:Y},"Cancel"))))},ie=a(81),me=(a(696),a(336)),ue=a.n(me),de=function(e,t,a){var n=U()().format("YYYY-MM-DD"),r=0;return a.forEach(function(e){"Expense"===e.tag&&n===U()(e.createdAt,"x").format("YYYY-MM-DD")&&(r+=parseFloat(e.price))}),r=r.toFixed(2),t[0].dailyBudget.length?(e=e.replace("{DAY_EXPENSES}",r).replace("{CURRENCY}",Ne(t[0])),"".concat(e," and your daily budget is ").concat(t[0].dailyBudget," ").concat(Ne(t[0]))):e.replace("{DAY_EXPENSES}",r).replace("{CURRENCY}",Ne(t[0]))},pe=function(e,t,a){var n=U()().startOf("year").format("YYYY-MM-DD"),r=U()().endOf("year").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Expense"===e.tag&&n<=U()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=U()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),e.replace("{YEAR_EXPENSES}",o).replace("{CURRENCY}",Ne(t[0]))},fe=function(e,t,a){var n=U()().startOf("week").format("YYYY-MM-DD"),r=U()().endOf("week").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Expense"===e.tag&&n<=U()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=U()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),t[0].weeklyBudget.length?(e=e.replace("{WEEK_EXPENSES}",o).replace("{CURRENCY}",Ne(t[0])),"".concat(e," and your weekly budget is ").concat(t[0].weeklyBudget," ").concat(Ne(t[0]))):e.replace("{WEEK_EXPENSES}",o).replace("{CURRENCY}",Ne(t[0]))},Ee=function(e,t,a){var n=U()().startOf("month").format("YYYY-MM-DD"),r=U()().endOf("month").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Expense"===e.tag&&n<=U()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=U()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),t[0].monthlyBudget.length?(e=e.replace("{MONTH_EXPENSES}",o).replace("{CURRENCY}",Ne(t[0])),"".concat(e," and your monthly budget is ").concat(t[0].monthlyBudget," ").concat(Ne(t[0]))):e.replace("{MONTH_EXPENSES}",o).replace("{CURRENCY}",Ne(t[0]))},ge=function(e,t,a){var n=U()().format("YYYY-MM-DD"),r=0;return a.forEach(function(e){"Income"===e.tag&&n===U()(e.createdAt,"x").format("YYYY-MM-DD")&&(r+=parseFloat(e.price))}),r=r.toFixed(2),e.replace("{DAY_INCOME}",r).replace("{CURRENCY}",Ne(t[0]))},he=function(e,t,a){var n=U()().startOf("year").format("YYYY-MM-DD"),r=U()().endOf("year").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Income"===e.tag&&n<=U()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=U()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),e.replace("{YEAR_INCOME}",o).replace("{CURRENCY}",Ne(t[0]))},be=function(e,t,a){var n=U()().startOf("week").format("YYYY-MM-DD"),r=U()().endOf("week").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Income"===e.tag&&n<=U()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=U()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),e.replace("{WEEK_INCOME}",o).replace("{CURRENCY}",Ne(t[0]))},ve=function(e,t,a){var n=U()().startOf("month").format("YYYY-MM-DD"),r=U()().endOf("month").format("YYYY-MM-DD"),o=0;return a.forEach(function(e){"Income"===e.tag&&n<=U()(e.createdAt,"x").format("YYYY-MM-DD")&&r>=U()(e.createdAt,"x").format("YYYY-MM-DD")&&(o+=parseFloat(e.price))}),o=o.toFixed(2),e.replace("{MONTH_INCOME}",o).replace("{CURRENCY}",Ne(t[0]))},ye=function(e,t,a){var n=[];a.forEach(function(e){if("Expense"===e.tag){var t=!1;n.forEach(function(a){a.groupName===e.group&&(t=!0,a.amount+=parseFloat(e.price))}),t||n.push({groupName:e.group,amount:parseFloat(e.price)})}}),n.forEach(function(e){e.amount=e.amount.toFixed(2)}),n=n.sort(function(e,t){return parseFloat(t.amount)-parseFloat(e.amount)});var r="";return n.forEach(function(e,a){n.length===a+1?r+="\u2022 ".concat(e.groupName," - ").concat(e.amount," ").concat(Ne(t[0]),"."):r+="\u2022 ".concat(e.groupName," - ").concat(e.amount," ").concat(Ne(t[0]),"; ")}),e.includes("{CATEGORY_NAME}")?"".concat(e.replace("{CATEGORY_NAME}",n[0].groupName)," - ").concat(n[0].amount," ").concat(Ne(t[0]),"."):e.replace("{All_GROUPS}",r)},Ne=function(e){return"GBD"===e.currency?"\xa3":"Dollar"===e.currency?"$":"\u20ac"},xe=function(){var e=Object(n.useContext)(J),t=e.settingsForBot,a=e.allExpensesForBot,o=e.user,c=N._currentValue;Object(n.useEffect)(function(){c.token&&(Object(ie.dropMessages)(),l("Hello"))},[c.token]);var l=function(e){Object(ie.toggleMsgLoader)();var n={userMessage:e};fetch("/watson",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){Object(ie.toggleMsgLoader)(),e.response.forEach(function(e){var n=function(e,t,a,n){return e.includes("{NAME}")?e.replace("{NAME}",n.name).replace("{SURNAME}",n.surname):e.includes("{DAY_EXPENSES}")?e=de(e,t,a):e.includes("{YEAR_EXPENSES}")?e=pe(e,t,a):e.includes("{WEEK_EXPENSES}")?e=fe(e,t,a):e.includes("{MONTH_EXPENSES}")?e=Ee(e,t,a):e.includes("{DAY_INCOME}")?e=ge(e,t,a):e.includes("{YEAR_INCOME}")?e=he(e,t,a):e.includes("{WEEK_INCOME}")?e=be(e,t,a):e.includes("{MONTH_INCOME}")?e=ve(e,t,a):e.includes("{All_GROUPS}")?e=ye(e,t,a):e.includes("{CATEGORY_NAME}")?e=ye(e,t,a):e}(e.text,t,a,o);Object(ie.addResponseMessage)(n)})}).catch(function(e){Object(ie.toggleMsgLoader)(),console.log(e)})};return r.a.createElement(n.Fragment,null,c.token?r.a.createElement(ie.Widget,{handleNewUserMessage:l,title:"Budget Buddy",subtitle:"",profileAvatar:ue.a}):null)},we=(a(698),function(){var e=N._currentValue,t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(!1),s=Object(b.a)(l,2),i=s[0],m=s[1],u=Object(n.useState)(!1),d=Object(b.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)(!1),g=Object(b.a)(E,2),h=g[0],v=g[1],w=Object(n.useState)([]),Y=Object(b.a)(w,2),O=Y[0],S=Y[1],M=Object(n.useState)(""),D=Object(b.a)(M,2),F=D[0],k=D[1],C=Object(n.useState)(),A=Object(b.a)(C,2),T=A[0],I=A[1],B=Object(n.useState)(!1),$=Object(b.a)(B,2),_=$[0],R=$[1],L=Object(n.useState)([]),H=Object(b.a)(L,2),G=H[0],V=H[1],K=Object(n.useState)([]),X=Object(b.a)(K,2),W=X[0],Q=X[1],Z=Object(n.useState)([]),ae=Object(b.a)(Z,2),re=ae[0],oe=ae[1],ce=Object(n.useState)({}),le=Object(b.a)(ce,2),ie=le[0],me=le[1],ue=function(e,t,a){f(e),k(t),I(a)};Object(n.useEffect)(function(){we()},[]);var de=function(){c(!0);return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                settingsData {\n                    _id\n                    dailyBudget\n                    weeklyBudget\n                    monthlyBudget\n                    categories\n                    members\n                    currency\n                    creatorId\n                    creatorEmail\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(c(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return console.log(e.data),V.apply(void 0,Object(P.a)(G).concat([e.data.settingsData])),e.data.settingsData}).catch(function(e){return c(!1),ue(!0,"Error",e),console.log(e),e})},pe=function(t){c(!0);var a={query:"\n              query {\n                expenses {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                  }\n              }",allUsers:t};return fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(c(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return console.log(e.data.expenses),e.data.expenses=ve(e.data.expenses,"Expense"),c(!1),e.data.expenses}).catch(function(e){return c(!1),console.log(e),e})},fe=function(t){c(!0);var a={query:"\n              query {\n                incomes {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                  }\n              }",allUsers:t};return fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(c(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return e.data.incomes=ve(e.data.incomes,"Income"),console.log(e.data.incomes),c(!1),e.data.incomes}).catch(function(e){return c(!1),console.log(e),e})},Ee=function(t,a){c(!0);var n={query:"\n            query ExpensesFilter($dateFrom: String!, $dateTo: String!){\n                expensesFilter(dateFrom: $dateFrom, dateTo: $dateTo) {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                }\n            }",variables:{dateFrom:he(t.dateFrom),dateTo:he(t.dateTo)},allUsers:a};return fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw c(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.expensesFilter=ve(e.data.expensesFilter,"Expense"),c(!1),e.data.expensesFilter}).catch(function(e){throw c(!1),console.log(e),ue(!0,"Error",e),e})},ge=function(t,a){c(!0);var n={query:"\n            query IncomesFilter($dateFrom: String!, $dateTo: String!){\n                incomesFilter(dateFrom: $dateFrom, dateTo: $dateTo) {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                }\n            }",variables:{dateFrom:he(t.dateFrom),dateTo:he(t.dateTo)},allUsers:a};return fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw c(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.incomesFilter=ve(e.data.incomesFilter,"Income"),c(!1),e.data.incomesFilter}).catch(function(e){throw c(!1),console.log(e),ue(!0,"Error",e),e})},he=function(e){return JSON.stringify(U()(e).valueOf())},be=function(e){return e.sort(function(e,t){return e=U()(e.createdAt,"x").format("DD-MM-YYYY").split("-").reverse().join(""),t=U()(t.createdAt,"x").format("DD-MM-YYYY").split("-").reverse().join(""),e.localeCompare(t)}),e},ve=function(e,t){return e.forEach(function(e){e.tag=t}),e},ye=function(e,t){var a=[];return t.map(function(t){t._id===e._id?(t=e,a.push(t)):a.push(t)}),a=be(a)},Ne=function(e,t){var a=[];return t.forEach(function(t){t._id!==e._id&&a.push(t)}),a=be(a)},we=function(){var t=Object(z.a)(q.a.mark(function t(a){var n,r,o,l,s,i,m,u,d,p,f,E;return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a&&"All"!==a){t.next=29;break}if(n=[],G.length){t.next=8;break}return t.next=5,de();case 5:n=t.sent,t.next=9;break;case 8:n=G;case 9:return r=[],n.forEach(function(e){r.push(e.creatorId)}),t.next=13,pe(r);case 13:return o=t.sent,t.next=16,fe(r);case 16:if(l=t.sent,s=o.concat(l),s=be(s),S(s),re.length){t.next=27;break}return t.next=23,fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                userData {\n                    _id\n                    email\n                    name\n                    surname\n                    createdAt\n                    updatedAt\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(c(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return e.data.userData[0]}).catch(function(e){return console.log(e),e});case 23:i=t.sent,oe(s),Q(n),me(i);case 27:t.next=62;break;case 29:if("Expense"!==a){t.next=47;break}if(m=[],G.length){t.next=37;break}return t.next=34,de();case 34:m=t.sent,t.next=38;break;case 37:m=G;case 38:return u=[],m.forEach(function(e){u.push(e.creatorId)}),t.next=42,pe(u);case 42:d=t.sent,d=be(d),S(d),t.next=62;break;case 47:if(p=[],G.length){t.next=54;break}return t.next=51,de();case 51:p=t.sent,t.next=55;break;case 54:p=G;case 55:return f=[],p.forEach(function(e){f.push(e.creatorId)}),t.next=59,fe(f);case 59:E=t.sent,E=be(E),S(E);case 62:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),Ye=function(){var e=Object(z.a)(q.a.mark(function e(t){var a,n,r,o,c,l;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],"All"!==t.tag){e.next=14;break}return G.forEach(function(e){a.push(e.creatorId)}),e.next=5,Ee(t,a);case 5:return n=e.sent,e.next=8,ge(t,a);case 8:r=e.sent,o=n.concat(r),o=be(o),S(o),e.next=29;break;case 14:if("Expense"!==t.tag){e.next=23;break}return G.forEach(function(e){a.push(e.creatorId)}),e.next=18,Ee(t,a);case 18:c=e.sent,c=be(c),S(c),e.next=29;break;case 23:return G.forEach(function(e){a.push(e.creatorId)}),e.next=26,ge(t,a);case 26:l=e.sent,l=be(l),S(l);case 29:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(J.Provider,{value:{currentUser:e,allExpenses:O,setAllExpenses:S,removeExpense:function(t){var a={query:""};a="Expense"===t.tag?{query:"\n                  mutation RemoveExpense($id: ID!) {\n                    removeExpense(expenseId: $id) {\n                    _id\n                     title\n                    }\n                  }\n                ",variables:{id:t._id}}:{query:"\n                  mutation RemoveIncome($id: ID!) {\n                    removeIncome(incomeId: $id) {\n                    _id\n                     title\n                    }\n                  }\n                ",variables:{id:t._id}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){var t=[],a=[];e.data.removeExpense?(t=Ne(e.data.removeExpense,O),a=Ne(e.data.removeExpense,re),ue(!0,"Confirmation","Expense was deleted")):(t=Ne(e.data.removeIncome,O),a=Ne(e.data.removeIncome,re),ue(!0,"Confirmation","Income was deleted")),S(t),oe(a)}).catch(function(e){return console.log(e),e})},isLoading:o,getAllOnFilter:Ye,getAll:we,showMore:_,setShowMore:R,submitExpenseFromImport:function(t){var a={query:""},n=he(t.createdAt);return a="Expense"===t.tag?{query:"\n                          mutation CreateExpense($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createExpense(expenseInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}}:{query:"\n                          mutation CreateIncome($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createIncome(incomeInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.createExpense?(e.data.createExpense.tag="Expense",e.data.createExpense):(e.data.createIncome.tag="Income",e.data.createIncome)}).catch(function(e){throw console.log(e),ue(!0,"Error",e),e})},settings:G,settingsForBot:W,allExpensesForBot:re,user:ie,updateExpense:function(t){c(!0);var a={query:""};t.date=he(t.date),t.updateDate=he(t.updateDate),a="Expense"===t.tag?{query:"\n                          mutation UpdateExpense($id: ID!, $title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            updateExpense(expenseId: $id, expenseInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{id:t.id,title:t.title,description:t.description,price:t.price,group:t.group,createdAt:t.date,updatedAt:t.updateDate}}:{query:"\n                          mutation UpdateIncome($id: ID!, $title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            updateIncome(incomeId: $id, incomeInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{id:t.id,title:t.title,description:t.description,price:t.price,group:t.group,createdAt:t.date,updatedAt:t.updateDate}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw c(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;var t=[],a=[];e.data.updateExpense?(e.data.updateExpense.tag="Expense",console.log(e.data.updateExpense),t=ye(e.data.updateExpense,O),a=ye(e.data.updateExpense,re),ue(!0,"Confirmation","Expense was updated")):(e.data.updateIncome.tag="Income",console.log(e.data.updateIncome),t=ye(e.data.updateIncome,O),a=ye(e.data.updateIncome,re),ue(!0,"Confirmation","Income was updated")),S(t),oe(a),c(!1)}).catch(function(e){throw c(!1),console.log(e),ue(!0,"Error",e),e})}}},r.a.createElement(x.Provider,{value:{showInfoModal:p,setShowInfoModal:f,modalHeader:F,modalText:T,showModal:i,submitExpense:function(t){var a={query:""};c(!0);var n=he(t.date);a="Expense"===t.tag?{query:"\n                          mutation CreateExpense($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createExpense(expenseInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}}:{query:"\n                          mutation CreateIncome($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createIncome(incomeInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw c(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;c(!1),m(!1),e.data.createExpense?(ue(!0,"Confirmation","Expense was created"),e.data.createExpense.tag="Expense",S([].concat(Object(P.a)(O),[e.data.createExpense])),oe([].concat(Object(P.a)(re),[e.data.createExpense]))):(ue(!0,"Confirmation","Income was created"),e.data.createIncome.tag="Income",S([].concat(Object(P.a)(O),[e.data.createIncome])),oe([].concat(Object(P.a)(re),[e.data.createIncome])))}).catch(function(e){throw c(!1),m(!1),console.log(e),ue(!0,"Error",e),e})},setShowModal:m,modalInfo:ue,showImportModal:h,setShowIportModal:v}},r.a.createElement(te,null),r.a.createElement(n.Fragment,null,ie._id?r.a.createElement(xe,null):null),r.a.createElement(ne,null),o?r.a.createElement(y,null):r.a.createElement(n.Fragment,null,r.a.createElement(j,null),r.a.createElement(se,null),r.a.createElement("div",{className:"center"},r.a.createElement(ee,null)))))}),Ye=a(82),Oe=a(733),Se=a(725),Me=(a(700),function(){var e=Object(n.useState)({newCategorie:!1,newMember:!1,emailValidation:!1}),t=Object(b.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)([]),l=Object(b.a)(c,2),s=l[0],i=l[1],m=Object(n.useState)([]),u=Object(b.a)(m,2),d=u[0],p=u[1],f=N._currentValue,E=Object(n.useState)({}),g=Object(b.a)(E,2),h=g[0],v=g[1],O=Object(n.useState)({}),S=Object(b.a)(O,2),M=S[0],D=S[1],F=Object(n.useState)({}),k=Object(b.a)(F,2),A=k[0],T=k[1],I=Object(n.useState)(!1),B=Object(b.a)(I,2),$=B[0],_=B[1],q=Object(n.useState)(!1),z=Object(b.a)(q,2),R=z[0],J=z[1],L=Object(n.useState)(""),H=Object(b.a)(L,2),V=H[0],K=H[1],X=Object(n.useState)(),W=Object(b.a)(X,2),Q=W[0],Z=W[1],ee=function(e,t,a){J(e),K(t),Z(a)},te=Object(n.useState)("systemSettings"),ae=Object(b.a)(te,2),ne=ae[0],re=ae[1];Object(n.useEffect)(function(){oe(),ce()},[]);var oe=function(){_(!0);return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                userData {\n                    _id\n                    email\n                    name\n                    surname\n                    createdAt\n                    updatedAt\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}}).then(function(e){if(_(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return v(e.data.userData[0]),D(e.data.userData[0]),_(!1),e.data.userData[0]}).catch(function(e){return _(!1),console.log(e),e})},ce=function(){_(!0);return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                settingsData {\n                    _id\n                    dailyBudget\n                    weeklyBudget\n                    monthlyBudget\n                    categories\n                    members\n                    currency\n                    creatorEmail\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}}).then(function(e){if(_(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){var t=[];T(e.data.settingsData[0]),i(e.data.settingsData[0].categories.split(";")),e.data.settingsData[0].members.split(";").forEach(function(e){e.length&&t.push(e)}),p(t)}).catch(function(e){return _(!1),ee(!0,"Error",e),console.log(e),e})},le=function(e){var t=e.target.value;return 1===t.length&&"."===t&&(t=t.slice(0,-1)),2===t.length&&"00"===t&&(t=t.slice(0,-1)),t.split(".").length-1>1&&(t=t.slice(0,-1)),(t=t.indexOf(".")>=0?t.substr(0,t.indexOf("."))+t.substr(t.indexOf("."),3):t).replace(/[^\d.-]/g,"").replace("-","")};return $?r.a.createElement(y,null):r.a.createElement(n.Fragment,null,r.a.createElement(x.Provider,{value:{showInfoModal:R,setShowInfoModal:J,modalHeader:V,modalText:Q,modalInfo:ee}},r.a.createElement(j,null),r.a.createElement(Oe.a,{id:"settings-tab",activeKey:ne,onSelect:function(e){return re(e)}},r.a.createElement(Se.a,{eventKey:"userSettings",title:"userSettings"===ne?r.a.createElement("span",{style:{color:"#ea97c4"}},r.a.createElement(C.e,{size:20}),"\xa0 User "):r.a.createElement("span",null,r.a.createElement(C.e,{size:20,color:"#aeaeae"}),"\xa0 User ")},r.a.createElement(w.d,{enableReinitialize:!0,initialValues:{firstName:M.name||"",lastName:M.surname||"",email:M.email||""},validationSchema:Y.object().shape({firstName:Y.string().required("First Name is required"),lastName:Y.string().required("Last Name is required"),email:Y.string().email("Email is invalid").required("Email is required")}),onSubmit:function(e){!function(e){e.updatedAt=JSON.stringify(U()(new Date).valueOf()),_(!0);var t={query:"\n\n                              mutation UpdateUser($id: ID!, $name: String!, $surname: String!, $email: String!, $updatedAt: String!) {\n                                updateUser(userId: $id, name: $name, surname: $surname, email: $email, updatedAt: $updatedAt) {\n                                    name\n                                    surname\n                                    email\n                                  }\n                              }\n                            ",variables:{id:h._id,name:e.firstName,surname:e.lastName,email:e.email,updatedAt:e.updatedAt}};fetch("/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}}).then(function(e){if(!e.ok)throw _(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;console.log(e),D(e.data.updateUser),ee(!0,"Confirmation","User was updated"),_(!1)}).catch(function(e){throw _(!1),console.log(e),ee(!0,"Error",e),e})}(e)},render:function(e){var t=e.errors,a=e.touched;return r.a.createElement(w.c,{className:"settings-form",id:"formContentUserSettings"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h4",null,"User settings")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"firstName"},"First Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"First name",name:"firstName",type:"text",className:"form-control"+(t.firstName&&a.firstName?" is-invalid":"")}),r.a.createElement(w.a,{name:"firstName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"lastName"},"Last Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Last name",name:"lastName",type:"text",className:"form-control"+(t.lastName&&a.lastName?" is-invalid":"")}),r.a.createElement(w.a,{name:"lastName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Email",name:"email",type:"text",className:"form-control"+(t.email&&a.email?" is-invalid":"")}),r.a.createElement(w.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn_main update-btn"},"Update")))}})),r.a.createElement(Se.a,{eventKey:"systemSettings",title:"systemSettings"===ne?r.a.createElement("span",{style:{color:"#ea97c4"}},r.a.createElement(C.c,{size:20}),"\xa0 System "):r.a.createElement("span",null,r.a.createElement(C.c,{size:20,color:"#aeaeae"}),"\xa0 System ")},r.a.createElement(w.d,{validateOnChange:!0,enableReinitialize:!0,initialValues:{dailyBudget:A.dailyBudget||"",weeklyBudget:A.weeklyBudget||"",monthlyBudget:A.monthlyBudget||"",categories:A.categories||"",newCategorie:"",newMember:"",members:A.members||"",currency:A.currency||""},validationSchema:Y.object().shape({dailyBudget:Y.number(),weeklyBudget:Y.number(),monthlyBudget:Y.number(),categories:Y.string(),newCategorie:Y.string(),memebers:Y.string().email("Email is invalid"),newMember:Y.string().email("Email is invalid"),currency:Y.string().required("Currency is required")}),onSubmit:function(e){!function(e){_(!0);var t="",a="";s.forEach(function(e,t){s.length!==t+1?a+="".concat(e,";"):a+=e}),d.length&&d.forEach(function(e,a){d.length!==a+1?t+="".concat(e,";"):t+=e});var n={query:"\n\n                              mutation UpdateSettings($id: ID!, $dailyBudget: String!, $weeklyBudget: String!, $monthlyBudget: String!, $categories: String!, $members: String!, $currency: String!) {\n                                updateSettings(settingsId: $id, dailyBudget: $dailyBudget, weeklyBudget: $weeklyBudget, monthlyBudget: $monthlyBudget, categories: $categories, members: $members, currency: $currency) {\n                                    _id\n                                    dailyBudget\n                                    weeklyBudget\n                                    monthlyBudget\n                                    categories\n                                    members\n                                    currency\n                                  }\n                              }\n                            ",variables:{id:A._id,dailyBudget:e.dailyBudget,weeklyBudget:e.weeklyBudget,monthlyBudget:e.monthlyBudget,categories:a,members:t,currency:e.currency}};fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}}).then(function(e){if(!e.ok)throw _(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;var t=[];T(e.data.updateSettings),i(e.data.updateSettings.categories.split(";")),e.data.updateSettings.members.split(";").forEach(function(e){e.length&&t.push(e)}),p(t),_(!1),ee(!0,"Confirmation","Settings was updated")}).catch(function(e){throw _(!1),console.log(e),ee(!0,"Error",e),e})}(e)},render:function(e){var t=e.errors,n=e.values,c=e.touched,l=e.handleChange,m=e.setFieldValue,u=e.handleBlur;e.validateField;return r.a.createElement(w.c,{id:"formContentSystemSettings"},r.a.createElement("div",{className:"form-group row col-sm-12",style:{paddingTop:"25px"}},r.a.createElement("div",{className:"col-sm-4 "},r.a.createElement("div",{className:"p-2 settings-form"},r.a.createElement("h4",null,"Budget settings")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-5",htmlFor:"title"},"Daily budget"),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("div",{className:"input-group "},r.a.createElement("input",{placeholder:"0.00",name:"dailyBudget",onChange:function(e){m("dailyBudget",le(e))},value:n.dailyBudget,className:"form-control"+(t.dailyBudget&&c.dailyBudget?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},"GBD"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\xa3")):"Dollar"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"$")):r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\u20ac"))),r.a.createElement(w.a,{name:"dailyBudget",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-5",htmlFor:"title"},"Weekly budget"),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("input",{placeholder:"0.00",name:"weeklyBudget",onChange:function(e){m("weeklyBudget",le(e))},value:n.weeklyBudget,className:"form-control"+(t.weeklyBudget&&c.weeklyBudget?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},"GBD"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\xa3")):"Dollar"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"$")):r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\u20ac"))),r.a.createElement(w.a,{name:"weeklyBudget",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-5",htmlFor:"title"},"Monthly budget"),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("input",{placeholder:"0.00",name:"monthlyBudget",onChange:function(e){m("monthlyBudget",le(e))},value:n.monthlyBudget,className:"form-control"+(t.monthlyBudget&&c.monthlyBudget?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},"GBD"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\xa3")):"Dollar"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"$")):r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\u20ac"))),r.a.createElement(w.a,{name:"monthlyBudget",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-5",htmlFor:"title"},"Currency"),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("select",{name:"currency",onChange:l,onBlur:u,value:n.currency,className:"custom-select mr-sm-2 form-control"+(t.currency&&c.currency?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:""},"Select a currency"),r.a.createElement("option",{value:"Euro"},"Euro \u20ac"),r.a.createElement("option",{value:"Dollar"},"Dollar $"),r.a.createElement("option",{value:"GBD"},"Pound \xa3")),r.a.createElement(w.a,{name:"currency",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"col-sm-4 "},r.a.createElement("div",{className:"p-2 settings-form"},r.a.createElement("h4",null,"Categories settings")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4",htmlFor:"title"},"Add category"),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("input",{placeholder:"Category name",name:"newCategorie",onChange:function(e){var t;m("newCategorie",(t=e,a.newCategorie&&o(Object(Ye.a)({},a,{newCategorie:!1})),t.target.value.replace(/[\/\/|\/;&$%@"<>()+{}.',=_~`!#^*\/?]/g,"")))},value:n.newCategorie,className:"form-control col-sm-8 mr-1"+(a.newCategorie?" is-invalid":"")}),r.a.createElement("button",{type:"button",onClick:function(e){m("categories",function(e,t){if(void 0===e.target.value||!e.target.value.length)return o(Object(Ye.a)({},a,{newCategorie:!0})),t;e.target.value=e.target.value.toLowerCase();var n=e.target.value.charAt(0).toUpperCase()+e.target.value.slice(1),r=!1;s.forEach(function(e){e===n&&(r=!0)}),r?ee(!0,"Error","This category already in the category list."):i([].concat(Object(P.a)(s),[n]))}(e,n.categories)),m("newCategorie","")},value:n.newCategorie,className:"col-sm-3 btn btn_main"},"Add"),r.a.createElement(w.a,{name:"newCategorie",component:"div",className:"invalid-feedback"}),a.newCategorie?r.a.createElement("div",{className:"invalid-feedback"}," Category field can't be empty"):null))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4",htmlFor:"title"},"All categories"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("ul",{className:"list-group col-sm-9"},s.map(function(e){return r.a.createElement("li",{className:"row",key:e},r.a.createElement("span",{className:"list-group-item list-item col-sm-12"},e,r.a.createElement("button",{className:"btn card_removeButton",type:"button",onClick:function(){return function(e){1===s.length?ee(!0,"Error","You can't delete all categories."):i(s.filter(function(t){return t!==e}))}(e)}},r.a.createElement("i",null,r.a.createElement(G.d,{size:20})))))}))))),r.a.createElement("div",{className:"col-sm-4 "},r.a.createElement("div",{className:"p-2 settings-form"},r.a.createElement("h4",null,"Family settings")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4",htmlFor:"title"},"Add member"),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("input",{placeholder:"Member email",name:"newMember",onChange:function(e){var t;m("newMember",(t=e,a.emailValidation&&o(Object(Ye.a)({},a,{emailValidation:!1})),a.newMember&&o(Object(Ye.a)({},a,{newMember:!1})),t.target.value.replace(/[\/\/|\/;&$%"<>()+{}',=~`!#^*\/?]/g,"")))},value:n.newMember,className:"form-control col-sm-8 mr-1"+(a.newMember||a.emailValidation?" is-invalid":"")}),r.a.createElement("button",{type:"button",onClick:function(e){m("members",function(e,t,n){if(void 0===e.target.value||!e.target.value.length)return o(Object(Ye.a)({},a,{newMember:!0,emailValidation:!1})),t;if(n.newMember)o(Object(Ye.a)({},a,{emailValidation:!0}));else{var r=e.target.value.toLowerCase(),c=!1;d.forEach(function(e){e===r&&(c=!0)}),c?ee(!0,"Error","This member already in the members list."):p([].concat(Object(P.a)(d),[r]))}}(e,n.members,t)),m("newMember","")},value:n.newMember,className:"col-sm-3 btn btn_main"},"Add"),r.a.createElement(w.a,{name:"newMember",component:"div",className:"invalid-feedback"}),a.newMember?r.a.createElement("div",{className:"invalid-feedback"}," Member field can't be empty"):null,a.emailValidation?r.a.createElement("div",{className:"invalid-feedback"},"Email is invalid"):null))),d.length?r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4",htmlFor:"title"},"All members"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("ul",{className:"list-group col-sm-9"},d.map(function(e){return r.a.createElement("li",{className:"row",key:e},r.a.createElement("span",{className:"list-group-item list-item col-sm-12"},e,r.a.createElement("button",{className:"btn card_removeButton",type:"button",onClick:function(){return function(e){p(d.filter(function(t){return t!==e}))}(e)}},r.a.createElement("i",null,r.a.createElement(G.d,{size:20})))))})))):null)),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn_main update-btn"},"Update")))}})))))}),De=r.a.createContext(),je=function(){var e=Object(n.useContext)(De),t=e.getAllOnFilter,a=e.getAll,o=U()().format("MM/DD/YYYY"),c=U()().subtract(1,"months").format("MM/DD/YYYY"),l=Object(n.useState)(new Date(c)),s=Object(b.a)(l,2),i=s[0],m=s[1],u=Object(n.useState)(new Date(o)),d=Object(b.a)(u,2),p=d[0],f=d[1],E=function(e){return U()(e).format("MM/DD/YYYY")},g=function(e){var n={dateFrom:"",dateTo:""};switch(e){case"today":n={dateFrom:U()().format("MM/DD/YYYY"),dateTo:U()().format("MM/DD/YYYY")},t(n);break;case"week":n={dateFrom:U()().startOf("week").format("MM/DD/YYYY"),dateTo:U()().endOf("week").format("MM/DD/YYYY")},t(n);break;case"month":n={dateFrom:U()().startOf("month").format("MM/DD/YYYY"),dateTo:U()().endOf("month").format("MM/DD/YYYY")},t(n);break;case"year":n={dateFrom:U()().startOf("year").format("MM/DD/YYYY"),dateTo:U()().endOf("year").format("MM/DD/YYYY")},t(n);break;case"all":a();break;default:n={dateFrom:U()().startOf("month").format("MM/DD/YYYY"),dateTo:U()().endOf("month").format("MM/DD/YYYY")},t(n)}};return r.a.createElement(n.Fragment,null,r.a.createElement(w.d,{initialValues:{dateFrom:c,dateTo:o},validationSchema:Y.object().shape({dateFrom:Y.date().required("Date is required"),dateTo:Y.date().required("Date is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,a=e.values,n=e.touched,o=e.setFieldValue;return e.handleChange,e.handleBlur,r.a.createElement(w.c,null,r.a.createElement("div",{className:"form-group row col-sm-12  justify-content-center mb-3"},r.a.createElement("button",{type:"button",className:" col-sm-2 btn btn_with_line",onClick:function(){g("today"),o("dateFrom",U()().format("MM/DD/YYYY")),o("dateTo",U()().format("MM/DD/YYYY")),m(U()()._d),f(U()()._d)}},"Today"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){g("week"),o("dateFrom",U()().startOf("week").format("MM/DD/YYYY")),o("dateTo",U()().endOf("week").format("MM/DD/YYYY")),m(U()().startOf("week")._d),f(U()().endOf("week")._d)}},"This week"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){g("month"),o("dateFrom",U()().startOf("month").format("MM/DD/YYYY")),o("dateTo",U()().endOf("month").format("MM/DD/YYYY")),m(U()().startOf("month")._d),f(U()().endOf("month")._d)}},"This month"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){g("year"),o("dateFrom",U()().startOf("year").format("MM/DD/YYYY")),o("dateTo",U()().endOf("year").format("MM/DD/YYYY")),m(U()().startOf("year")._d),f(U()().endOf("year")._d)}},"This year"),r.a.createElement("button",{type:"button",className:"col-sm-2 btn btn_with_line",onClick:function(){return g("all")}},"All")),r.a.createElement("div",{className:"form-group row col-sm-12  justify-content-center mb-2"},r.a.createElement("label",{className:" col-form-label ml-4",htmlFor:"dateFrom"},"From:"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2 mr-sm-2 ml-3 mr-3"},r.a.createElement(H.a,{selected:i,startDate:i,endDate:p,className:"form-control not-round-right-corner"+(t.dateFrom&&n.dateFrom?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",null,a.dateFrom)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"dateFrom",placeholder:"Enter date",onChange:function(e){o("dateFrom",E(e)),m(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(G.b,{className:"",size:20}))))),r.a.createElement(w.a,{name:"dateTo",component:"div",className:"invalid-feedback"}),r.a.createElement("label",{className:"col-form-label ml-5 mr-3",htmlFor:"dateTo"},"To:"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement(H.a,{selected:p,startDate:i,endDate:p,className:"form-control not-round-right-corner"+(t.dateTo&&n.dateTo?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",null,a.dateTo)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"dateTo",placeholder:"Enter date",onChange:function(e){o("dateTo",E(e)),f(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(G.b,{className:"",size:20}))))),r.a.createElement(w.a,{name:"dateTo",component:"div",className:"invalid-feedback"}),r.a.createElement("div",{className:"float-right ml-5"},r.a.createElement("button",{type:"submit",className:"btn btn_main"},"Filter"))))}}))},Fe=function(e){return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                settingsData {\n                    _id\n                    dailyBudget\n                    weeklyBudget\n                    monthlyBudget\n                    categories\n                    members\n                    currency\n                    creatorId\n                    creatorEmail\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return console.log(e.data),e.data.settingsData}).catch(function(e){return console.log(e),e})},ke=function(e){return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                userData {\n                    _id\n                    email\n                    name\n                    surname\n                    createdAt\n                    updatedAt\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return e.data.userData[0]}).catch(function(e){return console.log(e),e})},Ce=function(e,t){var a={query:"\n              query {\n                expenses {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                  }\n              }",allUsers:e};return fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return console.log(e.data.expenses),e.data.expenses=_e(e.data.expenses,"Expense"),e.data.expenses}).catch(function(e){return console.log(e),e})},Ae=function(e,t){var a={query:"\n              query {\n                incomes {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                  }\n              }",allUsers:e};return fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return e.data.incomes=_e(e.data.incomes,"Income"),console.log(e.data.incomes),e.data.incomes}).catch(function(e){return console.log(e),e})},Te=function(e,t,a){var n={query:"\n            query ExpensesFilter($dateFrom: String!, $dateTo: String!){\n                expensesFilter(dateFrom: $dateFrom, dateTo: $dateTo) {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                }\n            }",variables:{dateFrom:$e(e.dateFrom),dateTo:$e(e.dateTo)},allUsers:t};return fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.token}}).then(function(e){if(!e.ok)throw e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.expensesFilter=_e(e.data.expensesFilter,"Expense"),e.data.expensesFilter}).catch(function(e){throw console.log(e),e})},Ie=function(e,t,a){var n={query:"\n            query IncomesFilter($dateFrom: String!, $dateTo: String!){\n                incomesFilter(dateFrom: $dateFrom, dateTo: $dateTo) {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                }\n            }",variables:{dateFrom:$e(e.dateFrom),dateTo:$e(e.dateTo)},allUsers:t};return fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.token}}).then(function(e){if(!e.ok)throw e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.incomesFilter=_e(e.data.incomesFilter,"Income"),e.data.incomesFilter}).catch(function(e){throw console.log(e),e})},Be=function(e){return e.sort(function(e,t){return e=U()(e.createdAt,"x").format("DD-MM-YYYY").split("-").reverse().join(""),t=U()(t.createdAt,"x").format("DD-MM-YYYY").split("-").reverse().join(""),e.localeCompare(t)}),e},$e=function(e){return JSON.stringify(U()(e).valueOf())},_e=function(e,t){return e.forEach(function(e){e.tag=t}),e},qe=function(e){return"GBD"===e.currency?"\xa3":"Dollar"===e.currency?"$":"\u20ac"},ze=function(){var e=Object(n.useContext)(De),t=e.allExpenses,a=e.totalExpenses,o=e.setTotalExpenses;Object(n.useEffect)(function(){c(t)},[t]);var c=function(e){var t={expenses:0,incomes:0,budget:0};e.forEach(function(e){"Expense"===e.tag?t.expenses+=parseFloat(e.price):"Income"===e.tag&&(t.incomes+=parseFloat(e.price))}),t.expenses=parseFloat(t.expenses.toFixed(2)),t.incomes=parseFloat(t.incomes.toFixed(2)),t.budget-=t.expenses,t.budget+=t.incomes,t.budget=parseFloat(t.budget.toFixed(2)),o(t)},l=[{name:"Expenses",value:a.expenses},{name:"Incomes",value:a.incomes}],s=Math.PI/180,i=["#F5A2A2","#C4DCA3"];return r.a.createElement(ae.h,{width:"100%",height:300},r.a.createElement(ae.g,null,r.a.createElement(ae.f,{data:l,labelLine:!1,label:function(e){var t=e.cx,a=e.cy,n=e.midAngle,o=e.innerRadius,c=e.outerRadius,l=e.percent,i=(e.index,o+.5*(c-o)),m=t+i*Math.cos(-n*s),u=a+i*Math.sin(-n*s);return r.a.createElement("text",{x:m,y:u,fill:"white",textAnchor:m>t?"start":"end",dominantBaseline:"central"},"".concat((100*l).toFixed(0),"%"))},outerRadius:"100%",fill:"#8884d8",dataKey:"value"},l.map(function(e,t){return r.a.createElement(ae.d,{key:"cell-".concat(t),fill:i[t%i.length]})})),r.a.createElement(ae.i,null)))},Pe=a(67),Re=function(){var e,t=Object(n.useContext)(De).allExpenses;Object(n.useEffect)(function(){s(t)},[t]);var a=Object(n.useState)([]),o=Object(b.a)(a,2),c=o[0],l=o[1],s=function(e){var t=[];e.forEach(function(e){var a=!1;t.forEach(function(t){"Expense"===e.tag?e.group===t.group&&(a=!0,t.price+=parseFloat(e.price)):a=!0}),a||"Expense"!==e.tag||t.push({group:e.group,price:parseFloat(e.price)})}),l(t)},i=[];c.forEach(function(e){e.price=parseFloat(e.price.toFixed(2)),i.push({name:e.group,value:e.price})});var m=["#F5A2A2","#C4DCA3","#A3A6DC","#D1A3DC","#E8F57E","#AB7EF5","#7EDEF5","#B2C5DD","#B8DDB2","#E8D33B"];return r.a.createElement(ae.h,{width:"100%",height:300},r.a.createElement(ae.g,null,r.a.createElement(ae.f,(e={data:i,labelLine:!0,label:!0,outerRadius:"100%",fill:"#8884d8",dataKey:"value",innerRadius:50},Object(Pe.a)(e,"outerRadius",80),Object(Pe.a)(e,"paddingAngle",10),e),i.map(function(e,t){return r.a.createElement(ae.d,{key:"cell-".concat(t),fill:m[t%m.length]})})),r.a.createElement(ae.i,null)))},Ue=function(){var e,t=Object(n.useContext)(De).allExpenses;Object(n.useEffect)(function(){s(t)},[t]);var a=Object(n.useState)([]),o=Object(b.a)(a,2),c=o[0],l=o[1],s=function(e){var t=[];e.forEach(function(e){var a=!1;t.forEach(function(t){"Income"===e.tag?e.group===t.group&&(a=!0,t.price+=parseFloat(e.price)):a=!0}),a||"Income"!==e.tag||t.push({group:e.group,price:parseFloat(e.price)})}),l(t)},i=[];c.forEach(function(e){e.price=parseFloat(e.price.toFixed(2)),i.push({name:e.group,value:e.price})});var m=["#F5A2A2","#C4DCA3","#A3A6DC","#D1A3DC","#E8F57E","#AB7EF5","#7EDEF5","#B2C5DD","#B8DDB2","#E8D33B"];return r.a.createElement(ae.h,{width:"100%",height:300},r.a.createElement(ae.g,null,r.a.createElement(ae.f,(e={data:i,labelLine:!0,label:!0,outerRadius:"100%",fill:"#8884d8",dataKey:"value",innerRadius:50},Object(Pe.a)(e,"outerRadius",80),Object(Pe.a)(e,"paddingAngle",10),e),i.map(function(e,t){return r.a.createElement(ae.d,{key:"cell-".concat(t),fill:m[t%m.length]})})),r.a.createElement(ae.i,null)))},Je=(a(703),function(){var e=N._currentValue,t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)([]),s=Object(b.a)(l,2),i=s[0],m=s[1],u=Object(n.useState)([]),d=Object(b.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)([]),g=Object(b.a)(E,2),h=(g[0],g[1]),v=Object(n.useState)([]),x=Object(b.a)(v,2),w=x[0],Y=x[1],O=Object(n.useState)({}),S=Object(b.a)(O,2),M=(S[0],S[1]),D=Object(n.useState)({}),j=Object(b.a)(D,2),F=j[0],k=j[1];Object(n.useEffect)(function(){var e={dateFrom:U()().startOf("month").format("MM/DD/YYYY"),dateTo:U()().endOf("month").format("MM/DD/YYYY")};A(e)},[]);var C=function(){var t=Object(z.a)(q.a.mark(function t(){var a,n,r,o,l,s;return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c(!0),a=[],p.length){t.next=9;break}return t.next=5,Fe(e);case 5:a=t.sent,f(a),t.next=10;break;case 9:a=p;case 10:return n=[],a.forEach(function(e){n.push(e.creatorId)}),t.next=14,Ce(n,e);case 14:return r=t.sent,t.next=17,Ae(n,e);case 17:if(o=t.sent,l=r.concat(o),l=Be(l),m(l),c(!1),w.length){t.next=29;break}return t.next=25,ke(e);case 25:s=t.sent,Y(l),h(a),M(s);case 29:case 30:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),A=function(){var t=Object(z.a)(q.a.mark(function t(a){var n,r,o,l,s,i;return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c(!0),n=[],p.length){t.next=9;break}return t.next=5,Fe(e);case 5:n=t.sent,f(n),t.next=10;break;case 9:n=p;case 10:return r=[],n.forEach(function(e){r.push(e.creatorId)}),t.next=15,Te(a,r,e);case 15:return o=t.sent,t.next=18,Ie(a,r,e);case 18:if(l=t.sent,s=o.concat(l),s=Be(s),m(s),c(!1),w.length){t.next=30;break}return t.next=26,ke(e);case 26:i=t.sent,Y(s),h(n),M(i);case 30:case 31:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(De.Provider,{value:{getAllOnFilter:A,getAll:C,allExpenses:i,totalExpenses:F,setTotalExpenses:k}},r.a.createElement(n.Fragment,null,r.a.createElement(je,null),o?r.a.createElement(y,null):i.length?r.a.createElement("div",{className:"statistics-board"},r.a.createElement("div",{className:"statistics-card"},r.a.createElement("p",{className:"statistics-text"},r.a.createElement("li",null,"Total expenses: ",F.expenses,"\xa0",qe(p[0])),r.a.createElement("li",null,"Total incomes: ",F.incomes,"\xa0",qe(p[0])),r.a.createElement("li",null,"Total budget: ",F.budget,"\xa0",qe(p[0]))),r.a.createElement(ze,null)),r.a.createElement("div",{className:"statistics-card"},r.a.createElement("p",{className:"statistics-text"},"Expenses by categories: "),r.a.createElement(Re,null)),r.a.createElement("div",{className:"statistics-card"},r.a.createElement("p",{className:"statistics-text"},"Incomes by categories:"),r.a.createElement(Ue,null)),r.a.createElement("div",{className:"statistics-card"},r.a.createElement("p",{className:"statistics-text"},"This is pieCart test test est e "),r.a.createElement(ze,null)),r.a.createElement("div",{className:"statistics-card"},r.a.createElement("p",{className:"statistics-text"},"This is pieCart test test est e "),r.a.createElement(ze,null))):r.a.createElement("div",{className:"warning-box",style:{marginTop:"5%"}},r.a.createElement("div",{className:"alert alert-danger",style:{marginBottom:"0px"},role:"alert"},"There are no data."))))}),Le=a(726),He=a(728),Ge=a(721),Ve=a(729),Ke=a(226),Xe=(a(705),function(){return r.a.createElement(N.Consumer,null,function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(He.a,{bg:"dark",variant:"dark"},r.a.createElement(He.a.Brand,{as:Le.a,to:"/"},r.a.createElement(Ke.b,{size:40,className:"main-navigation__logo"}),"Budget planner"),r.a.createElement(Ge.a,{className:"main-navigation__items"},!e.token&&r.a.createElement("li",null,r.a.createElement(Ge.a.Link,{as:Le.a,to:"/auth"},"Sign in")),e.token&&r.a.createElement(Ve.a,{alignRight:!0,title:r.a.createElement("span",null,r.a.createElement(G.e,{size:25})),id:"collasible-nav-dropdown"},r.a.createElement(Ve.a.Item,{as:Le.a,to:"/settings"},"Settings"),r.a.createElement(Ve.a.Divider,null),r.a.createElement(Ve.a.Item,{onClick:e.logout},"Logout")),e.token&&r.a.createElement(Ve.a,{alignRight:!0,title:r.a.createElement("span",null,r.a.createElement(Ke.a,{size:25})),id:"collasible-nav-dropdown"},r.a.createElement(Ve.a.Item,{as:Le.a,to:"/expenses"},"Expenses"),r.a.createElement(Ve.a.Item,{as:Le.a,to:"/statistics"},"Statistics")))))})}),We=(a(711),new g.a({uri:"/graphql"})),Qe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={token:null,userId:null},a.login=function(e,t){a.setState({token:e,userId:t})},a.logout=function(){fetch("/removeCookie",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){console.log(e.response.message)}).catch(function(e){console.log(e)}),a.setState({token:null,userId:null})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{client:We},r.a.createElement(d.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(N.Provider,{value:{token:this.state.token,userId:this.state.userId,login:this.login,logout:this.logout}},r.a.createElement(Xe,null),r.a.createElement(p.a,null,r.a.createElement(f.a,{path:"/uploadfiles",component:$}),!this.state.token&&r.a.createElement(f.a,{path:"/auth",component:F}),!this.state.token&&r.a.createElement(E.a,{to:"/auth",exact:!0}),this.state.token&&r.a.createElement(E.a,{from:"/auth",to:"/expenses",exact:!0}),this.state.token&&r.a.createElement(E.a,{from:"/",to:"/expenses",exact:!0}),this.state.token&&r.a.createElement(f.a,{path:"/expenses",component:we}),this.state.token&&r.a.createElement(f.a,{path:"/settings",component:Me}),this.state.token&&r.a.createElement(f.a,{path:"/statistics",component:Je}))))))}}]),t}(n.Component);c.a.render(r.a.createElement(Qe,null),document.getElementById("root"))}},[[368,2,1]]]);
//# sourceMappingURL=main.178d9d8a.chunk.js.map