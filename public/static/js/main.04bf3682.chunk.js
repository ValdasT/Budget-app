(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(e,t,a){},295:function(e,t,a){},326:function(e,t){},396:function(e,t,a){e.exports=a(702)},403:function(e,t,a){},405:function(e,t,a){},546:function(e,t,a){},559:function(e,t,a){},561:function(e,t,a){},563:function(e,t,a){},565:function(e,t,a){},567:function(e,t,a){},576:function(e,t,a){},684:function(e,t){},685:function(e,t){},686:function(e,t,a){},688:function(e,t,a){},691:function(e,t,a){},697:function(e,t,a){},702:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(25),l=a.n(o),i=(a(401),a(96)),c=a(97),s=a(109),m=a(98),u=a(111),d=a(716),p=a(718),f=a(717),g=a(715),E=a(367),h=a(100),b=a(13),v=(a(403),a(405),function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"cssload-inner cssload-one"}),r.a.createElement("div",{className:"cssload-inner cssload-two"}),r.a.createElement("div",{className:"cssload-inner cssload-three"}))}),y=r.a.createContext({token:null,userId:null,login:function(e,t){},logout:function(){}}),N=r.a.createContext(),w=a(14),S=a(18),x=function(){var e=Object(n.useContext)(y),t=e.submitHandler,a=e.switchModeHandler;return r.a.createElement(w.d,{initialValues:{firstName:"",lastName:"",email:"",password:"",confirmPassword:""},validationSchema:S.object().shape({firstName:S.string().required("First Name is required"),lastName:S.string().required("Last Name is required"),email:S.string().email("Email is invalid").required("Email is required"),password:S.string().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:S.string().oneOf([S.ref("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,n=(e.status,e.touched);return r.a.createElement(w.c,{className:"auth-form",id:"formContentSignUp"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h4",null,"Create account")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"firstName"},"First Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"First name",name:"firstName",type:"text",className:"form-control"+(t.firstName&&n.firstName?" is-invalid":"")}),r.a.createElement(w.a,{name:"firstName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"lastName"},"Last Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Last name",name:"lastName",type:"text",className:"form-control"+(t.lastName&&n.lastName?" is-invalid":"")}),r.a.createElement(w.a,{name:"lastName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Email",name:"email",type:"text",className:"form-control"+(t.email&&n.email?" is-invalid":"")}),r.a.createElement(w.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Password",name:"password",type:"password",className:"form-control"+(t.password&&n.password?" is-invalid":"")}),r.a.createElement(w.a,{name:"password",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"confirmPassword"},"Confirm Password"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Confirm",name:"confirmPassword",type:"password",className:"form-control"+(t.confirmPassword&&n.confirmPassword?" is-invalid":"")}),r.a.createElement(w.a,{name:"confirmPassword",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Register"),r.a.createElement("button",{onClick:a,type:"button",className:"btn btn-secondary mr-2"},"Sign in")))}})},k=function(){var e=Object(n.useContext)(y),t=e.submitHandler,a=e.switchModeHandler;return r.a.createElement(w.d,{initialValues:{email:"",password:""},validationSchema:S.object().shape({email:S.string().email("Email is invalid").required("Email is required"),password:S.string().required("Password is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,n=(e.status,e.touched);return r.a.createElement(w.c,{className:"auth-form",id:"formContentSignIn"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h4",null,"Sign in")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(w.b,{placeholder:"Email",name:"email",type:"text",className:"form-control"+(t.email&&n.email?" is-invalid":"")}),r.a.createElement(w.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(w.b,{placeholder:"Password",name:"password",type:"password",className:"form-control"+(t.password&&n.password?" is-invalid":"")}),r.a.createElement(w.a,{name:"password",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-actions"},r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Submit"),r.a.createElement("button",{onClick:a,type:"button",className:"btn btn-secondary mr-2"},"Sign up")))}})},O=a(712),C=a(545),j=(a(153),function(){var e=Object(n.useContext)(N),t=e.modalHeader,a=e.modalText,o=e.showInfoModal,l=e.setShowInfoModal,i=function(){return l(!1)};return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:o,onHide:i},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,t)),r.a.createElement(O.a.Body,null,a),r.a.createElement(O.a.Footer,null,r.a.createElement(C.a,{variant:"secondary",onClick:i},"Ok"))))}),$=function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(!1),i=Object(b.a)(l,2),c=i[0],s=i[1],m=Object(n.useState)(!1),u=Object(b.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(""),g=Object(b.a)(f,2),E=g[0],h=g[1],w=Object(n.useState)(),S=Object(b.a)(w,2),O=S[0],C=S[1];Object(n.useEffect)(function(){I()},[]);var $=function(e,t,a){p(e),h(t),C(a)},F=Object(n.useContext)(y).login,A=function(){return o(!a)},I=function(){fetch("/cookie",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){F(e.response.token,e.response.userId)}).catch(function(e){console.log("There is no cookie!")})},B=function(e,t){var a={query:"\n            mutation CreateSettings($dailyBudget: String!, $weeklyBudget: String!, $monthlyBudget: String!, $members: String!, $categories: String!,  $currency: String!, $userId: String!, $creatorEmail: String! ) {\n                createSettings(settingsInput:{dailyBudget: $dailyBudget, weeklyBudget: $weeklyBudget, monthlyBudget: $monthlyBudget, members:$members, categories:$categories,currency:$currency, userId: $userId, creatorEmail: $creatorEmail}) {\n                    _id\n                   \n                  }\n              }\n      ",variables:{dailyBudget:"",weeklyBudget:"",monthlyBudget:"",members:"",categories:"",currency:"",userId:e.userId,creatorEmail:e.creatorsEmail}};fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then(function(e){if(!e.ok)throw s(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;e.data&&($(!0,"Confirmation","Hi ".concat(t.firstName," ").concat(t.lastName,", your account was created. Now You can sign in.")),A(),s(!1))}).catch(function(e){throw s(!1),console.log(e),$(!0,"Error",e),e})};return r.a.createElement(N.Provider,{value:{modalHeader:E,modalText:O,showInfoModal:d,setShowInfoModal:p}},r.a.createElement(y.Provider,{value:{submitHandler:function(e){var t=JSON.stringify((new Date).getTime());s(!0);var n={query:"\n              query Login($email: String!, $password: String!) {\n                login(email: $email, password: $password) {\n                  userId\n                  token\n                }\n              }\n            ",variables:{email:e.email,password:e.password}};a&&(n={query:"\n            mutation CreateUser($email: String!, $password: String!, $name: String!, $surname: String!, $createdAt: String!, $updatedAt: String!) {\n              createUser(userInput: {email: $email, password: $password, name: $name, surname: $surname, createdAt: $createdAt, updatedAt: $updatedAt}) {\n                _id\n                email\n              }\n            }\n          ",variables:{email:e.email,password:e.password,name:e.firstName,surname:e.lastName,createdAt:t,updatedAt:t}}),fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(e){if(!e.ok)throw s(!1),e.statusText;return e.json()}).then(function(t){if(t.data.login)s(!1),F(t.data.login.token,t.data.login.userId);else{var a={userId:t.data.createUser._id,creatorsEmail:t.data.createUser.email};B(a,e)}}).catch(function(e){throw s(!1),$(!0,"Oops!","Your email or password is incorect."),e})},switchModeHandler:A}},r.a.createElement(j,null),c?r.a.createElement(v,null):r.a.createElement(n.Fragment,null,a?r.a.createElement(x,null):r.a.createElement(k,null))))},F=(a(546),function(e){return r.a.createElement("ul",{className:"bookings__list"},e.bookings.map(function(t){return r.a.createElement("li",{key:t._id,className:"bookings__item"},r.a.createElement("div",{className:"bookings__item-data"},t.event.title," -"," ",new Date(t.createdAt).toLocaleDateString()),r.a.createElement("div",{className:"bookings__item-actions"},r.a.createElement("button",{className:"btn",onClick:e.onDelete.bind(void 0,t._id)},"Cancel")))}))}),A=a(49),I=a(332),B={Cheap:{min:0,max:100},Normal:{min:100,max:200},Expensive:{min:200,max:1e7}},D=function(e){var t={labels:[],datasets:[]},a=[],n=function(n){var r=e.bookings.reduce(function(e,t){return t.event.price>B[n].min&&t.event.price<B[n].max?e+1:e},0);a.push(r),t.labels.push(n),t.datasets.push({fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:a}),(a=Object(A.a)(a))[a.length-1]=0};for(var o in B)n(o);return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(I.Bar,{data:t}))},M=(a(559),function(e){return r.a.createElement("div",{className:"bookings-control"},r.a.createElement("button",{className:"list"===e.activeOutputType?"active":"",onClick:e.onChange.bind(void 0,"list")},"List"),r.a.createElement("button",{className:"chart"===e.activeOutputType?"active":"",onClick:e.onChange.bind(void 0,"chart")},"Chart"))}),T=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!1,bookings:[],outputType:"list"},a.fetchBookings=function(){a.setState({isLoading:!0});fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify({query:"\n          query {\n            bookings {\n              _id\n             createdAt\n             event {\n               _id\n               title\n               date\n               price\n             }\n            }\n          }\n        "}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.context.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){var t=e.data.bookings;a.setState({bookings:t,isLoading:!1})}).catch(function(e){console.log(e),a.setState({isLoading:!1})})},a.deleteBookingHandler=function(e){a.setState({isLoading:!0});var t={query:"\n          mutation CancelBooking($id: ID!) {\n            cancelBooking(bookingId: $id) {\n            _id\n             title\n            }\n          }\n        ",variables:{id:e}};fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.context.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(t){a.setState(function(t){return{bookings:t.bookings.filter(function(t){return t._id!==e}),isLoading:!1}})}).catch(function(e){console.log(e),a.setState({isLoading:!1})})},a.changeOutputTypeHandler=function(e){"list"===e?a.setState({outputType:"list"}):a.setState({outputType:"chart"})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchBookings()}},{key:"render",value:function(){var e=r.a.createElement(v,null);return this.state.isLoading||(e=r.a.createElement(r.a.Fragment,null,r.a.createElement(M,{activeOutputType:this.state.outputType,onChange:this.changeOutputTypeHandler}),r.a.createElement("div",null,"list"===this.state.outputType?r.a.createElement(F,{bookings:this.state.bookings,onDelete:this.deleteBookingHandler}):r.a.createElement(D,{bookings:this.state.bookings})))),r.a.createElement(r.a.Fragment,null,e)}}]),t}(n.Component);T.contextType=y;var _=T,q=(a(561),function(){return r.a.createElement("div",{className:"backdrop"})}),Y=(a(563),function(e){return r.a.createElement("li",{key:e.eventId,className:"events__list-item"},r.a.createElement("div",null,r.a.createElement("h1",null,e.title),r.a.createElement("h2",null,"$",e.price," - ",new Date(e.date).toLocaleDateString())),r.a.createElement("div",null,e.userId===e.creatorId?r.a.createElement("p",null,"Your the owner of this event."):r.a.createElement("button",{className:"btn",onClick:e.onDetail.bind(void 0,e.eventId)},"View Details")))}),z=(a(565),function(e){var t=e.events.map(function(t){return r.a.createElement(Y,{key:t._id,eventId:t._id,title:t.title,price:t.price,date:t.date,userId:e.authUserId,creatorId:t.creator._id,onDetail:e.onViewDetail})});return r.a.createElement("ul",{className:"event__list"},t)}),P=(a(567),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={creating:!1,events:[],isLoading:!1,selectedEvent:null},a.isActive=!0,a.startCreateEventHandler=function(){a.setState({creating:!0})},a.modalConfirmHandler=function(){a.setState({creating:!1});var e=a.titleElRef.current.value,t=+a.priceElRef.current.value,n=a.dateElRef.current.value,r=a.descriptionElRef.current.value;if(!(0===e.trim().length||t<=0||0===n.trim().length||0===r.trim().length)){var o={title:e,price:t,date:n,description:r};console.log(o);var l={query:"\n          mutation CreateEvent($title: String!, $desc: String!, $price: Float!, $date: String!) {\n            createEvent(eventInput: {title: $title, description: $desc, price: $price, date: $date}) {\n              _id\n              title\n              description\n              date\n              price\n            }\n          }\n        ",variables:{title:e,desc:r,price:t,date:n}},i=a.context.token;fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:"Bearer "+i}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){a.setState(function(t){var n=Object(A.a)(t.events);return n.push({_id:e.data.createEvent._id,title:e.data.createEvent.title,description:e.data.createEvent.description,date:e.data.createEvent.date,price:e.data.createEvent.price,creator:{_id:a.context.userId}}),{events:n}})}).catch(function(e){console.log(e)})}},a.modalCancelHandler=function(){a.setState({creating:!1,selectedEvent:null})},a.showDetailHandler=function(e){a.setState(function(t){return{selectedEvent:t.events.find(function(t){return t._id===e})}})},a.bookEventHandler=function(){if(a.context.token){console.log(a.state.selectedEvent);var e={query:"\n          mutation BookEvent($id: ID!) {\n            bookEvent(eventId: $id) {\n              _id\n             createdAt\n             updatedAt\n            }\n          }\n        ",variables:{id:a.state.selectedEvent._id}};fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.context.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){console.log(e),a.setState({selectedEvent:null})}).catch(function(e){console.log(e)})}else a.setState({selectedEvent:null})},a.titleElRef=r.a.createRef(),a.priceElRef=r.a.createRef(),a.dateElRef=r.a.createRef(),a.descriptionElRef=r.a.createRef(),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchEvents()}},{key:"fetchEvents",value:function(){var e=this;this.setState({isLoading:!0});fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify({query:"\n          query {\n            events {\n              _id\n              title\n              description\n              date\n              price\n              creator {\n                _id\n                email\n              }\n            }\n          }\n        "}),headers:{"Content-Type":"application/json"}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(t){var a=t.data.events;e.isActive&&e.setState({events:a,isLoading:!1})}).catch(function(t){console.log(t),e.isActive&&e.setState({isLoading:!1})})}},{key:"componentWillUnmount",value:function(){this.isActive=!1}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,(this.state.creating||this.state.selectedEvent)&&r.a.createElement(q,null),this.state.creating&&r.a.createElement(j,{title:"Add Event",canCancel:!0,canConfirm:!0,onCancel:this.modalCancelHandler,onConfirm:this.modalConfirmHandler,confirmText:"Confirm"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",id:"title",ref:this.titleElRef})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"price"},"Price"),r.a.createElement("input",{type:"number",id:"price",ref:this.priceElRef})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"date"},"Date"),r.a.createElement("input",{type:"datetime-local",id:"date",ref:this.dateElRef})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{id:"description",rows:"4",ref:this.descriptionElRef})))),this.state.selectedEvent&&r.a.createElement(j,{title:this.state.selectedEvent.title,canCancel:!0,canConfirm:!0,onCancel:this.modalCancelHandler,onConfirm:this.bookEventHandler,confirmText:this.context.token?"Book":"Confirm"},r.a.createElement("h1",null,this.state.selectedEvent.title),r.a.createElement("h2",null,"$",this.state.selectedEvent.price," -"," ",new Date(this.state.selectedEvent.date).toLocaleDateString()),r.a.createElement("p",null,this.state.selectedEvent.description)),this.context.token&&r.a.createElement("div",{className:"events-control"},r.a.createElement("p",null,"Share your own Events!"),r.a.createElement("button",{className:"btn",onClick:this.startCreateEventHandler},"Create Event")),this.state.isLoading?r.a.createElement(v,null):r.a.createElement(z,{events:this.state.events,authUserId:this.context.userId,onViewDetail:this.showDetailHandler}))}}]),t}(n.Component));P.contextType=y;var L=P,H=a(165),U=r.a.createContext(),J=function(){var e=Object(n.useContext)(U),t=e.count,a=e.fruit,o=e.dataFromDb,l=Object(n.useState)("Baravykas"),i=Object(b.a)(l,2),c=i[0],s=i[1];return r.a.createElement("div",null,r.a.createElement("p",null,"Your name is ",c," ",t," ",o.lenght),r.a.createElement("button",{className:"btn",onClick:function(){return s(c="Johan")}},"Johan"),r.a.createElement("button",{className:"btn",onClick:function(){return s(c="Perter")}},"Peter"),r.a.createElement("button",{className:"btn",onClick:function(){return s(c=a)}},"Putin"))},R=a(95),V=a.n(R);function G(){var e=Object(H.a)(["query {\n        allFiles {\n            _id\n            title\n            description\n          }\n      }"]);return G=function(){return e},e}var K=function(){var e=V()(G()),t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)(0),c=Object(b.a)(i,2),s=c[0],m=c[1],u=Object(n.useState)("Fakama"),d=Object(b.a)(u,2),p=d[0],f=d[1],g=Object(n.useState)([]),E=Object(b.a)(g,2),v=E[0],y=E[1],N=function(){var e=["Banana","Abricot","Apple","Kiwi"];return e[Math.floor(Math.random()*e.length)]};Object(n.useEffect)(function(){var e;document.title="You clicked ".concat(s," times"),e=p,console.log(e)},[p]);return r.a.createElement(U.Provider,{value:{count:s,fruit:p,dataFromDb:v}},r.a.createElement(J,null),o,r.a.createElement("button",{onClick:function(){l(o=r.a.createElement("div",null,r.a.createElement("h1",null,"----------------------"),r.a.createElement(h.b,{query:e},function(e){var t=e.loading,a=e.err,o=e.data;return t?r.a.createElement("h1",null,"Loading"):a?r.a.createElement("h1",null,a):o?(f(p=N()),r.a.createElement(n.Fragment,null,o.allFiles.map(function(e){return r.a.createElement("div",{key:e._id},e._id)}))):void 0}),r.a.createElement("h1",null,"----------------------")))}},"Show?"),r.a.createElement("button",{className:"btn btn-primary btn-sm mr-2",onClick:function(){fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                allFiles {\n                    _id\n                    title\n                    description\n                  }\n              }\n            "}),headers:{"Content-Type":"application/json"}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){y(v=e.data.allFiles),console.log(v)}).catch(function(e){console.log(e)})}},"Get Files from db!"),r.a.createElement("button",{disabled:!v.length,className:"btn btn-primary btn-sm",onClick:function(){y(v=[])}},"Clear from screen"),r.a.createElement(n.Fragment,null,r.a.createElement("div",null,"There is ",v.length," in db!"),v.map(function(e){return r.a.createElement("div",{key:e._id},e._id)})),r.a.createElement("p",null,"You clicked ",s," times"),r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return m(s+1)}},"Click me +1"),r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return m(s-1)}},"Click me -1"),r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return m(s=0)}},"reset"),r.a.createElement("div",null,r.a.createElement("p",null,"You faforite fruit is ",p," "),r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){return f(p=N())}},"pick fruit")))},W=a(58),Q=a.n(W),X=a(113),Z=a(23),ee=a.n(Z),te=r.a.createContext(),ae=a(127),ne=a(35),re=(a(294),function(e){return ee()(e,"x").format("MM/DD/YYYY")}),oe=function(e){var t=e.setting,a=Object(n.useContext)(N),o=a.submitExpense,l=a.showModal,i=a.setShowModal,c=a.expense,s=a.onUpdate,m="GBD"===t.currency?"\xa3":"Dollar"===t.currency?"$":"\u20ac",u=function(){return i(!l)},d=ee()().format("MM/DD/YYYY"),p=Object(n.useState)(function(e){var t=[];return e.categories.split(";").forEach(function(e){e.length&&t.push(e)}),t}(t)),f=Object(b.a)(p,2),g=f[0],E=(f[1],Object(n.useState)(new Date(c?re(c.createdAt):d))),h=Object(b.a)(E,2),v=h[0],y=h[1];return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:l,onHide:u},r.a.createElement(O.a.Header,{closeButton:!0},s?r.a.createElement(O.a.Title,null,"Update expense"):r.a.createElement(O.a.Title,null,"Add expense")),r.a.createElement(O.a.Body,null,r.a.createElement(w.d,{initialValues:{tag:c?c.tag:"",title:c?c.title:"",description:c?c.description:"",group:c?c.group:"",price:c?c.price:"",date:c?re(c.createdAt):d,updateDate:c?re(c.updatedAt):d},validationSchema:S.object().shape({title:S.string().required("title is required"),description:S.string(),group:S.string().required("Group is required"),tag:S.string().required("Type is required"),price:S.number().required("Price is required"),date:S.date().required("Date is required")}),onSubmit:function(e){o(e)},render:function(e){var t=e.errors,a=e.values,n=e.touched,o=e.handleChange,l=e.setFieldValue,i=e.handleBlur;return r.a.createElement(w.c,{className:"auth-form"},r.a.createElement("div",{className:"p-2"}),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Type"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("select",{name:"tag",onChange:o,onBlur:i,value:a.tag,className:"custom-select mr-sm-2 form-control"+(t.tag&&n.tag?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:""},"Select a type"),r.a.createElement("option",{value:"Expense"},"Expense"),r.a.createElement("option",{value:"Income"},"Income")),r.a.createElement(w.a,{name:"tag",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Title"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(w.b,{placeholder:"Title",name:"title",type:"text",className:"form-control"+(t.title&&n.title?" is-invalid":"")}),r.a.createElement(w.a,{name:"title",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"description"},"Description"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(w.b,{component:"textarea",placeholder:"Description",name:"description",type:"text",className:"form-control"}),r.a.createElement(w.a,{name:"description",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Group"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("select",{name:"group",onChange:o,onBlur:i,value:a.group,className:"custom-select mr-sm-2 form-control"+(t.group&&n.group?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:""},"Select a group"),g.map(function(e){return r.a.createElement("option",{key:e,value:e},e)})),r.a.createElement(w.a,{name:"group",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"title"},"Price"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("input",{placeholder:"0.00",name:"price",onChange:function(e){l("price",function(e){var t=e.target.value;return 1===t.length&&"."===t&&(t=t.slice(0,-1)),2===t.length&&"00"===t&&(t=t.slice(0,-1)),t.split(".").length-1>1&&(t=t.slice(0,-1)),(t=t.indexOf(".")>=0?t.substr(0,t.indexOf("."))+t.substr(t.indexOf("."),3):t).replace(/[^\d.-]/g,"").replace("-","")}(e))},value:a.price,className:"form-control"+(t.price&&n.price?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{style:{fontSize:"15px"},className:"input-group-text"},m)),r.a.createElement(w.a,{name:"price",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label",htmlFor:"date"},"Date"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement(ae.a,{className:"form-control not-round-right-corner"+(t.date&&n.date?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",{className:""},a.date)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"date",selected:v,placeholder:"Enter date",onChange:function(e){var t;l("date",(t=e,ee()(t).format("MM/DD/YYYY"))),y(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(ne.a,{className:"",size:20}))))),r.a.createElement(w.a,{name:"date",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-actions float-right"},s?r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Update"):r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Submit"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:u},"Cancel")))}}))))},le=function(){var e=Object(n.useContext)(N),t=e.modalText,a=e.showInfoModal,o=e.setShowInfoModal,l=e.actionFunction,i=function(){return o(!1)};return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:a,onHide:i},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,"Please confirm")),r.a.createElement(O.a.Body,null,t),r.a.createElement(O.a.Footer,null,r.a.createElement(C.a,{variant:"primary",onClick:l},"Yes"),r.a.createElement(C.a,{variant:"secondary",onClick:i},"Cancel"))))},ie=(a(295),function(e){var t,a=e.expense,o=e.setting,l=y._currentValue,i=Object(n.useState)(!1),c=Object(b.a)(i,2),s=c[0],m=c[1],u=Object(n.useState)(),d=Object(b.a)(u,2),p=d[0],f=d[1],g=Object(n.useState)(),E=Object(b.a)(g,2),h=E[0],v=E[1],w=Object(n.useState)(!1),S=Object(b.a)(w,2),x=S[0],k=S[1],O="GBD"===o.currency?"\xa3":"Dollar"===o.currency?"$":"\u20ac",C=function(e,t,a){m(e),f(t),v(a)},j=Object(n.useContext)(te),$=j.removeExpense,F=j.updateExpense,A=j.showMore;return r.a.createElement(N.Provider,{value:{modalText:p,showInfoModal:s,setShowInfoModal:m,actionFunction:function(){$(h)},showModal:x,setShowModal:k,expense:a,onUpdate:!0,submitExpense:function(e){e.id=a._id,F(e)}}},r.a.createElement(le,null),r.a.createElement(oe,{setting:o}),r.a.createElement("span",{className:A?"card_more":"card"},r.a.createElement("div",{style:{background:"rgb(249, 248, 248)"}},r.a.createElement("div",{className:A?"card_title_more":"card_title"}," ",a.title)),r.a.createElement("div",{className:"card_date"},(t=a.createdAt,ee()(t,"x").format("MM/DD/YYYY"))),r.a.createElement("div",{className:A?"card_group":"card_group invisible"},"Group: ",a.group),r.a.createElement("div",{className:A?"card_description":"card_description invisible"},a.description),"Expense"===a.tag?r.a.createElement("div",{className:"card_price_expense"},"-",a.price," ",O," "):r.a.createElement("div",{className:"card_price_income"},a.price," ",O," "),l.userId===o.creatorId?r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"btn card_removeButton",onClick:function(){return C(!0,"Are you sure whant to delete this item?",a)}},r.a.createElement("i",null,r.a.createElement(ne.c,{size:20}))),r.a.createElement("button",{className:"btn card_editButton",onClick:function(){return k(!x)}},r.a.createElement("i",null,r.a.createElement(ne.b,{size:20})))):r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"btn card_removeButton disabled",disabled:!0,onClick:function(){return C(!0,"Are you sure whant to delete this item?",a)}},r.a.createElement("i",null,r.a.createElement(ne.c,{size:20}))),r.a.createElement("button",{className:"btn card_editButton disabled",disabled:!0,onClick:function(){return k(!x)}},r.a.createElement("i",null,r.a.createElement(ne.b,{size:20}))))))}),ce=a(41),se=a(173),me=function(){var e=Object(n.useContext)(N),t=e.showModal,a=e.setShowModal,o=e.showImportModal,l=e.setShowIportModal,i=Object(n.useContext)(te),c=i.setShowMore,s=i.showMore,m=i.allExpenses,u=i.settings;return r.a.createElement("span",{className:"card_first card"},r.a.createElement(n.Fragment,null,r.a.createElement(j,null),r.a.createElement("div",{className:"row d-flex align-self-center"},r.a.createElement("button",{className:"btn_one",onClick:function(){return a(!t)}},r.a.createElement("i",null,r.a.createElement(ce.b,{size:30}))),r.a.createElement("button",{className:"btn_upload",onClick:function(){return l(!o)}},r.a.createElement("i",null,r.a.createElement(ce.d,{size:25}))),m.length?r.a.createElement("button",{className:"btn_one",onClick:function(){return c(!s)}},s?r.a.createElement("i",null,r.a.createElement(se.a,{size:30})):r.a.createElement("i",null,r.a.createElement(se.b,{size:30}))):null),t&&r.a.createElement(n.Fragment,null,r.a.createElement(oe,{setting:u[0]}))))},ue=(a(576),function(){var e=Object(n.useContext)(te),t=e.allExpenses,a=e.settings;return r.a.createElement(n.Fragment,null,r.a.createElement(me,null),t.map(function(e){return a.map(function(t){return e.creatorId===t.creatorId?r.a.createElement(ie,{className:"expenses_list",key:e._id,expense:e,setting:t}):null})}))}),de=function(){var e=Object(n.useContext)(te),t=e.getAllOnFilter,a=e.getAll,o=ee()().format("MM/DD/YYYY"),l=ee()().subtract(1,"months").format("MM/DD/YYYY"),i=Object(n.useState)(new Date(l)),c=Object(b.a)(i,2),s=c[0],m=c[1],u=Object(n.useState)(new Date(o)),d=Object(b.a)(u,2),p=d[0],f=d[1],g=function(e){return ee()(e).format("MM/DD/YYYY")},E=function(e){var n={dateFrom:"",dateTo:""};switch(e){case"today":n={dateFrom:ee()().format("MM/DD/YYYY"),dateTo:ee()().format("MM/DD/YYYY")},t(n);break;case"week":n={dateFrom:ee()().startOf("week").format("MM/DD/YYYY"),dateTo:ee()().endOf("week").format("MM/DD/YYYY")},t(n);break;case"month":n={dateFrom:ee()().startOf("month").format("MM/DD/YYYY"),dateTo:ee()().endOf("month").format("MM/DD/YYYY")},t(n);break;case"year":n={dateFrom:ee()().startOf("year").format("MM/DD/YYYY"),dateTo:ee()().endOf("year").format("MM/DD/YYYY")},t(n);break;case"all":a();break;default:n={dateFrom:ee()().startOf("month").format("MM/DD/YYYY"),dateTo:ee()().endOf("month").format("MM/DD/YYYY")},t(n)}};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"form-group row col-sm-12  justify-content-center mb-3"},r.a.createElement("button",{className:" col-sm-2 btn btn_with_line",onClick:function(){return E("today")}},"Today"),r.a.createElement("button",{className:"col-sm-2 btn btn_with_line",onClick:function(){return E("week")}},"This week"),r.a.createElement("button",{className:"col-sm-2 btn btn_with_line",onClick:function(){return E("month")}},"This month"),r.a.createElement("button",{className:"col-sm-2 btn btn_with_line",onClick:function(){return E("year")}},"This year"),r.a.createElement("button",{className:"col-sm-2 btn btn_with_line",onClick:function(){return E("all")}},"All")),r.a.createElement(w.d,{initialValues:{dateFrom:l,dateTo:o},validationSchema:S.object().shape({dateFrom:S.date().required("Date is required"),dateTo:S.date().required("Date is required")}),onSubmit:function(e){t(e)},render:function(e){var t=e.errors,a=e.values,n=e.touched,o=e.setFieldValue;return r.a.createElement(w.c,null,r.a.createElement("div",{className:"form-group row col-sm-12  justify-content-center mb-2"},r.a.createElement("label",{className:" col-form-label mr-3",htmlFor:"dateFrom"},"From:"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement(ae.a,{selected:s,startDate:s,endDate:p,className:"form-control not-round-right-corner"+(t.dateFrom&&n.dateFrom?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",null,a.dateFrom)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"dateFrom",placeholder:"Enter date",onChange:function(e){o("dateFrom",g(e)),m(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(ne.a,{className:"",size:20}))))),r.a.createElement(w.a,{name:"dateTo",component:"div",className:"invalid-feedback"}),r.a.createElement("label",{className:"col-form-label ml-5 mr-3",htmlFor:"dateTo"},"To:"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement(ae.a,{selected:p,startDate:s,endDate:p,className:"form-control not-round-right-corner"+(t.dateTo&&n.dateTo?" is-invalid":""),customInput:r.a.createElement("div",null,r.a.createElement("span",null,a.dateTo)),peekNextMonth:!0,showMonthDropdown:!0,dropdownMode:"select",type:"text",autoComplete:"off",name:"dateTo",placeholder:"Enter date",onChange:function(e){o("dateTo",g(e)),f(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(ne.a,{className:"",size:20}))))),r.a.createElement(w.a,{name:"dateTo",component:"div",className:"invalid-feedback"}),r.a.createElement("div",{className:"float-right ml-5"},r.a.createElement("button",{type:"submit",className:"btn btn_main"},"Filter"))))}}))},pe=a(51),fe=function(){var e=Object(n.useContext)(te).allExpenses,t=Object(n.useState)([]),a=Object(b.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)(!0),c=Object(b.a)(i,2),s=c[0],m=c[1],u=Object(n.useState)(!0),d=Object(b.a)(u,2),p=d[0],f=d[1],g=Object(n.useState)(!0),E=Object(b.a)(g,2),h=E[0],v=E[1],y={first:[]};Object(n.useEffect)(function(){!function(e){var t=[],a={expenses:0,incomes:0,budget:0};e.forEach(function(e){e.date=ee()(e.createdAt,"x").format("DD/MM"),"Expense"===e.tag?(a.expenses=a.expenses+parseFloat(e.price),a.budget=a.budget-parseFloat(e.price),t.push({date:e.date,Expenses:a.expenses.toFixed(2),Incomes:a.incomes.toFixed(2),Budget:a.budget.toFixed(2)})):(a.incomes=a.incomes+parseFloat(e.price),a.budget=a.budget+parseFloat(e.price),t.push({date:e.date,Expenses:a.expenses.toFixed(2),Incomes:a.incomes.toFixed(2),Budget:a.budget.toFixed(2)}))}),y.first.push(Math.min.apply(Math,t.map(function(e){return e.Incomes}))),y.first.push(Math.max.apply(Math,t.map(function(e){return e.Incomes}))),y.first.push(Math.min.apply(Math,t.map(function(e){return e.Budget}))),y.first.push(Math.max.apply(Math,t.map(function(e){return e.Budget}))),y.first.push(Math.min.apply(Math,t.map(function(e){return e.Expenses}))),y.first.push(Math.max.apply(Math,t.map(function(e){return e.Expenses}))),y.smallest=Math.min.apply(Math,y.first.map(function(e){return e})),y.biggest=Math.max.apply(Math,y.first.map(function(e){return e})),l(t)}(e)},[e]);return r.a.createElement(n.Fragment,null,e.length?r.a.createElement(pe.e,{width:"95%",height:150},r.a.createElement(pe.b,{data:o,margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,h?r.a.createElement("linearGradient",{id:"colorExp",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#FF0000",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#FF0000",stopOpacity:0})):null,",",p?r.a.createElement("linearGradient",{id:"colorInc",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})):null,",",s?r.a.createElement("linearGradient",{id:"colorBud",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#0000FF",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#0000FF",stopOpacity:0})):null),r.a.createElement(pe.c,{vertical:!1,horizontal:!1}),r.a.createElement(pe.d,{onClick:function(e){!function(e){switch(e.dataKey){case"Budget":m(!s);break;case"Incomes":f(!p);break;case"Expenses":v(!h);break;default:console.log("incorect name")}}(e)}}),r.a.createElement(pe.f,null),r.a.createElement(pe.a,{type:"monotone",dataKey:"Budget",stroke:"#0000FF",fillOpacity:1,fill:"url(#colorBud)"}),r.a.createElement(pe.a,{type:"monotone",dataKey:"Incomes",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorInc)"}),r.a.createElement(pe.a,{type:"monotone",dataKey:"Expenses",stroke:"#FF0000",fillOpacity:1,fill:"url(#colorExp)"}),r.a.createElement(pe.g,{dataKey:"date",fontSize:"10"}),r.a.createElement(pe.h,{type:"number",domain:[y.smallest,y.biggest],allowDataOverflow:!0,fontSize:"10"}))):null)},ge=a(368),Ee=a(364),he=a.n(Ee),be=a(247),ve=a.n(be),ye=function(){var e=Object(n.useContext)(N),t=e.modalInfo,a=e.showImportModal,o=e.setShowIportModal,l=Object(n.useContext)(te),i=l.submitExpenseFromImport,c=l.setAllExpenses,s=Object(n.useState)([]),m=Object(b.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(!1),f=Object(b.a)(p,2),g=f[0],E=f[1],h=Object(n.useState)(!1),y=Object(b.a)(h,2),w=y[0],S=y[1],x=function(){return o(!1)},k=function(e){he.a.parse(e,{complete:function(e){j(e)}})},j=function(){var e=Object(X.a)(Q.a.mark(function e(a){var n,r,o,l;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{title:"",description:"",price:"",group:"",createdAt:"",tag:""}],r=[],e.next=4,$(a.data[0]);case 4:(o=e.sent).forEach(function(e,t){"title"===e.name.toLowerCase()&&(n[0].title=o[t].id),"description"===e.name.toLowerCase()&&(n[0].description=o[t].id),"price"===e.name.toLowerCase()&&(n[0].price=o[t].id),"group"===e.name.toLowerCase()&&(n[0].group=o[t].id),"date"===e.name.toLowerCase()&&(n[0].createdAt=o[t].id),"type"===e.name.toLowerCase()&&(n[0].tag=o[t].id)}),a.data.forEach(function(e,t){0!==t&&e[0].length&&r.push({title:e[n[0].title],description:e[n[0].description],price:e[n[0].price],group:e[n[0].group],createdAt:e[n[0].createdAt],tag:e[n[0].tag]})}),l=[],r.forEach(function(){var e=Object(X.a)(Q.a.mark(function e(a){return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.next=3,i(a);case 3:if(e.t1=e.sent,e.t0.push.call(e.t0,e.t1),n.length!==l.length){e.next=12;break}return e.next=8,c(l);case 8:t(!0,"Confirmation","File was uploaded"),E(!1),d([]),x();case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),$=function(e){return new Promise(function(a,n){var r=[],o=[];if(["Title","Price","Group","Date","Type","Description"].forEach(function(t){var a=!1;e.forEach(function(e,n){t.toLocaleLowerCase()===e.toLowerCase()&&(a=!0,r.push({name:t,id:n}))}),a||o.push(t)}),o.length){var l="";o.forEach(function(e,t){o.length===t+1?l+=' "'.concat(e,'".'):l+=' "'.concat(e,'";')}),t(!0,"Error","Inappropriate file. Missing fields in the file:".concat(l)),E(!1),d([]),x()}else a(r)})},F=Object(n.useCallback)(function(e){e.length&&(d(function(){return[e[0]]}),S(!1))},[]),A=Object(ge.a)({onDrop:F,accept:"text/csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",minSize:0,maxSize:50173280}),I=A.isDragActive,B=A.getRootProps,D=A.getInputProps,M=A.isDragReject,T=A.rejectedFiles,_=T.length>0&&T[0].size>50173280;return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:a,onHide:x},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,"Import expenses ",g)),g?r.a.createElement(v,null):r.a.createElement(n.Fragment,null,r.a.createElement(O.a.Body,null,w?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Please select a file first!"):null,r.a.createElement("div",null,r.a.createElement("ul",null,u.map(function(e){return r.a.createElement("li",{className:"",key:e.name},"".concat((a=e.name,a.length>20?a.substring(0,20)+"...":a),"  - (").concat((t=e.size)<1024?t+" Bytes":t<1048576?(t/1024).toFixed(3)+" KB":t<1073741824?(t/1048576).toFixed(3)+" MB":(t/1073741824).toFixed(3)+" GB",")"),r.a.createElement("button",{className:"btn_remove",onClick:function(){return function(e){var t=[];u.map(function(a){a.name!==e.name&&a.size!==e.size&&t.push(a)}),d(t)}(e)}},r.a.createElement("i",null,r.a.createElement(ce.a,{size:20}))));var t,a})),r.a.createElement("div",Object.assign({className:"drop_zone container text-center "},B()),r.a.createElement("input",D()),!I&&r.a.createElement("i",null,"Click here or drop a file to upload! ",r.a.createElement(ce.d,{size:20})),I&&!M&&"Drop it here!",M&&"File type not accepted, sorry!",_&&r.a.createElement("div",{className:"text-danger mt-2"},"File is too large."))))),r.a.createElement(O.a.Footer,null,r.a.createElement(C.a,{type:"button",variant:"primary",disabled:g,onClick:function(){return function(e){if(e.length){E(!0);var t=e[0].name.split(".");if("csv"===(t=t[t.length-1].toLowerCase()))k(e[0]);else{var a=new FileReader;a.onload=function(e){var t=e.target.result,a=ve.a.read(t,{type:"binary",header:1,cellDates:!0,dateNF:"DD/MM/YYYY"}),n=a.SheetNames[0],r=a.Sheets[n],o=ve.a.utils.sheet_to_csv(r,{header:1,raw:!1});k(o)},a.readAsBinaryString(e[0])}}else S(!0)}(u)}},"Upload"),r.a.createElement(C.a,{variant:"secondary",disabled:g,onClick:x},"Cancel"))))},Ne=(a(686),function(){var e=y._currentValue,t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)(!1),c=Object(b.a)(i,2),s=c[0],m=c[1],u=Object(n.useState)(!1),d=Object(b.a)(u,2),p=d[0],f=d[1],g=Object(n.useState)(!1),E=Object(b.a)(g,2),h=E[0],w=E[1],S=Object(n.useState)([]),x=Object(b.a)(S,2),k=x[0],O=x[1],C=Object(n.useState)(""),$=Object(b.a)(C,2),F=$[0],I=$[1],B=Object(n.useState)(),D=Object(b.a)(B,2),M=D[0],T=D[1],_=Object(n.useState)(!1),q=Object(b.a)(_,2),Y=q[0],z=q[1],P=Object(n.useState)([]),L=Object(b.a)(P,2),H=L[0],U=L[1],J=function(e,t,a){f(e),I(t),T(a)};Object(n.useEffect)(function(){le()},[]);var R=function(){l(!0);return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                settingsData {\n                    _id\n                    dailyBudget\n                    weeklyBudget\n                    monthlyBudget\n                    categories\n                    members\n                    currency\n                    creatorId\n                    creatorEmail\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(l(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return console.log(e.data),U.apply(void 0,Object(A.a)(H).concat([e.data.settingsData])),e.data.settingsData}).catch(function(e){return l(!1),J(!0,"Error",e),console.log(e),e})},V=function(t){l(!0);var a={query:"\n              query {\n                expenses {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                  }\n              }",allUsers:t};return fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(l(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return console.log(e.data.expenses),e.data.expenses=ne(e.data.expenses,"Expense"),l(!1),e.data.expenses}).catch(function(e){return l(!1),console.log(e),e})},G=function(t){l(!0);var a={query:"\n              query {\n                incomes {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                  }\n              }",allUsers:t};return fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(l(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return e.data.incomes=ne(e.data.incomes,"Income"),console.log(e.data.incomes),l(!1),e.data.incomes}).catch(function(e){return l(!1),console.log(e),e})},K=function(t,a){l(!0);var n={query:"\n            query ExpensesFilter($dateFrom: String!, $dateTo: String!){\n                expensesFilter(dateFrom: $dateFrom, dateTo: $dateTo) {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                }\n            }",variables:{dateFrom:Z(t.dateFrom),dateTo:Z(t.dateTo)},allUsers:a};return fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw l(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.expensesFilter=ne(e.data.expensesFilter,"Expense"),l(!1),e.data.expensesFilter}).catch(function(e){throw l(!1),console.log(e),J(!0,"Error",e),e})},W=function(t,a){l(!0);var n={query:"\n            query IncomesFilter($dateFrom: String!, $dateTo: String!){\n                incomesFilter(dateFrom: $dateFrom, dateTo: $dateTo) {\n                    _id\n                    title\n                    description\n                    price\n                    group\n                    createdAt\n                    updatedAt\n                    creatorId\n                }\n            }",variables:{dateFrom:Z(t.dateFrom),dateTo:Z(t.dateTo)},allUsers:a};return fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw l(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.incomesFilter=ne(e.data.incomesFilter,"Income"),l(!1),e.data.incomesFilter}).catch(function(e){throw l(!1),console.log(e),J(!0,"Error",e),e})},Z=function(e){return JSON.stringify(ee()(e).valueOf())},ae=function(e){return e.sort(function(e,t){return e=ee()(e.createdAt,"x").format("DD-MM-YYYY").split("-").reverse().join(""),t=ee()(t.createdAt,"x").format("DD-MM-YYYY").split("-").reverse().join(""),e.localeCompare(t)}),e},ne=function(e,t){return e.forEach(function(e){e.tag=t}),e},re=function(e){var t=[];return k.map(function(a){a._id===e._id?(a=e,t.push(a)):t.push(a)}),t=ae(t)},oe=function(e){var t=[];return k.forEach(function(a){a._id!==e._id&&t.push(a)}),t=ae(t)},le=function(){var e=Object(X.a)(Q.a.mark(function e(){var t,a,n,r,o;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],H.length){e.next=7;break}return e.next=4,R();case 4:t=e.sent,e.next=8;break;case 7:t=H;case 8:return a=[],t.forEach(function(e){a.push(e.creatorId)}),e.next=12,V(a);case 12:return n=e.sent,e.next=15,G(a);case 15:r=e.sent,o=n.concat(r),o=ae(o),O(o);case 19:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(X.a)(Q.a.mark(function e(t){var a,n,r,o;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],H.forEach(function(e){a.push(e.creatorId)}),e.next=4,K(t,a);case 4:return n=e.sent,e.next=7,W(t,a);case 7:r=e.sent,o=n.concat(r),o=ae(o),O(o);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(te.Provider,{value:{currentUser:e,allExpenses:k,setAllExpenses:O,removeExpense:function(t){var a={query:""};a="Expense"===t.tag?{query:"\n                  mutation RemoveExpense($id: ID!) {\n                    removeExpense(expenseId: $id) {\n                    _id\n                     title\n                    }\n                  }\n                ",variables:{id:t._id}}:{query:"\n                  mutation RemoveIncome($id: ID!) {\n                    removeIncome(incomeId: $id) {\n                    _id\n                     title\n                    }\n                  }\n                ",variables:{id:t._id}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){var t=[];e.data.removeExpense?(t=oe(e.data.removeExpense),J(!0,"Confirmation","Expense was deleted")):(t=oe(e.data.removeIncome),J(!0,"Confirmation","Income was deleted")),O(t)}).catch(function(e){return console.log(e),e})},updateExpense:function(t){l(!0);var a={query:""};t.date=Z(t.date),t.updateDate=Z(t.updateDate),a="Expense"===t.tag?{query:"\n                          mutation UpdateExpense($id: ID!, $title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            updateExpense(expenseId: $id, expenseInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{id:t.id,title:t.title,description:t.description,price:t.price,group:t.group,createdAt:t.date,updatedAt:t.updateDate}}:{query:"\n                          mutation UpdateIncome($id: ID!, $title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            updateIncome(incomeId: $id, incomeInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{id:t.id,title:t.title,description:t.description,price:t.price,group:t.group,createdAt:t.date,updatedAt:t.updateDate}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw l(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;var t=[];e.data.updateExpense?(e.data.updateExpense.tag="Expense",console.log(e.data.updateExpense),t=re(e.data.updateExpense),J(!0,"Confirmation","Expense was updated")):(e.data.updateIncome.tag="Income",console.log(e.data.updateIncome),t=re(e.data.updateIncome),J(!0,"Confirmation","Income was updated")),O(t),l(!1)}).catch(function(e){throw l(!1),console.log(e),J(!0,"Error",e),e})},isLoading:o,getAllOnFilter:ie,getAll:le,showMore:Y,setShowMore:z,submitExpenseFromImport:function(t){var a={query:""},n=Z(t.createdAt);return a="Expense"===t.tag?{query:"\n                          mutation CreateExpense($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createExpense(expenseInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}}:{query:"\n                          mutation CreateIncome($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createIncome(incomeInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;return e.data.createExpense?(e.data.createExpense.tag="Expense",e.data.createExpense):(e.data.createIncome.tag="Income",e.data.createIncome)}).catch(function(e){throw console.log(e),J(!0,"Error",e),e})},settings:H}},r.a.createElement(N.Provider,{value:{showInfoModal:p,setShowInfoModal:f,modalHeader:F,modalText:M,showModal:s,submitExpense:function(t){var a={query:""};l(!0);var n=Z(t.date);a="Expense"===t.tag?{query:"\n                          mutation CreateExpense($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createExpense(expenseInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}}:{query:"\n                          mutation CreateIncome($title: String!, $description: String, $price: String!, $group: String!, $createdAt: String!, $updatedAt: String! ) {\n                            createIncome(incomeInput:{title: $title, description: $description, price: $price, group:$group, createdAt:$createdAt, updatedAt: $updatedAt}) {\n                                _id\n                                title\n                                price\n                                createdAt\n                                updatedAt\n                                description\n                                group\n                                creatorId\n                              }\n                          }\n                        ",variables:{title:t.title,description:t.description,price:t.price,group:t.group,createdAt:n,updatedAt:n}},fetch("/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then(function(e){if(!e.ok)throw l(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;l(!1),m(!1),e.data.createExpense?(J(!0,"Confirmation","Expense was created"),e.data.createExpense.tag="Expense",O([].concat(Object(A.a)(k),[e.data.createExpense]))):(J(!0,"Confirmation","Income was created"),e.data.createIncome.tag="Income",O([].concat(Object(A.a)(k),[e.data.createIncome])))}).catch(function(e){throw l(!1),m(!1),console.log(e),J(!0,"Error",e),e})},setShowModal:m,modalInfo:J,showImportModal:h,setShowIportModal:w}},r.a.createElement(de,null),r.a.createElement(fe,null),o?r.a.createElement(v,null):r.a.createElement(n.Fragment,null,r.a.createElement(j,null),r.a.createElement(ye,null),r.a.createElement("div",{className:"center"},r.a.createElement(ue,null)))))}),we=a(86),Se=a(719),xe=a(710),ke=(a(688),function(){var e=Object(n.useState)({newCategorie:!1,newMember:!1,emailValidation:!1}),t=Object(b.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)([]),i=Object(b.a)(l,2),c=i[0],s=i[1],m=Object(n.useState)([]),u=Object(b.a)(m,2),d=u[0],p=u[1],f=y._currentValue,g=Object(n.useState)({}),E=Object(b.a)(g,2),h=E[0],x=E[1],k=Object(n.useState)({}),O=Object(b.a)(k,2),C=O[0],$=O[1],F=Object(n.useState)({}),I=Object(b.a)(F,2),B=I[0],D=I[1],M=Object(n.useState)(!1),T=Object(b.a)(M,2),_=T[0],q=T[1],Y=Object(n.useState)(!1),z=Object(b.a)(Y,2),P=z[0],L=z[1],H=Object(n.useState)(""),U=Object(b.a)(H,2),J=U[0],R=U[1],V=Object(n.useState)(),G=Object(b.a)(V,2),K=G[0],W=G[1],Q=function(e,t,a){L(e),R(t),W(a)},X=Object(n.useState)("systemSettings"),Z=Object(b.a)(X,2),te=Z[0],ae=Z[1];Object(n.useEffect)(function(){re(),oe()},[]);var re=function(){q(!0);return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                userData {\n                    _id\n                    email\n                    name\n                    surname\n                    createdAt\n                    updatedAt\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}}).then(function(e){if(q(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){return x(e.data.userData[0]),$(e.data.userData[0]),q(!1),e.data.expenses}).catch(function(e){return q(!1),console.log(e),e})},oe=function(){q(!0);return fetch("/graphql",{method:"POST",body:JSON.stringify({query:"\n              query {\n                settingsData {\n                    _id\n                    dailyBudget\n                    weeklyBudget\n                    monthlyBudget\n                    categories\n                    members\n                    currency\n                    creatorEmail\n                  }\n              }"}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}}).then(function(e){if(q(!1),200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()}).then(function(e){var t=[];D(e.data.settingsData[0]),s(e.data.settingsData[0].categories.split(";")),e.data.settingsData[0].members.split(";").forEach(function(e){e.length&&t.push(e)}),p(t)}).catch(function(e){return q(!1),Q(!0,"Error",e),console.log(e),e})},le=function(e){var t=e.target.value;return 1===t.length&&"."===t&&(t=t.slice(0,-1)),2===t.length&&"00"===t&&(t=t.slice(0,-1)),t.split(".").length-1>1&&(t=t.slice(0,-1)),(t=t.indexOf(".")>=0?t.substr(0,t.indexOf("."))+t.substr(t.indexOf("."),3):t).replace(/[^\d.-]/g,"").replace("-","")};return _?r.a.createElement(v,null):r.a.createElement(n.Fragment,null,r.a.createElement(N.Provider,{value:{showInfoModal:P,setShowInfoModal:L,modalHeader:J,modalText:K,modalInfo:Q}},r.a.createElement(j,null),r.a.createElement(Se.a,{id:"settings-tab",activeKey:te,onSelect:function(e){return ae(e)}},r.a.createElement(xe.a,{eventKey:"userSettings",title:"userSettings"===te?r.a.createElement("span",{style:{color:"#ea97c4"}},r.a.createElement(ce.e,{size:20}),"\xa0 User "):r.a.createElement("span",null,r.a.createElement(ce.e,{size:20,color:"#aeaeae"}),"\xa0 User ")},r.a.createElement(w.d,{enableReinitialize:!0,initialValues:{firstName:C.name||"",lastName:C.surname||"",email:C.email||""},validationSchema:S.object().shape({firstName:S.string().required("First Name is required"),lastName:S.string().required("Last Name is required"),email:S.string().email("Email is invalid").required("Email is required")}),onSubmit:function(e){!function(e){e.updatedAt=JSON.stringify(ee()(new Date).valueOf()),q(!0);var t={query:"\n\n                              mutation UpdateUser($id: ID!, $name: String!, $surname: String!, $email: String!, $updatedAt: String!) {\n                                updateUser(userId: $id, name: $name, surname: $surname, email: $email, updatedAt: $updatedAt) {\n                                    name\n                                    surname\n                                    email\n                                  }\n                              }\n                            ",variables:{id:h._id,name:e.firstName,surname:e.lastName,email:e.email,updatedAt:e.updatedAt}};fetch("/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}}).then(function(e){if(!e.ok)throw q(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;console.log(e),$(e.data.updateUser),Q(!0,"Confirmation","User was updated"),q(!1)}).catch(function(e){throw q(!1),console.log(e),Q(!0,"Error",e),e})}(e)},render:function(e){var t=e.errors,a=e.touched;return r.a.createElement(w.c,{className:"settings-form",id:"formContentUserSettings"},r.a.createElement("div",{className:"p-2"},r.a.createElement("h4",null,"User settings")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"firstName"},"First Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"First name",name:"firstName",type:"text",className:"form-control"+(t.firstName&&a.firstName?" is-invalid":"")}),r.a.createElement(w.a,{name:"firstName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"lastName"},"Last Name"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Last name",name:"lastName",type:"text",className:"form-control"+(t.lastName&&a.lastName?" is-invalid":"")}),r.a.createElement(w.a,{name:"lastName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4 col-form-label",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(w.b,{placeholder:"Email",name:"email",type:"text",className:"form-control"+(t.email&&a.email?" is-invalid":"")}),r.a.createElement(w.a,{name:"email",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn_main update-btn"},"Update")))}})),r.a.createElement(xe.a,{eventKey:"systemSettings",title:"systemSettings"===te?r.a.createElement("span",{style:{color:"#ea97c4"}},r.a.createElement(ce.c,{size:20}),"\xa0 System "):r.a.createElement("span",null,r.a.createElement(ce.c,{size:20,color:"#aeaeae"}),"\xa0 System ")},r.a.createElement(w.d,{validateOnChange:!0,enableReinitialize:!0,initialValues:{dailyBudget:B.dailyBudget||"",weeklyBudget:B.weeklyBudget||"",monthlyBudget:B.monthlyBudget||"",categories:B.categories||"",newCategorie:"",newMember:"",members:B.members||"",currency:B.currency||""},validationSchema:S.object().shape({dailyBudget:S.number(),weeklyBudget:S.number(),monthlyBudget:S.number(),categories:S.string(),newCategorie:S.string(),memebers:S.string().email("Email is invalid"),newMember:S.string().email("Email is invalid"),currency:S.string().required("Currency is required")}),onSubmit:function(e){!function(e){q(!0);var t="",a="";c.forEach(function(e,t){c.length!=t+1?a+="".concat(e,";"):a+=e}),d.length&&d.forEach(function(e,a){d.length!=a+1?t+="".concat(e,";"):t+=e});var n={query:"\n\n                              mutation UpdateSettings($id: ID!, $dailyBudget: String!, $weeklyBudget: String!, $monthlyBudget: String!, $categories: String!, $members: String!, $currency: String!) {\n                                updateSettings(settingsId: $id, dailyBudget: $dailyBudget, weeklyBudget: $weeklyBudget, monthlyBudget: $monthlyBudget, categories: $categories, members: $members, currency: $currency) {\n                                    _id\n                                    dailyBudget\n                                    weeklyBudget\n                                    monthlyBudget\n                                    categories\n                                    members\n                                    currency\n                                  }\n                              }\n                            ",variables:{id:B._id,dailyBudget:e.dailyBudget,weeklyBudget:e.weeklyBudget,monthlyBudget:e.monthlyBudget,categories:a,members:t,currency:e.currency}};fetch("/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}}).then(function(e){if(!e.ok)throw q(!1),e.statusText;return e.json()}).then(function(e){if(e.errors)throw e.errors[0].message;var t=[];D(e.data.updateSettings),s(e.data.updateSettings.categories.split(";")),e.data.updateSettings.members.split(";").forEach(function(e){e.length&&t.push(e)}),p(t),q(!1),Q(!0,"Confirmation","Settings was updated")}).catch(function(e){throw q(!1),console.log(e),Q(!0,"Error",e),e})}(e)},render:function(e){var t=e.errors,n=e.values,l=e.touched,i=e.handleChange,m=e.setFieldValue,u=e.handleBlur;e.validateField;return r.a.createElement(w.c,{id:"formContentSystemSettings"},r.a.createElement("div",{className:"form-group row col-sm-12",style:{paddingTop:"25px"}},r.a.createElement("div",{className:"col-sm-4 "},r.a.createElement("div",{className:"p-2 settings-form"},r.a.createElement("h4",null,"Budget settings")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-5",htmlFor:"title"},"Daily budget"),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("div",{className:"input-group "},r.a.createElement("input",{placeholder:"0.00",name:"dailyBudget",onChange:function(e){m("dailyBudget",le(e))},value:n.dailyBudget,className:"form-control"+(t.dailyBudget&&l.dailyBudget?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},"GBD"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\xa3")):"Dollar"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"$")):r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\u20ac"))),r.a.createElement(w.a,{name:"dailyBudget",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-5",htmlFor:"title"},"Weekly budget"),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("input",{placeholder:"0.00",name:"weeklyBudget",onChange:function(e){m("weeklyBudget",le(e))},value:n.weeklyBudget,className:"form-control"+(t.weeklyBudget&&l.weeklyBudget?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},"GBD"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\xa3")):"Dollar"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"$")):r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\u20ac"))),r.a.createElement(w.a,{name:"weeklyBudget",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-5",htmlFor:"title"},"Monthly budget"),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("input",{placeholder:"0.00",name:"monthlyBudget",onChange:function(e){m("monthlyBudget",le(e))},value:n.monthlyBudget,className:"form-control"+(t.monthlyBudget&&l.monthlyBudget?" is-invalid":"")}),r.a.createElement("div",{className:"input-group-append"},"GBD"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\xa3")):"Dollar"===n.currency?r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"$")):r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{style:{fontSize:"15px"}},"\u20ac"))),r.a.createElement(w.a,{name:"monthlyBudget",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-5",htmlFor:"title"},"Currency"),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("select",{name:"currency",onChange:i,onBlur:u,value:n.currency,className:"custom-select mr-sm-2 form-control"+(t.currency&&l.currency?" is-invalid":""),id:"inlineFormCustomSelect"},r.a.createElement("option",{value:""},"Select a currency"),r.a.createElement("option",{value:"Euro"},"Euro \u20ac"),r.a.createElement("option",{value:"Dollar"},"Dollar $"),r.a.createElement("option",{value:"GBD"},"Pound \xa3")),r.a.createElement(w.a,{name:"currency",component:"div",className:"invalid-feedback"})))),r.a.createElement("div",{className:"col-sm-4 "},r.a.createElement("div",{className:"p-2 settings-form"},r.a.createElement("h4",null,"Categories settings")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4",htmlFor:"title"},"Add category"),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("input",{placeholder:"Category name",name:"newCategorie",onChange:function(e){var t;m("newCategorie",(t=e,a.newCategorie&&o(Object(we.a)({},a,{newCategorie:!1})),t.target.value.replace(/[\/\/|\/;&$%@"<>()+{}.',=_~`!#^*\/?]/g,"")))},value:n.newCategorie,className:"form-control col-sm-8 mr-1"+(a.newCategorie?" is-invalid":"")}),r.a.createElement("button",{type:"button",onClick:function(e){m("categories",function(e,t){if(void 0===e.target.value||!e.target.value.length)return o(Object(we.a)({},a,{newCategorie:!0})),t;e.target.value=e.target.value.toLowerCase();var n=e.target.value.charAt(0).toUpperCase()+e.target.value.slice(1),r=!1;c.forEach(function(e){e===n&&(r=!0)}),r?Q(!0,"Error","This category already in the category list."):s([].concat(Object(A.a)(c),[n]))}(e,n.categories)),m("newCategorie","")},value:n.newCategorie,className:"col-sm-3 btn btn_main"},"Add"),r.a.createElement(w.a,{name:"newCategorie",component:"div",className:"invalid-feedback"}),a.newCategorie?r.a.createElement("div",{className:"invalid-feedback"}," Category field can't be empty"):null))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4",htmlFor:"title"},"All categories"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("ul",{className:"list-group col-sm-9"},c.map(function(e){return r.a.createElement("li",{className:"row",key:e},r.a.createElement("span",{className:"list-group-item list-item col-sm-12"},e,r.a.createElement("button",{className:"btn card_removeButton",type:"button",onClick:function(){return function(e){1===c.length?Q(!0,"Error","You can't delete all categories."):s(c.filter(function(t){return t!==e}))}(e)}},r.a.createElement("i",null,r.a.createElement(ne.c,{size:20})))))}))))),r.a.createElement("div",{className:"col-sm-4 "},r.a.createElement("div",{className:"p-2 settings-form"},r.a.createElement("h4",null,"Fammily settings")),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4",htmlFor:"title"},"Add member"),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("input",{placeholder:"Member email",name:"newMember",onChange:function(e){var t;m("newMember",(t=e,a.emailValidation&&o(Object(we.a)({},a,{emailValidation:!1})),a.newMember&&o(Object(we.a)({},a,{newMember:!1})),t.target.value.replace(/[\/\/|\/;&$%"<>()+{}',=~`!#^*\/?]/g,"")))},value:n.newMember,className:"form-control col-sm-8 mr-1"+(a.newMember||a.emailValidation?" is-invalid":"")}),r.a.createElement("button",{type:"button",onClick:function(e){m("members",function(e,t,n){if(void 0===e.target.value||!e.target.value.length)return o(Object(we.a)({},a,{newMember:!0,emailValidation:!1})),t;if(n.newMember)o(Object(we.a)({},a,{emailValidation:!0}));else{var r=e.target.value.toLowerCase(),l=!1;d.forEach(function(e){e===r&&(l=!0)}),l?Q(!0,"Error","This member already in the members list."):p([].concat(Object(A.a)(d),[r]))}}(e,n.members,t)),m("newMember","")},value:n.newMember,className:"col-sm-3 btn btn_main"},"Add"),r.a.createElement(w.a,{name:"newMember",component:"div",className:"invalid-feedback"}),a.newMember?r.a.createElement("div",{className:"invalid-feedback"}," Memeber field can't be empty"):null,a.emailValidation?r.a.createElement("div",{className:"invalid-feedback"},"Email is invalid"):null))),d.length?r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-4",htmlFor:"title"},"All memebers"),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("ul",{className:"list-group col-sm-9"},d.map(function(e){return r.a.createElement("li",{className:"row",key:e},r.a.createElement("span",{className:"list-group-item list-item col-sm-12"},e,r.a.createElement("button",{className:"btn card_removeButton",type:"button",onClick:function(){return function(e){p(d.filter(function(t){return t!==e}))}(e)}},r.a.createElement("i",null,r.a.createElement(ne.c,{size:20})))))})))):null)),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn_main update-btn"},"Update")))}})))))}),Oe=a(711),Ce=a(714),je=a(704),$e=a(713),Fe=a(248),Ae=(a(691),function(){return r.a.createElement(y.Consumer,null,function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(Ce.a,{bg:"dark",variant:"dark"},r.a.createElement(Ce.a.Brand,{as:Oe.a,to:"/"},r.a.createElement(Fe.b,{size:40,className:"main-navigation__logo"}),"Budget planner"),r.a.createElement(je.a,{className:"main-navigation__items"},!e.token&&r.a.createElement("li",null,r.a.createElement(je.a.Link,{as:Oe.a,to:"/auth"},"Sign in")),e.token&&r.a.createElement($e.a,{alignRight:!0,title:r.a.createElement("span",null,r.a.createElement(ne.d,{size:25})),id:"collasible-nav-dropdown"},r.a.createElement($e.a.Item,{as:Oe.a,to:"/settings"},"Settings"),r.a.createElement($e.a.Divider,null),r.a.createElement($e.a.Item,{onClick:e.logout},"Logout")),e.token&&r.a.createElement($e.a,{alignRight:!0,title:r.a.createElement("span",null,r.a.createElement(Fe.a,{size:25})),id:"collasible-nav-dropdown"},r.a.createElement($e.a.Item,{as:Oe.a,to:"/expenses"},"Expenses"),r.a.createElement($e.a.Item,{as:Oe.a,to:"/statistics"},"Statistics")))))})}),Ie=(a(697),new E.a({uri:"/graphql"})),Be=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={token:null,userId:null},a.login=function(e,t){a.setState({token:e,userId:t})},a.logout=function(){fetch("/removeCookie",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){console.log(e.response.message)}).catch(function(e){console.log(e)}),a.setState({token:null,userId:null})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{client:Ie},r.a.createElement(d.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(y.Provider,{value:{token:this.state.token,userId:this.state.userId,login:this.login,logout:this.logout}},r.a.createElement(Ae,null),r.a.createElement("main",{className:"main-content"},r.a.createElement(p.a,null,r.a.createElement(f.a,{path:"/test",component:K}),this.state.token&&r.a.createElement(f.a,{path:"/expenses",component:Ne}),this.state.token&&r.a.createElement(g.a,{from:"/",to:"/expenses",exact:!0}),this.state.token&&r.a.createElement(g.a,{from:"/auth",to:"/expenses",exact:!0}),!this.state.token&&r.a.createElement(f.a,{path:"/auth",component:$}),r.a.createElement(f.a,{path:"/events",component:L}),this.state.token&&r.a.createElement(f.a,{path:"/bookings",component:_}),this.state.token&&r.a.createElement(f.a,{path:"/settings",component:ke}),!this.state.token&&r.a.createElement(g.a,{to:"/auth",exact:!0})))))))}}]),t}(n.Component);l.a.render(r.a.createElement(Be,null),document.getElementById("root"))}},[[396,2,1]]]);
//# sourceMappingURL=main.04bf3682.chunk.js.map